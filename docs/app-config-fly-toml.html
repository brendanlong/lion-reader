

<!doctype html>
<html lang="en-US" class="h-full" data-menu-state="off" data-motion="off">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="keywords" content="fly, fly.io, documentation, docs, elixir, docker, cdn, hosting, servers, networking, deploy app servers, close to users, postgresql clusters, heroku competitor, heroku alternative">
    <meta name="description" content="Documentation and guides from the team at Fly.io.">

    <title>App configuration (fly.toml) Â· Fly Docs</title>

    <meta name="referrer" content="origin">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msapplication-TileColor" content="#4d7cfe">
    <meta name="theme-color" content="#ffffff">

    <meta property="og:locale" content="en_US">
    <meta property="og:url" content="https://fly.io/docs/reference/configuration/">
    <meta property="og:type" content="article">
    <meta property="og:title" content="App configuration (fly.toml)">
    <meta property="og:image" content="https://og-images.fly.dev/image?template=light&amp;text=App+configuration+%28fly.toml%29">
    <meta property="og:description" content="Documentation and guides from the team at Fly.io.">
    <meta property="og:site_name" content="Fly">

    <!-- Search metadata for Algolia -->

    <meta name="twitter:site" content="@flydotio">
    <meta name="twitter:creator" content="@flydotio">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="App configuration (fly.toml)">
    <meta name="twitter:image" content="https://og-images.fly.dev/image?template=light&amp;text=App+configuration+%28fly.toml%29">
    <meta name="twitter:description" content="Documentation and guides from the team at Fly.io.">

    <link rel="shortcut icon" type="image/x-icon" href="/static/images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon/favicon-16x16.png">
    <link rel="mask-icon" href="/static/images/favicon/safari-pinned-tab.svg" color="#4d7cfe">
    <link rel="canonical" href="https://fly.io/docs/reference/configuration/">

    <style>
  html:not([data-motion=on]) * { 
    transition: none !important; 
    animation: none !important;
  }
</style>

<script>
  let resizeTimer

  window.addEventListener('resize', () => {
    document.documentElement.dataset.motion = 'off'
    clearTimeout(resizeTimer)
    resizeTimer = setTimeout(() => {
    document.documentElement.dataset.motion = 'on'
    }, 500)
  })

  document.addEventListener('DOMContentLoaded', () => {
    document.documentElement.dataset.motion = 'on'
  })
</script>
    <style>@font-face{font-family:'Fricolage Grotesque';font-weight:100 900;font-display:block;font-style:normal;font-named-instance:'Regular';src:url(/static/fonts/fricolage-grotesque.var.woff2) format('woff2');}@font-face{font-family:'Mackinac';src:url(/static/fonts/mackinac-medium.woff2) format('woff2');font-weight:500;font-style:normal;font-display:block;}@font-face{font-family:'Mackinac';src:url(/static/fonts/mackinac-medium-italic.woff2) format('woff2');font-weight:500;font-style:italic;font-display:block;}@font-face{font-family:'Mackinac';src: url(/static/fonts/mackinac-bold.woff2) format('woff2');font-weight:700;font-style:normal;font-display:block;}@font-face{font-family:'Fragment Mono';src:url(/static/fonts/fragment-mono-regular.woff2) format('woff2');font-weight:400;font-style:normal;font-display:block;}@font-face{font-family:'Fragment Mono';src:url(/static/fonts/fragment-mono-italic.woff2) format('woff2');font-weight:400;font-style:italic;font-display:block;}</style><script>var fontsInServiceWorker=sessionStorage.foutFontsStage1Loaded&&sessionStorage.foutFontsStage2Loaded||"serviceWorker"in navigator&&null!==navigator.serviceWorker.controller&&"activated"===navigator.serviceWorker.controller.state;if(!fontsInServiceWorker&&"fonts"in document){function fetchFonts(o){return Promise.all(o.map((function(o){return document.fonts.load(o)})))}sessionStorage.foutFontsStage2Loaded?document.documentElement.className+=" wf-loaded-stage2":sessionStorage.foutFontsStage1Loaded=!0}if("fonts"in document){let o=new FontFace("Fricolage Grotesque","url('/static/fonts/fricolage-grotesque.var.woff2') format('woff2')",{weight:"100 900",style:"normal"}),t=new FontFace("Mackinac","url('/static/fonts/mackinac-medium.woff2') format('woff2')",{weight:"500"}),e=new FontFace("Mackinac","url('/static/fonts/mackinac-medium-italic.woff2') format('woff2')",{weight:"500",style:"italic"}),a=new FontFace("Mackinac","url('/static/fonts/mackinac-bold.woff2') format('woff2')",{weight:"700"}),n=new FontFace("Fragment Mono","url('/static/fonts/fragment-mono-regular.woff2') format('woff2')",{weight:"400"}),r=new FontFace("Fragment Mono","url('/static/fonts/fragment-mono-italic.woff2') format('woff2')",{weight:"400",style:"italic"});Promise.all([o.load(),t.load(),e.load(),a.load(),n.load(),r.load()]).then((o=>{o.forEach((o=>document.fonts.add(o))),document.documentElement.classList.add("wf-loaded-stage2"),sessionStorage.foutFontsStage2Loaded=!0})).catch((o=>{throw new Error(`Error caught: ${o}`)}))}(sessionStorage.foutFontsStage1Loaded&&sessionStorage.foutFontsStage2Loaded||"serviceWorker"in navigator&&null!==navigator.serviceWorker.controller&&"activated"===navigator.serviceWorker.controller.state)&&document.documentElement.classList.add("wf-loaded-stage2");</script><link rel="preload" href="/static/fonts/fricolage-grotesque.var.woff2" as="font" type="font/woff2" crossorigin/><link rel="preload" href="/static/fonts/mackinac-medium.woff2" as="font" type="font/woff2" crossorigin/><link rel="preload" href="/static/fonts/mackinac-medium-italic.woff2" as="font" type="font/woff2" crossorigin/><link rel="preload" href="/static/fonts/mackinac-bold.woff2" as="font" type="font/woff2" crossorigin/><link rel="preload" href="/static/fonts/mackinac-bold-italic.woff2" as="font" type="font/woff2" crossorigin/><link rel="preload" href="/static/fonts/fragment-mono-regular.woff2" as="font" type="font/woff2" crossorigin/><link rel="preload" href="/static/fonts/fragment-mono-italic.woff2" as="font" type="font/woff2" crossorigin/>

    <link rel="stylesheet" href="/stylesheets/tailwind.css" media="screen" />

    <script defer data-domain="fly.io" src="/js/events.js"></script>
    <link rel="preconnect" href="https://4ET05XOQRG-dsn.algolia.net" crossorigin>

  </head>

  
  <body class="docs relative w-full h-full antialiased text-gray-600 toc">
    <div class="h-full lg:ml-72 xl:ml-80">
      <a href="#main-content-start" class="skip-to-main-content-link">Skip to content</a>
      <header class="contents lg:pointer-events-none lg:fixed lg:inset-0 lg:z-40 lg:flex">
        <div class="contents lg:pointer-events-auto lg:block lg:w-72 xl:w-80 border-r bg-clip-padding lg:px-6 lg:pb-8 lg:pt-4">
          <div id="logo" class="relative">
            <a aria-label="Fly.io Home" href="/" class="hidden lg:inline-flex">
              
<svg 
  role="img" 
  class="text-navy-950" 
  fill-rule="evenodd" 
  viewBox="0 0 84 84"
  style="pointer-events: none; width: auto; height: 28px;" 
  aria-labelledby="logo-title-9024 logo-description-9024" 
>
  <title id="logo-title-9024">Fly</title>
  <desc id="logo-description-9024">App performance optimization</desc>
  <g buffered-rendering="static">
    <path 
      d="M57.413 10.134h9.454c8.409 0 15.236 6.827 15.236 15.236v33.243c0 8.409-6.827 15.236-15.236 15.236h-.745c-4.328-.677-6.205-1.975-7.655-3.072l-12.02-9.883a1.692 1.692 0 0 0-2.128 0l-3.905 3.211-10.998-9.043a1.688 1.688 0 0 0-2.127 0L12.01 68.503c-3.075 2.501-5.109 2.039-6.428 1.894C2.175 67.601 0 63.359 0 58.613V25.37c0-8.409 6.827-15.236 15.237-15.236h9.433l-.017.038-.318.927-.099.318-.428 1.899-.059.333-.188 1.902-.025.522-.004.183.018.872.043.511.106.8.135.72.16.663.208.718.54 1.52.178.456.94 1.986.332.61 1.087 1.866.416.673 1.517 2.234.219.296 1.974 2.569.638.791 2.254 2.635.463.507 1.858 1.999.736.762 1.216 1.208-.244.204-.152.137c-.413.385-.805.794-1.172 1.224a10.42 10.42 0 0 0-.504.644 8.319 8.319 0 0 0-.651 1.064 6.234 6.234 0 0 0-.261.591 5.47 5.47 0 0 0-.353 1.606l-.007.475a5.64 5.64 0 0 0 .403 1.953 5.44 5.44 0 0 0 1.086 1.703c.338.36.723.674 1.145.932.359.22.742.401 1.14.539a6.39 6.39 0 0 0 2.692.306h.005a6.072 6.072 0 0 0 2.22-.659c.298-.158.582-.341.848-.549a5.438 5.438 0 0 0 1.71-2.274c.28-.699.417-1.446.405-2.198l-.022-.393a5.535 5.535 0 0 0-.368-1.513 6.284 6.284 0 0 0-.285-.618 8.49 8.49 0 0 0-.67-1.061 11.022 11.022 0 0 0-.354-.453 14.594 14.594 0 0 0-1.308-1.37l-.329-.28.557-.55 2.394-2.5.828-.909 1.287-1.448.837-.979 1.194-1.454.808-1.016 1.187-1.587.599-.821.85-1.271.708-1.083 1.334-2.323.763-1.524.022-.047.584-1.414a.531.531 0 0 0 .02-.056l.629-1.962.066-.286.273-1.562.053-.423.016-.259.019-.978-.005-.182-.05-.876-.062-.68-.31-1.961c-.005-.026-.01-.052-.018-.078l-.398-1.45-.137-.403-.179-.446Zm4.494 41.455a3.662 3.662 0 0 0-3.61 3.61 3.663 3.663 0 0 0 3.61 3.609 3.665 3.665 0 0 0 3.611-3.609 3.663 3.663 0 0 0-3.611-3.61Z" 
      fill="url(#default-radial-9024)" fill-opacity="1"
    />
    <path 
      d="M35.639 72.544l-.637.535a3.332 3.332 0 01-2.09.762H15.235a15.176 15.176 0 01-9.654-3.451c1.319.145 3.353.607 6.428-1.894l15.277-13.44a1.693 1.693 0 012.127 0l10.997 9.042 3.904-3.21c.619-.5 1.51-.5 2.128 0l12.019 9.882c1.45 1.097 3.327 2.394 7.654 3.071H58.12a3.394 3.394 0 01-1.963-.654l-.14-.108-.593-.493a1.247 1.247 0 00-.158-.159c-.672-.563-9.187-7.617-9.187-7.617a1 1 0 00-1.281.002s.021.026-9.038 7.615a1.12 1.12 0 00-.121.117zm26.262-20.96a3.678 3.678 0 00-3.61 3.609 3.68 3.68 0 003.61 3.609 3.68 3.68 0 003.61-3.609 3.678 3.678 0 00-3.61-3.609zM38.566 40.648L37.35 39.44l-.736-.762-1.858-1.999-.463-.507-2.253-2.634-.638-.791-1.974-2.569-.219-.296-1.517-2.234-.416-.673-1.087-1.866-.332-.61-.94-1.985-.178-.456-.539-1.52-.208-.718-.16-.663-.135-.72-.106-.8-.043-.511-.018-.872.004-.183.025-.522.188-1.901.059-.333.428-1.899.098-.318.318-.927.102-.24.506-1.112.351-.662.489-.806.487-.718.347-.456.4-.482.44-.484.377-.378.918-.808.671-.549c.016-.014.033-.026.05-.038l.794-.537.631-.402 1.198-.631c.018-.011.039-.02.058-.029l1.698-.705.157-.059 1.51-.442.638-.143.862-.173.572-.087.877-.109.598-.053 1.187-.063.465-.005.881.018.229.013 1.276.106 1.687.238.195.041 1.668.415.49.146.544.188.663.251.524.222.77.363.485.249.872.512.325.2 1.189.868.341.296.828.754.041.041.703.754.242.273.825 1.096.168.262.655 1.106.197.379.369.825.386.963.137.403.398 1.45a.89.89 0 01.018.078l.31 1.961.062.679.05.876.005.182-.019.978-.016.259-.053.423-.273 1.562-.066.286-.629 1.962a.626.626 0 01-.02.056l-.584 1.414-.022.047-.763 1.523-1.334 2.323-.708 1.083-.849 1.271-.599.821-1.187 1.587-.808 1.016-1.194 1.453-.837.979-1.287 1.448-.828.909-2.394 2.5-.556.55.328.28c.465.428.902.885 1.308 1.37.122.148.24.299.354.453.249.336.473.691.67 1.06.106.2.201.407.285.618.191.484.32.996.368 1.513l.022.393c.012.752-.125 1.5-.405 2.198a5.438 5.438 0 01-1.71 2.274c-.266.208-.55.391-.848.549a6.08 6.08 0 01-2.219.659h-.005a6.403 6.403 0 01-2.692-.306 5.882 5.882 0 01-1.14-.539 5.523 5.523 0 01-1.145-.932 5.458 5.458 0 01-1.086-1.703 5.662 5.662 0 01-.403-1.953l.007-.475a5.47 5.47 0 01.353-1.606c.077-.202.164-.399.261-.591.19-.37.408-.725.651-1.063.159-.221.328-.436.504-.644.367-.43.759-.839 1.172-1.224l.152-.137.244-.204z" 
      fill="currentColor" 
    />
    <path 
      d="M35.002 73.079l9.796-8.267a1 1 0 011.281-.002l9.938 8.269c.604.492 1.36.761 2.139.762h-25.28c.776 0 1.527-.269 2.126-.762zM41.1 43.568l.096.028c.031.015.057.036.085.055l.08.071c.198.182.39.373.575.569.13.139.257.282.379.43.155.187.3.383.432.587.057.09.11.181.16.276.043.082.082.167.116.253.06.15.105.308.119.469l-.003.302a1.726 1.726 0 01-.817 1.343 2.333 2.333 0 01-.994.327l-.373.011-.315-.028a2.398 2.398 0 01-.433-.105 2.07 2.07 0 01-.41-.192l-.246-.18a1.685 1.685 0 01-.56-.96 2.418 2.418 0 01-.029-.19l-.009-.288c.005-.078.017-.155.034-.232.043-.168.105-.331.183-.486.101-.194.216-.381.344-.559.213-.288.444-.562.691-.821.159-.168.322-.331.492-.488l.121-.109c.084-.055.085-.055.181-.083h.101zM40.481 3.42l.039-.003v33.665l-.084-.155a94.101 94.101 0 01-3.093-6.267 67.257 67.257 0 01-2.099-5.255 41.665 41.665 0 01-1.265-4.326c-.265-1.163-.469-2.343-.553-3.535a16.923 16.923 0 01-.029-1.528c.008-.444.026-.887.054-1.33.044-.696.115-1.391.217-2.081.081-.543.181-1.084.304-1.619.098-.425.212-.847.342-1.262.188-.6.413-1.186.675-1.758.096-.206.199-.411.307-.612.65-1.204 1.532-2.313 2.687-3.054a5.609 5.609 0 012.498-.88zm4.365.085l2.265.646c1.049.387 2.059.891 2.987 1.521a11.984 11.984 0 013.212 3.204c.502.748.918 1.555 1.243 2.398.471 1.247.763 2.554.866 3.882.03.348.047.697.054 1.046.008.324.006.649-.02.973-.064.725-.2 1.442-.407 2.14a17.03 17.03 0 01-.587 1.684c-.28.685-.591 1.357-.932 2.013-.754 1.457-1.623 2.852-2.553 4.201a65.451 65.451 0 01-3.683 4.806 91.02 91.02 0 01-4.417 4.896 93.66 93.66 0 002.907-5.949c.5-1.124.971-2.26 1.414-3.407.487-1.26.927-2.537 1.317-3.83.29-.969.546-1.948.757-2.938.181-.849.323-1.707.411-2.57.074-.72.101-1.444.083-2.166a30.867 30.867 0 00-.049-1.325c-.106-1.775-.376-3.545-.894-5.248a15.341 15.341 0 00-.714-1.892c-.663-1.444-1.588-2.793-2.84-3.778l-.42-.307z"
      fill="#fff" 
    />
    <path 
      d="M179.213 64.297l-10.751-23.015c-.898-1.917-1.433-2.618-2.331-3.431l-.874-.788c-.697-.676-1.155-1.302-1.155-2.045 0-1.064.843-1.96 2.378-1.96h9.334c1.465 0 2.378.762 2.378 1.9 0 .635-.292 1.111-.661 1.578-.438.555-1.008 1.096-1.008 2.082 0 .618.18 1.234.527 2.021l6.416 15.025 5.755-14.647c.354-.974.596-1.832.596-2.519 0-1.069-.581-1.505-1.029-1.983-.39-.415-.702-.854-.702-1.557 0-1.149.935-1.9 2.193-1.9h5.748c1.612 0 2.378.834 2.378 1.9 0 .682-.393 1.314-1.166 1.996l-.813.668c-1.132.925-1.656 2.263-2.251 3.647l-8.716 20.998c-1.03 2.455-2.563 5.863-4.905 8.659-2.379 2.84-5.587 5.048-9.932 5.048-3.638 0-5.84-1.737-5.84-4.24 0-2.293 1.696-4.12 3.924-4.12 1.22 0 1.855.576 2.499 1.169.532.489 1.072.991 2.137.991.988 0 1.908-.418 2.742-1.093 1.274-1.03 2.341-2.652 3.129-4.384zm63.175-.082c4.839 0 8.804-1.658 11.897-4.967 3.09-3.304 4.636-7.281 4.636-11.931 0-4.539-1.469-8.268-4.396-11.191-2.926-2.921-6.723-4.388-11.396-4.388-4.92 0-8.944 1.597-12.077 4.78-3.135 3.186-4.703 7.045-4.703 11.578 0 4.493 1.496 8.301 4.483 11.425 2.99 3.126 6.84 4.694 11.556 4.694zm-40.921-.36c2.798 0 4.788-1.884 4.788-4.6 0-2.652-2.055-4.54-4.788-4.54-2.863 0-4.912 1.891-4.912 4.54 0 2.713 2.05 4.6 4.912 4.6zm9.964-4.305l.681-.72c.81-.787 1.071-1.582 1.071-3.774V42.097c0-1.895-.258-2.741-1.062-3.465l-.801-.718c-.785-.693-1.043-1.124-1.043-1.816 0-.984.763-1.791 1.99-2.071l5.44-1.32c.52-.126 1.107-.249 1.562-.249.626 0 1.138.206 1.497.563.36.358.572.873.572 1.517v20.518c0 2.069.251 3.031 1.115 3.758a.359.359 0 01.039.039l.608.708c.764.743 1.081 1.236 1.081 1.914 0 1.209-.912 1.9-2.377 1.9h-9.211c-1.396 0-2.316-.687-2.316-1.9 0-.681.317-1.178 1.154-1.925zm-61.567.001l.681-.721c.811-.787 1.071-1.582 1.071-3.774V27.999c0-1.835-.194-2.736-1.053-3.459l-.822-.796c-.709-.689-.968-1.116-.968-1.805 0-.985.767-1.789 1.927-2.07l5.378-1.32c.521-.126 1.107-.249 1.563-.249.621 0 1.147.187 1.522.542.376.356.608.885.608 1.598v34.616c0 2.074.258 2.981 1.125 3.766l.694.734c.769.748 1.025 1.238 1.025 1.919 0 .502-.153.907-.426 1.216-.385.435-1.03.684-1.89.684h-9.21c-.86 0-1.505-.249-1.891-.684-.272-.309-.425-.714-.425-1.216 0-.682.253-1.176 1.091-1.924zm-25.079-13.934v9.319c0 1.404.278 2.701 1.435 3.768l.748.726c.838.813 1.093 1.3 1.093 2.045 0 1.138-.913 1.9-2.378 1.9h-10.385c-1.465 0-2.377-.762-2.377-1.9 0-.884.259-1.303 1.097-2.049l.745-.724c.868-.786 1.434-1.857 1.434-3.766V30.039c0-1.517-.336-2.758-1.435-3.769l-.749-.726c-.77-.747-1.092-1.238-1.092-1.985 0-1.206.915-1.96 2.377-1.96h27.817c1.063 0 1.997.237 2.594.822.415.407.68.981.71 1.778l.433 6.421c.043.803-.194 1.472-.657 1.885-.319.284-.748.454-1.288.454-.681 0-1.203-.257-1.669-.701-.419-.399-.792-.959-1.213-1.618-1.016-1.624-1.489-2.208-2.572-2.967-1.507-1.112-3.803-1.494-8.145-1.494-2.505 0-4.086.109-5.082.366-.644.166-1.016.382-1.215.699-.204.324-.226.734-.226 1.235v12.618h6.523c1.561 0 2.659-.282 3.931-2.021l.007-.01c.51-.649.879-1.127 1.23-1.444.409-.37.802-.545 1.323-.545a1.9 1.9 0 011.883 1.901v8.699c0 1.165-.908 1.96-1.883 1.96-.485 0-.879-.173-1.289-.535-.353-.31-.723-.775-1.203-1.396-1.392-1.802-2.375-2.089-3.999-2.089h-6.523zm110.214-.22c0-3.121.68-5.364 2.089-6.713 1.392-1.332 2.888-2.006 4.496-2.006 2.212 0 4.205 1.238 6.003 3.672 1.837 2.489 2.746 5.853 2.746 10.086 0 3.124-.682 5.388-2.093 6.776-1.391 1.369-2.886 2.063-4.493 2.063-2.212 0-4.204-1.248-6.002-3.701-1.838-2.51-2.746-5.904-2.746-10.177zm-18.202-16.878c2.804 0 4.788-1.578 4.788-4.3 0-2.658-1.982-4.24-4.788-4.24-2.871 0-4.851 1.583-4.851 4.24 0 2.656 1.981 4.3 4.851 4.3z"
      fill="currentColor" 
    />
  </g>
  <defs>
    <radialGradient id="default-radial-9024" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(43.593 41.714) scale(59.4764)">
      <stop offset="0" stop-color="#ba7bf0" />
      <stop offset=".45" stop-color="#996bec" />
      <stop offset="1" stop-color="#5046e4" />
    </radialGradient>
  </defs>
</svg>
            </a>
            <a aria-label="Docs Home" href="/docs/" class="hidden lg:inline-flex">
              
<svg 
  role="img" 
  class="text-violet-500" 
  fill="currentColor"
  fill-rule="evenodd" 
  viewBox="0 0 117 84"
  style="pointer-events: none; width: auto; height: 28px;" 
  aria-labelledby="logo-title" 
>
  <title id="logo-title">Docs</title>
  <g buffered-rendering="static">
    <path d="M34.552 26.566l-.116.071-.013.007c-.39.217-.729.481-1.109.655-.536.608-1.333 1.169-2.13 1.721-.372.357-.745.599-1.24.839a.355.355 0 01-.095.032c-.071.014-.142.026-.206.048-.017.005-.043.018-.054.023a.34.34 0 00-.006.053c0 .156-.091.29-.222.352l-.11.053c-.102.05-.17.04-.17.04a.386.386 0 01-.189-.049.43.43 0 01-.152.087l-.19.147a.804.804 0 01-.308.138c-.107.048-.37.131-.665.244-.255.098-.544.222-.719.393a2.066 2.066 0 01-.884.519c-.216.205-.472.422-.696.53a.536.536 0 01-.426.184.385.385 0 01-.351-.225c-.028-.003-.254-.035-.345-.218a.961.961 0 01-.073.134.464.464 0 01-.505.182 1.366 1.366 0 01-.283.207c-.082.046-.166.085-.244.127-.044.024-.091.042-.116.089a.363.363 0 01-.079.106l-.165.16c-.137.133-.272.113-.272.113a.387.387 0 01-.269-.109.562.562 0 01-.128-.178.432.432 0 01-.327-.076.444.444 0 01-.149-.198.364.364 0 01-.034-.139l-.001-.083c0-.155.099-.291.171-.369l.003-.005c.171-.278.454-.717.579-.9a.863.863 0 01.097-.135.388.388 0 01.347-.217c.066 0 .185.041.239.062l.012.002v-.229l.243.24.002-.002-.245-.246a.85.85 0 01.065-.241c.03-.162.16-.29.327-.314.05-.006.081-.042.113-.077.05-.055.093-.12.137-.185.11-.163.224-.324.36-.434.078-.079.105-.129.133-.153a.42.42 0 01.151-.089l.189-.116a.668.668 0 01.328-.378c.072-.04.21-.096.243-.109.137-.136.232-.274.326-.411l.22-.428a.393.393 0 01.212-.187c.221-.08.363-.288.52-.458.156-.168.319-.316.501-.406.082-.065.187-.128.297-.195.092-.057.205-.107.242-.214a.782.782 0 01.148-.263l.008-.008.184.457c.01-.021.02-.042.027-.065 0-.013.003-.025.008-.037a.356.356 0 01-.046-.165l-.001.003v-.08l.022.021a.258.258 0 00-.015.04l.095.096.005-.05-.085-.086a.371.371 0 01.068-.121c.02-.019.084-.051.11-.064a.677.677 0 00-.045-.002c.023 0 .056-.003.056-.003l-.011.005.007.001c-.056.037-.085.147-.1.27l.114.114c.081-.005.122-.021.143-.047l-.031-.297a.38.38 0 00-.126-.04c.032-.021.072-.019.124.02l-.025-.24a.822.822 0 00.464-.262c.059-.06.114-.113.166-.152.302-.342.544-.467.789-.645.227-.166.505-.331.787-.451.142-.195.265-.307.456-.342l.14-.102.019.056a.16.16 0 01.055-.089.547.547 0 01.222-.185c.071-.035.212-.061.288-.073.15-.192.356-.286.64-.424a.74.74 0 01.539-.374l.229-.111.823-.692a.566.566 0 01.431-.155h.018a.384.384 0 01.058-.047l.927-.619a.349.349 0 01.074-.039c1.514-.588 1.916-.972 2.328-1.346.459-.415.929-.822 2.67-1.415l.832-.231.052.389.051-.014.057-.056a.241.241 0 00.136.052l.133-.332a.469.469 0 00-.091-.055l.054.002c.088 0 .149-.056.214-.101.102-.071.203-.144.314-.198a.383.383 0 01.056-.022l.927-.281a.378.378 0 01.111-.017c.137 0 .272-.05.415-.095.217-.067.443-.13.686-.13h.116c.282 0 .513-.151.701-.242a.307.307 0 01.05-.02c.175-.057.449-.071.693-.074a.638.638 0 01.433-.035.605.605 0 01.498-.247h.116c.116 0 .29-.056.463-.056.148 0 .299.051.448.119.524-.266 1.089-.287 1.659-.342l.71-.005.028-.015c.158-.077.394-.095.631-.095h.462a.37.37 0 01.095.011c.127.022.266.021.404.033.173.015.346.047.507.119.107-.015.236-.05.328-.05l.029.001 1.49.111c.168.002.324.031.448.119.034-.038.09-.062.175-.062l.058-.001c.18 0 .23.103.22.234l.05-.125.119.118a.507.507 0 01.25-.058c.122 0 .24.014.359.097.059.028.109.07.151.124a.555.555 0 01.359-.108c.128 0 .372.041.5.165.031.03.08.073.113.101a.382.382 0 01.256-.098l.364.148.01.008-.009-.007-.001-.001-.029-.023c.186.13.359.161.514.188.161.028.31.053.448.107l.029.013c.048.023.074.017.122.017.074 0 .147.022.209.062.479.31.956.574 1.436.678l.01.002c.132.032.254.098.371.172.042.026.083.053.125.076.017.009.031.022.05.022a.38.38 0 01.194.053c.565.329 1.072.715 1.581.935a.384.384 0 01.053.028l1.507.956a.404.404 0 01.099.09c.145.189.337.38.483.474a.405.405 0 01.092.083c.4.5.745.722 1.088 1.111a.248.248 0 01.029.037c.069.099.113.21.148.32.015.046.043.124.05.143a.396.396 0 01.085.149c.236.142.307.36.307.565v.028c.178.056.315.209.416.404.362.644.603 1.23.785 1.874.413 1.318.707 2.636.825 4.011.06.575.118 1.15.118 1.725 0 1.368-.175 2.793-.523 3.994a1.38 1.38 0 01-.056.341v.267a.361.361 0 01-.101.263l.012-.006a.688.688 0 00-.128.324c-.035.183-.048.386-.076.602a.48.48 0 01-.018.077c-.119.345-.18.747-.298 1.035a.5.5 0 01-.039.072c-.323.469-.372.942-.529 1.36-.127.479-.308.672-.496.974l-.783 1.518c-.081.295-.165.396-.38.541 0 0-.804 1.145-.803 1.141-.302.689-.716 1.162-1.245 1.732a.528.528 0 01-.121.133c-.42.837-1.053 1.571-1.688 2.3-.405.504-.867.897-1.272 1.401a.387.387 0 01-.092.084c-.135.087-.264.268-.354.4a.393.393 0 01-.05.058l-.985.956a.379.379 0 01-.15.091c-.101.032-.253.005-.354.202a.382.382 0 01-.051.075c-.276.322-.699.6-1.004.825-.039.131-.078.282-.116.369a.593.593 0 01-.12.182.347.347 0 01-.076.056c-.02.023-.101.114-.145.151a.518.518 0 01-.454.112 1.953 1.953 0 01-.488.425c-.158.1-.316.172-.446.262a1.94 1.94 0 01-.547.508c-.105.069-.21.112-.266.194-.091.174-.159.222-.207.251a.437.437 0 01-.247.061h-.058c-.088 0-.138.072-.189.128-.087.096-.163.197-.237.269a.385.385 0 01-.286.109c-.15.093-.273.231-.397.33a1.01 1.01 0 01-.479.227c-.228.106-.368.298-.56.438l-.04.026c-.174.096-.331.256-.493.419-.205.207-.412.419-.633.572a.378.378 0 01-.043.026c-.872.451-1.628.903-2.442 1.298-.321.156-.539.312-.799.466-.078.079-.177.184-.292.263a.832.832 0 01-.445.152c-.14.177-.324.273-.522.339-.131.044-.276.054-.385.118-.293.381-.761.594-1.302.611-.057.042-.197.14-.309.188l-.674.382a.385.385 0 01-.165.049h-.106a1.04 1.04 0 01-.203-.029 2.06 2.06 0 01-.395.078c-.129.015-.26.007-.369.065a.816.816 0 01-.094.15.41.41 0 01-.306.13h-.174c-.083 0-.132.073-.199.129-.11.092-.225.19-.361.269a.383.383 0 01-.193.052s-.028.003-.077-.008l-.209-.065a.386.386 0 01-.234-.199c-.302.106-.629.16-.928.16 0 0-.256 0-.255-.001a.941.941 0 01-.444.169c-.163.023-.353-.008-.524.074a.372.372 0 01-.146.038l-.091.001c-.029.003-.047 0-.047 0l-.013-.023a.384.384 0 01-.182-.136.336.336 0 01-.127-.218c-.284.06-.526.08-.775.147l.004.024a.976.976 0 01-.032.298c-.04.163-.118.349-.166.41a.503.503 0 00-.045.075c.014.074.071.17.12.267.108.157.126.246.15.422.023.167.046.416-.091.69a.401.401 0 01-.042.065c-.029.038-.046.071-.039.12.005.04.032.075.045.104a.805.805 0 01.035.096c.099.24.181.423.207.612.043.313-.04.582-.071.841a.726.726 0 01-.123.348.541.541 0 01-.044.05l.127.933a.435.435 0 01-.044.262.753.753 0 01-.074.116c-.012.015-.033.029-.042.052a.384.384 0 01-.224.232l.05.307.001.054c-.001.095-.021.279-.116.401a.383.383 0 01-.251.144s-.043.011-.112-.001a.386.386 0 01-.106-.032.619.619 0 01-.349-.412l-.086-.297-.023-.028c-.006.026-.026.062-.016.132a.385.385 0 01-.726.23.403.403 0 01-.086-.073l-.247-.272a.412.412 0 01-.084-.114l-.076-.151.055.028c.093.205.34.177.34.177l-.34-.177-.018-.049a.513.513 0 01-.331-.318l-.062-.123.395.205-.436-.333a1.673 1.673 0 00-.174-.501c-.102-.213-.208-.418-.269-.629l-.008-.035-.004-.002a.369.369 0 01-.241-.207 1.69 1.69 0 01-.129-.374c-.147-.638-.397-1.209-.59-1.787a.43.43 0 01-.016-.071l-.077-.562a1.706 1.706 0 01-.352-.855c-.054-.39.008-.796-.046-1.186a.991.991 0 010-.231c.004-.037.016-.074.011-.111 0-.002-.002-.004-.004-.006l-.004-.004.004.004.007.005c.081.06.181.085.28.072l-.431-.465.018-.127-.057-.418.436.333-.436-.333c-.005-.035-.003-.056-.021-.086a.382.382 0 01-.075-.186l-.007-.053.435.332-.436-.333a.94.94 0 01.001-.231c.004-.038.016-.075.011-.111a.357.357 0 01-.003-.08c.017-.253.046-.457.026-.605l-.161-1.169a.384.384 0 01.038-.229.509.509 0 00.065-.296.39.39 0 01.029-.211l-.041-.299c-.056-.41.046-.963.058-1.323a.393.393 0 00.127.302.384.384 0 00.227.099l.008-.078-.36-.355.043-.366c-.014-.014-.034-.034-.051-.046a.39.39 0 01-.155-.262 2.06 2.06 0 01-.016-.447.598.598 0 01.023-.101c.041-.473.073-.992.004-1.497a.39.39 0 01.018-.183c.112-.317.123-.457.319-.634l.009-.079a.645.645 0 01.065-.373.452.452 0 01.02-.151 1.224 1.224 0 01-.087-.33.438.438 0 01.032-.264l.004-.008a.612.612 0 01-.047-.07.354.354 0 01-.054-.137l-.026-.185.284.213-.285-.217c-.026-.19-.019-.306.033-.411l.126-1.42c-.025-.31.145-.48.316-.545a.697.697 0 01-.074-.234l-.053-.39.435.333-.434-.448c.155-.979.198-1.943.393-3.033.005-.41.052-.934.114-1.347a.454.454 0 01.012-.053l.255-.866-.033-.241.417.31v-.002l-.422-.384c.012-.361-.029-.769.086-1.143.03-.659.19-1.129.228-1.681.023-.695.225-1.357.315-2.003l.061-.75-.024-.174.401.301-.402-.307a1.866 1.866 0 01-.025-.411.61.61 0 01.059-.206c.061-.187.112-.442.084-.648-.028-.206-.008-.609.089-.853.125-.713.303-1.431.271-2.069a.44.44 0 01.004-.081c.158-.991.33-1.87.511-2.694l.286-1.705zm74.63 34.135a4.793 4.793 0 01-.409.465.279.279 0 01-.032.028c-.564.438-1.185.873-1.692 1.42a.383.383 0 01-.192.112c-.24.059-.389.156-.535.231-.138.072-.274.13-.437.161l-1.897.725c-.892.289-1.605.462-2.379.577l-.055.001-.001.003h-.406a10.514 10.514 0 01-1.082-.114.432.432 0 01-.254-.115.935.935 0 01-.067-.07c-.012-.015-.018-.047-.047-.057a.383.383 0 01-.247-.243c-.08-.232-.247-.343-.472-.489a.717.717 0 01-.364-.235.551.551 0 01-.084-.146c-.026-.033-.064-.053-.092-.084a.776.776 0 01-.105-.14l-.013-.022a.387.387 0 00.336.197l-.061-.156a.388.388 0 01-.209-.346c0-.039.001-.094.009-.159l-.004-.011.007-.007a.9.9 0 01.06-.22l-.001-.001a.433.433 0 01-.013-.106l-.001-.008c-.061-.237-.115-.425-.115-.669 0-.075.025-.268.025-.268s.009.037.018.054c.066.129.199.21.343.21l-.386-.392v-.107l.386.387-.386-.39c0-.199.149-1.059.217-1.191.126-.245.367-.546.617-.751.174-.356.357-.839.587-1.118a.445.445 0 01.048-.049c.439-.372.939-.63 1.214-1.003l-.007.076-.002.006-.009.014v.011l.009-.025.002-.003v-.003l.005-.005.092-.151.055-.022.132-.157c.172-.041.318-.153.457-.278.184-.165.354-.358.524-.523l.017-.016c.294-.253.65-.402 1.018-.545.291-.113.592-.222.851-.423a.39.39 0 00-.09.517c.081-.043.16-.09.236-.143l-.111-.398.324-.21c.273-.219.53-.383.723-.493l-.276-.235c-.62-.492-1.126-.932-1.802-1.315a.301.301 0 01-.042-.027c-.522-.394-1.16-.732-1.74-1.182a7.374 7.374 0 01-1.294-1.254l.002.055-.022.155a.437.437 0 01-.116.188 4.032 4.032 0 01-.199.283 28.02 28.02 0 01-.435.556.384.384 0 01.268.206.393.393 0 01-.035.407s-1.87 2.541-2.244 3.09l-.179.27a.624.624 0 01-.064.076c-.033.04-.051.102-.079.16a1.957 1.957 0 01-.149.274l-.013.017c-.074.096-.148.173-.21.245-.023.027-.056.043-.056.078a.396.396 0 01-.022.128c-.072.211-.193.31-.335.443a2.186 2.186 0 00-.051.14.351.351 0 01-.019.091c-.079.229-.172.451-.329.603-.117.114-.287.25-.345.399a.349.349 0 01-.135.284l.013-.005-.11.107a.414.414 0 01-.069.056c-.206.156-.368.35-.522.465-.421.456-.953.807-1.545 1.153l-1.06.866c-.532.514-1.12.86-1.651 1.261a.322.322 0 01-.064.039c-.064.032-.128.083-.193.118a.725.725 0 01-.256.086c-.368.108-.783.31-1.196.51a2.025 2.025 0 01-.636.263 7.884 7.884 0 01-1.112.181 2.136 2.136 0 01-.598.062c-.209 0-.476-.016-.696-.123a1.093 1.093 0 01-.311-.102l-.328-.001c-.631-.018-1.481-.311-1.974-.606a3.456 3.456 0 01-.212-.127.377.377 0 01-.199-.084l-1.1-.9a.262.262 0 01-.025-.022c-.274-.266-.415-.529-.552-.862a.381.381 0 01-.03-.149c0-.242-.021-.53-.229-.732a.39.39 0 01-.116-.242l-.348-3.543a.387.387 0 01.019-.165c.28-.815.505-1.684.674-2.552a4.23 4.23 0 01.066-.83.335.335 0 01.022-.07c.151-.368.332-.684.466-1.036a1.276 1.276 0 01-.109.004h-1.217c-.232 0-.695.338-1.043.338-.115-.057-.463 0-.579-.113-.116-.056-.405-.056-.405-.056a1.272 1.272 0 00-.464.281v.45l-.058 1.293c0 .45-.232 1.012-.347 1.687-.116.169-.174.394-.464.787v.338c0 .169-.058.225-.174.337l-.116.225c-.115.506-.231.675-.463.9a.15.15 0 01-.018.063l-.022.042a.15.15 0 00-.018.064v.056c0 .112 0 .225-.116.281a11.844 11.844 0 01-.811 1.462l-.463.562c-.058.169-.232.281-.406.45l-.058.113c-.405.168-.753.506-1.042.956-.522.337-1.043.674-1.623.843-.521.112-.637.337-.926.394-.116.056-.29.112-.406.112-.116 0-.174-.056-.232-.056l-.695-.113c-.29 0-.753 0-1.043-.112l-.984-.281c-.116-.056-.232-.056-.348-.169-.174-.225-.464-.281-.464-.394-.289-.224-.579-.674-.811-.955-.347-.282-.695-.675-.869-1.125-.057-.113 0-.338-.115-.562-.232-.507-.29-1.181-.464-1.8l-.058-.281c.116-.112.116-.281.116-.619-.058-.112-.058-.224-.058-.393v-.45c0-.225.058-.562.058-.675v-.337l.058-.45c.058-.281.058-.619.174-.9v-.112l.232-1.35.347-.843c0-.225.116-.281.116-.394.174-.506.29-.9.521-1.349 0-.057 0-.113.174-.282l1.622-3.374c.348-.337.638-.955.985-1.293.174-.056.174-.225.29-.337l.695-1.012c.29-.282.348-.45.637-.788.058-.112.058-.168.058-.281.058-.112.174-.281.348-.281.058 0 .116 0 .173-.112l.174-.282c.116-.112.232-.112.348-.112h.927s.058-.056.116-.056.173.056.289.056c.058.056.116.056.174.056.058-.056.174-.056.232-.056.116 0 .232 0 .347.056h.174c.116 0 .29.113.348.225l.116.281v.113l.034.19a.627.627 0 01.024.147v.056c0 .074-.023.169-.048.268l-.021.084a1.194 1.194 0 00-.047.267 1.673 1.673 0 00-.464.956c-.116.225-.289.337-.289.562v.056h.058c.115 0 .173-.056.231-.056 0 0 .058-.056.058-.112.058-.057.116-.057.174-.057.058 0 .058 0 .174.057.232.168.347.168.579.168h.29c.116.113.289.113.405.113.116 0 .232 0 .406-.113.058 0 .058 0 .116.057l.347.225c.522.168.927.562 1.101 1.124.116.169.116.394.348.45 0 .056 0 .281.173.45-.058 0-.058.056-.058.056.116.338.058.731.29 1.012v.225c0 .056 0 .113.058.169v.225c.058.169.116.45.463.45.174 0 .348 0 .406.056.174.056.232.394.521.394.406 0 .985.112 1.217.224h.347c.232-.056.406-.056.522-.056.232 0 .521 0 .695-.056l.307.05c.192-.427.349-.847.486-1.246a.435.435 0 01.041-.084c.29-.45.464-.9.753-1.35a.385.385 0 01.116-.115c.037-.024.048-.069.064-.109.028-.067.048-.136.069-.197a1.02 1.02 0 01.012-.031c.187-.423.327-.897.686-1.267l.146-.235c.349-.621.645-1.132 1.043-1.586.196-.445.582-.796.879-1.135.143-.267.295-.465.505-.605l.008-.006c.512-.39 1.026-.936 1.536-1.273.183-.173.367-.296.601-.413.11-.097.219-.16.326-.214a1.527 1.527 0 01.935-.521c.318-.052.584-.101.849-.204l.021-.008c.224-.072.299-.074.523-.074.11 0 .261.02.371-.051a.387.387 0 01.209-.062c.213 0 .426.006.639.075a.331.331 0 01.067.029l1.306.717c.299.12.543.292.844.467.483.269.697.6.905 1.003a.265.265 0 01.018.042c.25.665.315 1.27.315 1.936v.563c0 .569-.171 1.083-.232 1.652l-.005.152c-.013.107-.053.239-.053.332a.387.387 0 01-.003.048c-.116.96-.401 1.865-.692 2.769v.104a.377.377 0 01-.063.217c-.067.111-.096.234-.136.361a2.188 2.188 0 01-.262.584 3.259 3.259 0 00-.242.72.335.335 0 01-.022.07c-.132.322-.273.639-.53.896-.233.295-.469.439-.779.514a.15.15 0 01-.029.006c-.307.05-.614.098-.919.19a.585.585 0 01-.359.096c-.245 0-.486-.016-.73-.174a.402.402 0 01-.06-.047c-.245-.238-.485-.363-.67-.599-.288-.351-.491-.708-.491-1.2v-.164l.387.385-.366-.517c.107-.309.215-.618.27-.971a.731.731 0 01.167-.432.318.318 0 01.026-.026 19.56 19.56 0 01.882-1.81c.213-.618.43-1.186.43-1.807 0-.276.066-.489.136-.637l.106-.462a.347.347 0 01.023-.071c.144-.325.149-.693.188-1.064l-.002-.002a.139.139 0 00-.064-.017c-.062 0-.119.044-.18.074a1.703 1.703 0 00-.494.337c-.533.465-1.076.921-1.343 1.593a.39.39 0 01-.09.136c-.073.071-.089.177-.136.271-.065.131-.15.254-.275.355l-.4.442c-.043.042-.056.107-.056.17a.396.396 0 01-.081.239c-.154.199-.252.449-.354.697a.379.379 0 01-.071.113c-.372.413-.539.926-.84 1.394a1.39 1.39 0 01-.214.512c-.172.326-.45.704-.617 1.083a.242.242 0 01-.018.036c-.284.496-.457.992-.736 1.488l-.688 1.892c-.282.712-.565 1.532-.734 2.353a.369.369 0 01-.05.125v.129c0 .083-.02.148-.051.201-.078.166-.065.371-.065.534 0 .169-.057.282-.057.394a.406.406 0 01-.013.098c-.049.192-.103.384-.103.577 0 .192.054.384.103.577l.007.031c.058.337.113.675.12.914.028.041.101.15.132.21l.003.008a.429.429 0 00.059.007h.695c.274 0 .448-.152.676-.285l.035-.018c.841-.381 1.514-.872 2.237-1.357.528-.453 1.113-.798 1.756-1.195l.898-.708c.506-.436.902-.708 1.296-1.145l.022-.023 2.024-1.908c.051-.05.152-.174.172-.198a.386.386 0 01.08-.21c.196-.253.394-.444.587-.574.31-.284 2.939-2.667 3.526-3.163.065-.055.117-.093.15-.116a3.664 3.664 0 01-.173-1.138c0-.191.006-.44.062-.631.068-.85.334-1.805 1.003-2.48l.381-.633a.283.283 0 01.032-.045.957.957 0 01.238-.289c.696-.623 1.28-1.352 1.978-1.86l.004-.004c.626-.442 1.138-.94 1.651-1.382a.124.124 0 01.022-.018c1.216-.9 2.606-1.63 3.88-2.585a.39.39 0 00-.082.54l.167-.12c-.093-.223-.147-.498.151-.498h.139c.534-.427 1.263-.506 1.825-.506h.463c.343 0 .551.003.79-.037.226-.125.503-.188.717-.188l.036.001c.369.006.631.114.882.234.066.013.167.029.416.349a.48.48 0 01.11.23c.007.035.012.078.016.125.074.02.145.047.209.081a.692.692 0 01.236.208c.113.072.193.153.26.235.048.058.082.118.131.165.051.05.088.113.105.182.045.172.08.326.124.464.038.117.079.22.16.302.062.032.115.08.158.141a.697.697 0 01.092.301.363.363 0 01-.06.222l.002-.002a1.672 1.672 0 01-.409.431c-.09.072-.184.134-.252.221a.383.383 0 01-.305.15c-.267 0-.496.104-.734.198-.325.13-.661.252-1.061.252-.041 0-.081.017-.122.027-.027.006-.054.012-.078.015-.332.239-.734.411-1.131.565-.36.139-.715.263-.978.435a.536.536 0 01-.311.135c-.363.332-.814.546-1.263.761-.389.186-.779.369-1.059.693a.781.781 0 01-.182.225c-.111.098-.284.183-.401.297a.39.39 0 01-.17.096c-.585.155-.895.529-1.32.839l-.027.018c-.885.536-1.543 1.346-2.152 2.151a.374.374 0 01-.165.126.626.626 0 01-.016.058c.249.215.496.547.795.692a.347.347 0 01.046.027c.768.515 1.649.978 2.243 1.55l2.28 1.88.03-.006-.032.004c.234-.046.412-.241.552-.335.589-.4 1.181-.852 1.716-1.091.494-.327.722-.655 1.171-.982a.38.38 0 01.135-.063c.206-.05 1.792-.863 2.364-1.11a.497.497 0 01.312-.137l.02-.001.002.39v-.39c.035 0 .08.008.13.023l.048-.094.067.111.062-.045c-.024-.15.015-.276.216-.276h.055c.307 0 .235.297.135.524l.019-.009c.108-.169.234-.321.234-.121v.015l.252-.087a.396.396 0 01.097-.033l-.097.033a.39.39 0 00-.2.452c.05-.083.103-.157.162-.215l-.092.217c.132-.059.237-.096.302-.105 0 0 .04.076.053.134.062-.247.17-.554.294-.307.019.038.098.239.098.341a.392.392 0 01-.119.281c-.051.05-.08.135-.129.209a1.012 1.012 0 01-.206.235 2.016 2.016 0 01-.264.273c-.285.25-.76.598-1.17.915-.261.202-.558.478-.626.541-.094.401-.366.74-.71.952l-1.337 1.243c-.226.29-.471.555-.92.628h-.012l-.029.031c-.092.09-.617.446-.708.507a.383.383 0 01-.071.068 8.041 8.041 0 00-.171.126c.19.316.32.693.385 1.132a.546.546 0 01.004.057c0 .551-.001 1.157.056 1.763a.395.395 0 01-.043.219l-.05.097c-.156.358-.15.667-.203.924-.003.016-.008.032-.013.048a3.59 3.59 0 01-.714 1.256l-.02.022a4.688 4.688 0 00-.409.466l-.109.137zm-2.778-3.449c-.311.559-.683.959-1.238 1.498a.382.382 0 00-.082.116c-.02.013-.066.046-.096.065-.09.056-.185.118-.272.199-1.008.771-1.471.96-2.43 1.491a.405.405 0 00-.085-.012.361.361 0 00.102-.081l1.113-1.243c1.099-.593 2.096-1.333 2.988-2.033zM69.249 51.98a.76.76 0 00-.027-.143c.259-.371.47-.753.635-1.224a.404.404 0 00.029-.155v-.085l.372-.878.217-.474a.316.316 0 00.044-.129l1.045-1.709.248-.385.111-.081.013.01.17.244s-.121.034-.098.056c.04.038.079.064.115.081l.008.102c.075.437.319.855.612 1.036.143.15.256.331.377.483.125.158.26.292.415.383.198.115.31.35.35.465.033.098.078.211.094.253v.705c-.1.23-.116.525-.116.658v.203c-.048.13-.081.293-.109.452-.018.097-.057.25-.059.257a.39.39 0 00-.063.212c0 .437-.188.871-.264 1.188-.166.238-.26.498-.344.734-.051.145-.075.284-.169.357a.39.39 0 00-.096.11l-.923 1.567-.265.412-.728.761a.454.454 0 00-.039.048c-.306.446-.66.846-.929 1.115-.384.139-.587.405-.881.639-.072.039-.152.03-.234.049a1.104 1.104 0 00-.385.164h-.004c-.105-.198-.285-.506-.339-.821v-.245a.39.39 0 00-.165-.324l-.009-.187c0-.13-.008-.304.037-.435a.393.393 0 00.021-.127v-1.145a.792.792 0 00.174-.486.529.529 0 00-.026-.131c.053-.117.089-.231.12-.337.022-.078.032-.151.065-.204a.367.367 0 00.073-.23v-.088c.046-.431.135-.566.316-.785l-.009.004a.357.357 0 00.098-.259l.001-.284a.357.357 0 00.115-.275v-.11c0-.055.043-.086.068-.128l.114-.243.004-.007a.49.49 0 00.019-.04l-.007.013.117-.281.091-.326zm-32.772 7.355c.039-.407-.034-.838.047-1.331l.003-.018c.029-.252.055-.504.018-.804.007-.231-.065-.423.028-.766a.405.405 0 00.017-.189l-.032-.228c-.01-.062-.035-.14-.014-.213a.381.381 0 00.128-.221.488.488 0 00-.039-.293l.02-.035a.63.63 0 00.051-.245l-.003-.081c-.021-.151.016-.277.039-.391.028-.147.044-.282.026-.412a.794.794 0 00-.088-.214l-.023-.165.087-.528a8.71 8.71 0 00.073-1.222c.137-.703.225-1.347.248-2.038.07-.72.132-1.5.355-2.356l.008-.04c.064-.424.141-.731.153-1.088a.365.365 0 00-.003-.066c-.049-.354-.045-.583.062-.823a1.128 1.128 0 00.06-.407c0-.128-.039-.286.089-.423a.39.39 0 00.102-.32l-.08-.587c.124-.44.229-.882.164-1.355l-.032-.235c.08-.196.183-.369.229-.559a.565.565 0 00.052-.375l-.031-.223c-.002-.015-.009-.041-.006-.071.14-.242.223-.647.303-.955a.373.373 0 00.009-.046l1.092-8.207c.058-.38.112-.76.231-1.095a.404.404 0 00.021-.11c.01-.043.027-.118.032-.182v.039c.111-.843.237-1.579.41-2.373a.387.387 0 00.013-.177l-.001-.009c.237-.63.335-1.194.531-1.824a.351.351 0 00.014-.066c.135-1.044.383-2.05.685-3.064.667-.251 1.614-.661 1.761-.383.147-.131.391-.285.606-.376l.767-.107a.377.377 0 00.141-.049c.124-.072.25-.105.381-.154.184-.068.375-.154.584-.32.03-.019.07-.017.111-.021.069-.007.142-.009.215-.012.157-.006.313-.021.454-.066.598-.06 1.255-.183 1.857-.471.07-.024.142-.056.213-.086.04-.017.077-.037.116-.048.149.041.324.05.452.05h.753c.04 0 .08-.006.118-.019.311-.1.62-.206.983-.206h.173l.002-.004.06-.001c.673-.109 1.291-.107 1.908-.107.04 0 .08-.007.118-.019.124-.04.286-.039.417-.038.536.115 1.073.225 1.724.225.333 0 .719.168 1.106.221.371.052.74.263 1.007.369l.516.222c.115.05.244.04.348-.022.064.01.122.065.188.107.105.067.212.138.317.189.021.01.043.019.065.025.178.049.344.131.509.216l.141.074c.165.085.332.167.509.216.152.042.274.171.41.287.195.167.402.325.641.411.071.087.143.198.216.295.088.116.181.217.27.283.357.358.61.915.869 1.469l.516 1.558.002.004c.104.304.158.608.21.867v1.086l.058.528a7.388 7.388 0 01-.171 1.564c-.055.48-.109.854-.219 1.227a.418.418 0 00-.015.111c0 .074-.048.145-.07.207a.873.873 0 00-.042.176l-.105.408-.029.092c-.009.031-.005.06-.04.083a.382.382 0 00-.157.202.492.492 0 00-.079.238.491.491 0 00.229.419l-.025.129c-.025.133-.047.282-.175.385l-.026.024a.557.557 0 00-.131.2c-.019.05-.026.116-.06.182a.38.38 0 00-.026.063l-.174.563c-.08.257-.23.474-.356.713-.165.312-.299.651-.299 1.089l.003.003-.001.002-.002-.001v.005l-.016.035-.436.635-.02.031c-.414.746-.941 1.38-1.238 2.183-.102.243-.31.434-.462.629-.142.164-.3.304-.43.458a1.453 1.453 0 00-.323.611.38.38 0 00-.044.066l-.359.697c-.38.05-.588.334-.755.739a.49.49 0 01-.181.259c-.284.147-.508.409-.66.744a1.009 1.009 0 00-.223.264l-.233.097.085.432-.053.062-.177-.389-.289.337.184.407a1.775 1.775 0 01-.145.142.392.392 0 01-.09-.473c-.068.132-.214.22-.339.335a1.467 1.467 0 00-.379.513l-.001.001a.572.572 0 00-.324.275l.343.569-.386-.389v.343l-.255.267a.388.388 0 00-.14.124 1.252 1.252 0 01-.103.124c-.061-.011-.11-.011-.159-.011-.192 0-.271.07-.319.116-.051.05-.125.13-.125.33 0 .039.001.078.006.117h-.103a.611.611 0 00-.325.123.548.548 0 00-.207.336l-.047.023a.815.815 0 00-.191.133.37.37 0 00-.074.101c-.047.09-.139.244-.17.296h-.008c-.228 0-.248.162-.203.339a.354.354 0 00-.066.051c-.03.029-.068.074-.105.121a.679.679 0 00-.09-.005.401.401 0 00-.286.115c-.037.035-.095.16-.129.237l-.391.284a.396.396 0 00-.102.11c-.087.142-.225.192-.323.258a.915.915 0 00-.246.232l-.025.042a.487.487 0 01-.162.187.783.783 0 00-.074-.003.444.444 0 00-.354.169.681.681 0 00-.101.177l-.03.079a.141.141 0 00-.056.055l-.008-.029-.275.16.107.418-.033.032-.156-.39-.333.324c-.158.125-.342.212-.519.32a2.058 2.058 0 00-.547.461c-.21.067-.467.153-.671.343-.562.434-1.183.817-1.803 1.2a.441.441 0 00-.049.036c-.511.441-1.135.993-1.703 1.379l-.01.007a3.668 3.668 0 00-.697.672l-.102.098h-.075c-.196 0-.321.051-.4.119a.444.444 0 00-.127.18c-.299.253-.692.42-1.087.56-.495.175-.997.305-1.379.463-.332.137-.581.309-.729.511-.514.105-.953.391-1.437.547-.224.073-.392.268-.543.416-.113.081-.22.098-.327.126l-.073.021z" />
  </g>
</svg>

            </a>
            <div 
              id="contextMenu"
              class="opacity-0 absolute pointer-events-none left-0 z-[60] -translate-y-2.5 bg-white shadow-lg rounded-2xl p-2 ring-1 ring-navy-950/10 shadow-navy-950/[.075] top-full mt-1 transition-all" >
              <a 
                class="group relative flex flex-col whitespace-nowrap px-3 py-2 text-navy-950 hocus:text-violet-950 transition-colors"
                href="/docs/about/brand/" 
                target="_blank"
              >
                <span class="absolute inset-0 scale-90 rounded-lg group-hover:scale-100 group-focus:scale-100 group-hover:bg-violet-100 group-focus:bg-violet-100 transition-all"></span>
                <strong class="relative font-semibold text-sm">
                  Need a Logo?
                </strong>
                <span class="relative flex items-center text-[0.8125rem] font-medium text-navy-700/70 group-hover:text-violet-800/70 group-focus:text-violet-800/70 transition-colors">
                  View Our Brand Assets
                  <svg 
                    viewBox="0 0 16 16" 
                    fill="currentColor" 
                    class="relative size-4 ml-0.5 -mr-1"
                  >
                    <path fill-rule="evenodd" d="M6.22 4.22a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06l-3.25 3.25a.75.75 0 0 1-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                  </svg> 
                </span>
              </a>
            </div>
          </div>
          <script>
            const [logo, contextMenu] = ['logo', 'contextMenu'].map(id => document.getElementById(id))

            logo.addEventListener('contextmenu', e => {
              e.preventDefault()
              contextMenu.classList.remove('-z-1', 'opacity-0', 'pointer-events-none', '-translate-y-2.5')
              contextMenu.classList.add('z-[60]')
            })

            document.addEventListener('click', e => {
              if (!contextMenu.contains(e.target) && e.target !== logo) {
                contextMenu.classList.add('-z-1', 'opacity-0', 'pointer-events-none', '-translate-y-2.5')
                contextMenu.classList.remove('z-[60]')
              }
            })
          </script>

          <div class="hidden lg:block docsearch-wrapper-lg relative -top-px my-5">
            <svg class="text-gray-400 absolute pointer-events-none w-3.5 h-3.5 left-3.5 top-1/2 -translate-y-1/2 z-10" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"></path>
            </svg>
            <div id="docsearch"></div>
          </div>
          <div class="fixed inset-x-0 top-0 z-50 h-14 flex items-center lg:justify-end px-4 transition sm:px-6 lg:left-72 lg:px-8 xl:left-80 backdrop-blur bg-white/50 [[data-menu-state=on]_&]:bg-white shadow-[0_1px_rgba(86,75,128,0.1)] text-navy-950 text-sm tracking-normal">
            
            <button data-menu-toggle class="menu-toggle lg:hidden relative z-50 -scale-x-100 rounded-full flex items-center justify-center w-8 h-8 -mx-2">
              <span class="sr-only">Open main menu</span>
              <svg data-menu-button class="absolute cursor-pointer transition-transform duration-[400ms] select-none [[data-menu-state=on]_&]:rotate-45" viewBox="0 0 100 100" width="30">
                <path class="fill-none transition-all duration-[400ms] delay-400 stroke-current stroke-[5.5] [stroke-linecap:round] [stroke-dasharray:40_121] [[data-menu-state=on]_&]:[stroke-dashoffset:-68px]" d="m 70,33 h -40 c 0,0 -8.5,-0.149796 -8.5,8.5 0,8.649796 8.5,8.5 8.5,8.5 h 20 v -20" />
                <path class="fill-none transition-all duration-[400ms] delay-400 stroke-current stroke-[5.5] [stroke-linecap:round]" d="m 70,50 h -25" />
                <path class="fill-none transition-all duration-[400ms] delay-400 stroke-current stroke-[5.5] [stroke-linecap:round] [stroke-dasharray:40_121] [[data-menu-state=on]_&]:[stroke-dashoffset:-68px]" d="m 30,67 h 40 c 0,0 8.5,0.149796 8.5,-8.5 0,-8.649796 -8.5,-8.5 -8.5,-8.5 h -20 v 20" />
              </svg>
            </button>
            <a aria-label="Fly.io Home" href="/" class="inline-flex lg:hidden ml-6">
              
<svg 
  role="img" 
  class="text-navy-950" 
  fill-rule="evenodd" 
  viewBox="0 0 84 84"
  style="pointer-events: none; width: auto; height: 28px;" 
  aria-labelledby="logo-title-6892 logo-description-6892" 
>
  <title id="logo-title-6892">Fly</title>
  <desc id="logo-description-6892">App performance optimization</desc>
  <g buffered-rendering="static">
    <path 
      d="M57.413 10.134h9.454c8.409 0 15.236 6.827 15.236 15.236v33.243c0 8.409-6.827 15.236-15.236 15.236h-.745c-4.328-.677-6.205-1.975-7.655-3.072l-12.02-9.883a1.692 1.692 0 0 0-2.128 0l-3.905 3.211-10.998-9.043a1.688 1.688 0 0 0-2.127 0L12.01 68.503c-3.075 2.501-5.109 2.039-6.428 1.894C2.175 67.601 0 63.359 0 58.613V25.37c0-8.409 6.827-15.236 15.237-15.236h9.433l-.017.038-.318.927-.099.318-.428 1.899-.059.333-.188 1.902-.025.522-.004.183.018.872.043.511.106.8.135.72.16.663.208.718.54 1.52.178.456.94 1.986.332.61 1.087 1.866.416.673 1.517 2.234.219.296 1.974 2.569.638.791 2.254 2.635.463.507 1.858 1.999.736.762 1.216 1.208-.244.204-.152.137c-.413.385-.805.794-1.172 1.224a10.42 10.42 0 0 0-.504.644 8.319 8.319 0 0 0-.651 1.064 6.234 6.234 0 0 0-.261.591 5.47 5.47 0 0 0-.353 1.606l-.007.475a5.64 5.64 0 0 0 .403 1.953 5.44 5.44 0 0 0 1.086 1.703c.338.36.723.674 1.145.932.359.22.742.401 1.14.539a6.39 6.39 0 0 0 2.692.306h.005a6.072 6.072 0 0 0 2.22-.659c.298-.158.582-.341.848-.549a5.438 5.438 0 0 0 1.71-2.274c.28-.699.417-1.446.405-2.198l-.022-.393a5.535 5.535 0 0 0-.368-1.513 6.284 6.284 0 0 0-.285-.618 8.49 8.49 0 0 0-.67-1.061 11.022 11.022 0 0 0-.354-.453 14.594 14.594 0 0 0-1.308-1.37l-.329-.28.557-.55 2.394-2.5.828-.909 1.287-1.448.837-.979 1.194-1.454.808-1.016 1.187-1.587.599-.821.85-1.271.708-1.083 1.334-2.323.763-1.524.022-.047.584-1.414a.531.531 0 0 0 .02-.056l.629-1.962.066-.286.273-1.562.053-.423.016-.259.019-.978-.005-.182-.05-.876-.062-.68-.31-1.961c-.005-.026-.01-.052-.018-.078l-.398-1.45-.137-.403-.179-.446Zm4.494 41.455a3.662 3.662 0 0 0-3.61 3.61 3.663 3.663 0 0 0 3.61 3.609 3.665 3.665 0 0 0 3.611-3.609 3.663 3.663 0 0 0-3.611-3.61Z" 
      fill="url(#default-radial-6892)" fill-opacity="1"
    />
    <path 
      d="M35.639 72.544l-.637.535a3.332 3.332 0 01-2.09.762H15.235a15.176 15.176 0 01-9.654-3.451c1.319.145 3.353.607 6.428-1.894l15.277-13.44a1.693 1.693 0 012.127 0l10.997 9.042 3.904-3.21c.619-.5 1.51-.5 2.128 0l12.019 9.882c1.45 1.097 3.327 2.394 7.654 3.071H58.12a3.394 3.394 0 01-1.963-.654l-.14-.108-.593-.493a1.247 1.247 0 00-.158-.159c-.672-.563-9.187-7.617-9.187-7.617a1 1 0 00-1.281.002s.021.026-9.038 7.615a1.12 1.12 0 00-.121.117zm26.262-20.96a3.678 3.678 0 00-3.61 3.609 3.68 3.68 0 003.61 3.609 3.68 3.68 0 003.61-3.609 3.678 3.678 0 00-3.61-3.609zM38.566 40.648L37.35 39.44l-.736-.762-1.858-1.999-.463-.507-2.253-2.634-.638-.791-1.974-2.569-.219-.296-1.517-2.234-.416-.673-1.087-1.866-.332-.61-.94-1.985-.178-.456-.539-1.52-.208-.718-.16-.663-.135-.72-.106-.8-.043-.511-.018-.872.004-.183.025-.522.188-1.901.059-.333.428-1.899.098-.318.318-.927.102-.24.506-1.112.351-.662.489-.806.487-.718.347-.456.4-.482.44-.484.377-.378.918-.808.671-.549c.016-.014.033-.026.05-.038l.794-.537.631-.402 1.198-.631c.018-.011.039-.02.058-.029l1.698-.705.157-.059 1.51-.442.638-.143.862-.173.572-.087.877-.109.598-.053 1.187-.063.465-.005.881.018.229.013 1.276.106 1.687.238.195.041 1.668.415.49.146.544.188.663.251.524.222.77.363.485.249.872.512.325.2 1.189.868.341.296.828.754.041.041.703.754.242.273.825 1.096.168.262.655 1.106.197.379.369.825.386.963.137.403.398 1.45a.89.89 0 01.018.078l.31 1.961.062.679.05.876.005.182-.019.978-.016.259-.053.423-.273 1.562-.066.286-.629 1.962a.626.626 0 01-.02.056l-.584 1.414-.022.047-.763 1.523-1.334 2.323-.708 1.083-.849 1.271-.599.821-1.187 1.587-.808 1.016-1.194 1.453-.837.979-1.287 1.448-.828.909-2.394 2.5-.556.55.328.28c.465.428.902.885 1.308 1.37.122.148.24.299.354.453.249.336.473.691.67 1.06.106.2.201.407.285.618.191.484.32.996.368 1.513l.022.393c.012.752-.125 1.5-.405 2.198a5.438 5.438 0 01-1.71 2.274c-.266.208-.55.391-.848.549a6.08 6.08 0 01-2.219.659h-.005a6.403 6.403 0 01-2.692-.306 5.882 5.882 0 01-1.14-.539 5.523 5.523 0 01-1.145-.932 5.458 5.458 0 01-1.086-1.703 5.662 5.662 0 01-.403-1.953l.007-.475a5.47 5.47 0 01.353-1.606c.077-.202.164-.399.261-.591.19-.37.408-.725.651-1.063.159-.221.328-.436.504-.644.367-.43.759-.839 1.172-1.224l.152-.137.244-.204z" 
      fill="currentColor" 
    />
    <path 
      d="M35.002 73.079l9.796-8.267a1 1 0 011.281-.002l9.938 8.269c.604.492 1.36.761 2.139.762h-25.28c.776 0 1.527-.269 2.126-.762zM41.1 43.568l.096.028c.031.015.057.036.085.055l.08.071c.198.182.39.373.575.569.13.139.257.282.379.43.155.187.3.383.432.587.057.09.11.181.16.276.043.082.082.167.116.253.06.15.105.308.119.469l-.003.302a1.726 1.726 0 01-.817 1.343 2.333 2.333 0 01-.994.327l-.373.011-.315-.028a2.398 2.398 0 01-.433-.105 2.07 2.07 0 01-.41-.192l-.246-.18a1.685 1.685 0 01-.56-.96 2.418 2.418 0 01-.029-.19l-.009-.288c.005-.078.017-.155.034-.232.043-.168.105-.331.183-.486.101-.194.216-.381.344-.559.213-.288.444-.562.691-.821.159-.168.322-.331.492-.488l.121-.109c.084-.055.085-.055.181-.083h.101zM40.481 3.42l.039-.003v33.665l-.084-.155a94.101 94.101 0 01-3.093-6.267 67.257 67.257 0 01-2.099-5.255 41.665 41.665 0 01-1.265-4.326c-.265-1.163-.469-2.343-.553-3.535a16.923 16.923 0 01-.029-1.528c.008-.444.026-.887.054-1.33.044-.696.115-1.391.217-2.081.081-.543.181-1.084.304-1.619.098-.425.212-.847.342-1.262.188-.6.413-1.186.675-1.758.096-.206.199-.411.307-.612.65-1.204 1.532-2.313 2.687-3.054a5.609 5.609 0 012.498-.88zm4.365.085l2.265.646c1.049.387 2.059.891 2.987 1.521a11.984 11.984 0 013.212 3.204c.502.748.918 1.555 1.243 2.398.471 1.247.763 2.554.866 3.882.03.348.047.697.054 1.046.008.324.006.649-.02.973-.064.725-.2 1.442-.407 2.14a17.03 17.03 0 01-.587 1.684c-.28.685-.591 1.357-.932 2.013-.754 1.457-1.623 2.852-2.553 4.201a65.451 65.451 0 01-3.683 4.806 91.02 91.02 0 01-4.417 4.896 93.66 93.66 0 002.907-5.949c.5-1.124.971-2.26 1.414-3.407.487-1.26.927-2.537 1.317-3.83.29-.969.546-1.948.757-2.938.181-.849.323-1.707.411-2.57.074-.72.101-1.444.083-2.166a30.867 30.867 0 00-.049-1.325c-.106-1.775-.376-3.545-.894-5.248a15.341 15.341 0 00-.714-1.892c-.663-1.444-1.588-2.793-2.84-3.778l-.42-.307z"
      fill="#fff" 
    />
    <path 
      d="M179.213 64.297l-10.751-23.015c-.898-1.917-1.433-2.618-2.331-3.431l-.874-.788c-.697-.676-1.155-1.302-1.155-2.045 0-1.064.843-1.96 2.378-1.96h9.334c1.465 0 2.378.762 2.378 1.9 0 .635-.292 1.111-.661 1.578-.438.555-1.008 1.096-1.008 2.082 0 .618.18 1.234.527 2.021l6.416 15.025 5.755-14.647c.354-.974.596-1.832.596-2.519 0-1.069-.581-1.505-1.029-1.983-.39-.415-.702-.854-.702-1.557 0-1.149.935-1.9 2.193-1.9h5.748c1.612 0 2.378.834 2.378 1.9 0 .682-.393 1.314-1.166 1.996l-.813.668c-1.132.925-1.656 2.263-2.251 3.647l-8.716 20.998c-1.03 2.455-2.563 5.863-4.905 8.659-2.379 2.84-5.587 5.048-9.932 5.048-3.638 0-5.84-1.737-5.84-4.24 0-2.293 1.696-4.12 3.924-4.12 1.22 0 1.855.576 2.499 1.169.532.489 1.072.991 2.137.991.988 0 1.908-.418 2.742-1.093 1.274-1.03 2.341-2.652 3.129-4.384zm63.175-.082c4.839 0 8.804-1.658 11.897-4.967 3.09-3.304 4.636-7.281 4.636-11.931 0-4.539-1.469-8.268-4.396-11.191-2.926-2.921-6.723-4.388-11.396-4.388-4.92 0-8.944 1.597-12.077 4.78-3.135 3.186-4.703 7.045-4.703 11.578 0 4.493 1.496 8.301 4.483 11.425 2.99 3.126 6.84 4.694 11.556 4.694zm-40.921-.36c2.798 0 4.788-1.884 4.788-4.6 0-2.652-2.055-4.54-4.788-4.54-2.863 0-4.912 1.891-4.912 4.54 0 2.713 2.05 4.6 4.912 4.6zm9.964-4.305l.681-.72c.81-.787 1.071-1.582 1.071-3.774V42.097c0-1.895-.258-2.741-1.062-3.465l-.801-.718c-.785-.693-1.043-1.124-1.043-1.816 0-.984.763-1.791 1.99-2.071l5.44-1.32c.52-.126 1.107-.249 1.562-.249.626 0 1.138.206 1.497.563.36.358.572.873.572 1.517v20.518c0 2.069.251 3.031 1.115 3.758a.359.359 0 01.039.039l.608.708c.764.743 1.081 1.236 1.081 1.914 0 1.209-.912 1.9-2.377 1.9h-9.211c-1.396 0-2.316-.687-2.316-1.9 0-.681.317-1.178 1.154-1.925zm-61.567.001l.681-.721c.811-.787 1.071-1.582 1.071-3.774V27.999c0-1.835-.194-2.736-1.053-3.459l-.822-.796c-.709-.689-.968-1.116-.968-1.805 0-.985.767-1.789 1.927-2.07l5.378-1.32c.521-.126 1.107-.249 1.563-.249.621 0 1.147.187 1.522.542.376.356.608.885.608 1.598v34.616c0 2.074.258 2.981 1.125 3.766l.694.734c.769.748 1.025 1.238 1.025 1.919 0 .502-.153.907-.426 1.216-.385.435-1.03.684-1.89.684h-9.21c-.86 0-1.505-.249-1.891-.684-.272-.309-.425-.714-.425-1.216 0-.682.253-1.176 1.091-1.924zm-25.079-13.934v9.319c0 1.404.278 2.701 1.435 3.768l.748.726c.838.813 1.093 1.3 1.093 2.045 0 1.138-.913 1.9-2.378 1.9h-10.385c-1.465 0-2.377-.762-2.377-1.9 0-.884.259-1.303 1.097-2.049l.745-.724c.868-.786 1.434-1.857 1.434-3.766V30.039c0-1.517-.336-2.758-1.435-3.769l-.749-.726c-.77-.747-1.092-1.238-1.092-1.985 0-1.206.915-1.96 2.377-1.96h27.817c1.063 0 1.997.237 2.594.822.415.407.68.981.71 1.778l.433 6.421c.043.803-.194 1.472-.657 1.885-.319.284-.748.454-1.288.454-.681 0-1.203-.257-1.669-.701-.419-.399-.792-.959-1.213-1.618-1.016-1.624-1.489-2.208-2.572-2.967-1.507-1.112-3.803-1.494-8.145-1.494-2.505 0-4.086.109-5.082.366-.644.166-1.016.382-1.215.699-.204.324-.226.734-.226 1.235v12.618h6.523c1.561 0 2.659-.282 3.931-2.021l.007-.01c.51-.649.879-1.127 1.23-1.444.409-.37.802-.545 1.323-.545a1.9 1.9 0 011.883 1.901v8.699c0 1.165-.908 1.96-1.883 1.96-.485 0-.879-.173-1.289-.535-.353-.31-.723-.775-1.203-1.396-1.392-1.802-2.375-2.089-3.999-2.089h-6.523zm110.214-.22c0-3.121.68-5.364 2.089-6.713 1.392-1.332 2.888-2.006 4.496-2.006 2.212 0 4.205 1.238 6.003 3.672 1.837 2.489 2.746 5.853 2.746 10.086 0 3.124-.682 5.388-2.093 6.776-1.391 1.369-2.886 2.063-4.493 2.063-2.212 0-4.204-1.248-6.002-3.701-1.838-2.51-2.746-5.904-2.746-10.177zm-18.202-16.878c2.804 0 4.788-1.578 4.788-4.3 0-2.658-1.982-4.24-4.788-4.24-2.871 0-4.851 1.583-4.851 4.24 0 2.656 1.981 4.3 4.851 4.3z"
      fill="currentColor" 
    />
  </g>
  <defs>
    <radialGradient id="default-radial-6892" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(43.593 41.714) scale(59.4764)">
      <stop offset="0" stop-color="#ba7bf0" />
      <stop offset=".45" stop-color="#996bec" />
      <stop offset="1" stop-color="#5046e4" />
    </radialGradient>
  </defs>
</svg>
            </a>
            <a aria-label="Docs Home" href="/docs/" class="inline-flex lg:hidden mr-auto">
              
<svg 
  role="img" 
  class="text-violet-600" 
  fill="currentColor"
  fill-rule="evenodd" 
  viewBox="0 0 117 84"
  style="pointer-events: none; width: auto; height: 28px;" 
  aria-labelledby="logo-title" 
>
  <title id="logo-title">Docs</title>
  <g buffered-rendering="static">
    <path d="M34.552 26.566l-.116.071-.013.007c-.39.217-.729.481-1.109.655-.536.608-1.333 1.169-2.13 1.721-.372.357-.745.599-1.24.839a.355.355 0 01-.095.032c-.071.014-.142.026-.206.048-.017.005-.043.018-.054.023a.34.34 0 00-.006.053c0 .156-.091.29-.222.352l-.11.053c-.102.05-.17.04-.17.04a.386.386 0 01-.189-.049.43.43 0 01-.152.087l-.19.147a.804.804 0 01-.308.138c-.107.048-.37.131-.665.244-.255.098-.544.222-.719.393a2.066 2.066 0 01-.884.519c-.216.205-.472.422-.696.53a.536.536 0 01-.426.184.385.385 0 01-.351-.225c-.028-.003-.254-.035-.345-.218a.961.961 0 01-.073.134.464.464 0 01-.505.182 1.366 1.366 0 01-.283.207c-.082.046-.166.085-.244.127-.044.024-.091.042-.116.089a.363.363 0 01-.079.106l-.165.16c-.137.133-.272.113-.272.113a.387.387 0 01-.269-.109.562.562 0 01-.128-.178.432.432 0 01-.327-.076.444.444 0 01-.149-.198.364.364 0 01-.034-.139l-.001-.083c0-.155.099-.291.171-.369l.003-.005c.171-.278.454-.717.579-.9a.863.863 0 01.097-.135.388.388 0 01.347-.217c.066 0 .185.041.239.062l.012.002v-.229l.243.24.002-.002-.245-.246a.85.85 0 01.065-.241c.03-.162.16-.29.327-.314.05-.006.081-.042.113-.077.05-.055.093-.12.137-.185.11-.163.224-.324.36-.434.078-.079.105-.129.133-.153a.42.42 0 01.151-.089l.189-.116a.668.668 0 01.328-.378c.072-.04.21-.096.243-.109.137-.136.232-.274.326-.411l.22-.428a.393.393 0 01.212-.187c.221-.08.363-.288.52-.458.156-.168.319-.316.501-.406.082-.065.187-.128.297-.195.092-.057.205-.107.242-.214a.782.782 0 01.148-.263l.008-.008.184.457c.01-.021.02-.042.027-.065 0-.013.003-.025.008-.037a.356.356 0 01-.046-.165l-.001.003v-.08l.022.021a.258.258 0 00-.015.04l.095.096.005-.05-.085-.086a.371.371 0 01.068-.121c.02-.019.084-.051.11-.064a.677.677 0 00-.045-.002c.023 0 .056-.003.056-.003l-.011.005.007.001c-.056.037-.085.147-.1.27l.114.114c.081-.005.122-.021.143-.047l-.031-.297a.38.38 0 00-.126-.04c.032-.021.072-.019.124.02l-.025-.24a.822.822 0 00.464-.262c.059-.06.114-.113.166-.152.302-.342.544-.467.789-.645.227-.166.505-.331.787-.451.142-.195.265-.307.456-.342l.14-.102.019.056a.16.16 0 01.055-.089.547.547 0 01.222-.185c.071-.035.212-.061.288-.073.15-.192.356-.286.64-.424a.74.74 0 01.539-.374l.229-.111.823-.692a.566.566 0 01.431-.155h.018a.384.384 0 01.058-.047l.927-.619a.349.349 0 01.074-.039c1.514-.588 1.916-.972 2.328-1.346.459-.415.929-.822 2.67-1.415l.832-.231.052.389.051-.014.057-.056a.241.241 0 00.136.052l.133-.332a.469.469 0 00-.091-.055l.054.002c.088 0 .149-.056.214-.101.102-.071.203-.144.314-.198a.383.383 0 01.056-.022l.927-.281a.378.378 0 01.111-.017c.137 0 .272-.05.415-.095.217-.067.443-.13.686-.13h.116c.282 0 .513-.151.701-.242a.307.307 0 01.05-.02c.175-.057.449-.071.693-.074a.638.638 0 01.433-.035.605.605 0 01.498-.247h.116c.116 0 .29-.056.463-.056.148 0 .299.051.448.119.524-.266 1.089-.287 1.659-.342l.71-.005.028-.015c.158-.077.394-.095.631-.095h.462a.37.37 0 01.095.011c.127.022.266.021.404.033.173.015.346.047.507.119.107-.015.236-.05.328-.05l.029.001 1.49.111c.168.002.324.031.448.119.034-.038.09-.062.175-.062l.058-.001c.18 0 .23.103.22.234l.05-.125.119.118a.507.507 0 01.25-.058c.122 0 .24.014.359.097.059.028.109.07.151.124a.555.555 0 01.359-.108c.128 0 .372.041.5.165.031.03.08.073.113.101a.382.382 0 01.256-.098l.364.148.01.008-.009-.007-.001-.001-.029-.023c.186.13.359.161.514.188.161.028.31.053.448.107l.029.013c.048.023.074.017.122.017.074 0 .147.022.209.062.479.31.956.574 1.436.678l.01.002c.132.032.254.098.371.172.042.026.083.053.125.076.017.009.031.022.05.022a.38.38 0 01.194.053c.565.329 1.072.715 1.581.935a.384.384 0 01.053.028l1.507.956a.404.404 0 01.099.09c.145.189.337.38.483.474a.405.405 0 01.092.083c.4.5.745.722 1.088 1.111a.248.248 0 01.029.037c.069.099.113.21.148.32.015.046.043.124.05.143a.396.396 0 01.085.149c.236.142.307.36.307.565v.028c.178.056.315.209.416.404.362.644.603 1.23.785 1.874.413 1.318.707 2.636.825 4.011.06.575.118 1.15.118 1.725 0 1.368-.175 2.793-.523 3.994a1.38 1.38 0 01-.056.341v.267a.361.361 0 01-.101.263l.012-.006a.688.688 0 00-.128.324c-.035.183-.048.386-.076.602a.48.48 0 01-.018.077c-.119.345-.18.747-.298 1.035a.5.5 0 01-.039.072c-.323.469-.372.942-.529 1.36-.127.479-.308.672-.496.974l-.783 1.518c-.081.295-.165.396-.38.541 0 0-.804 1.145-.803 1.141-.302.689-.716 1.162-1.245 1.732a.528.528 0 01-.121.133c-.42.837-1.053 1.571-1.688 2.3-.405.504-.867.897-1.272 1.401a.387.387 0 01-.092.084c-.135.087-.264.268-.354.4a.393.393 0 01-.05.058l-.985.956a.379.379 0 01-.15.091c-.101.032-.253.005-.354.202a.382.382 0 01-.051.075c-.276.322-.699.6-1.004.825-.039.131-.078.282-.116.369a.593.593 0 01-.12.182.347.347 0 01-.076.056c-.02.023-.101.114-.145.151a.518.518 0 01-.454.112 1.953 1.953 0 01-.488.425c-.158.1-.316.172-.446.262a1.94 1.94 0 01-.547.508c-.105.069-.21.112-.266.194-.091.174-.159.222-.207.251a.437.437 0 01-.247.061h-.058c-.088 0-.138.072-.189.128-.087.096-.163.197-.237.269a.385.385 0 01-.286.109c-.15.093-.273.231-.397.33a1.01 1.01 0 01-.479.227c-.228.106-.368.298-.56.438l-.04.026c-.174.096-.331.256-.493.419-.205.207-.412.419-.633.572a.378.378 0 01-.043.026c-.872.451-1.628.903-2.442 1.298-.321.156-.539.312-.799.466-.078.079-.177.184-.292.263a.832.832 0 01-.445.152c-.14.177-.324.273-.522.339-.131.044-.276.054-.385.118-.293.381-.761.594-1.302.611-.057.042-.197.14-.309.188l-.674.382a.385.385 0 01-.165.049h-.106a1.04 1.04 0 01-.203-.029 2.06 2.06 0 01-.395.078c-.129.015-.26.007-.369.065a.816.816 0 01-.094.15.41.41 0 01-.306.13h-.174c-.083 0-.132.073-.199.129-.11.092-.225.19-.361.269a.383.383 0 01-.193.052s-.028.003-.077-.008l-.209-.065a.386.386 0 01-.234-.199c-.302.106-.629.16-.928.16 0 0-.256 0-.255-.001a.941.941 0 01-.444.169c-.163.023-.353-.008-.524.074a.372.372 0 01-.146.038l-.091.001c-.029.003-.047 0-.047 0l-.013-.023a.384.384 0 01-.182-.136.336.336 0 01-.127-.218c-.284.06-.526.08-.775.147l.004.024a.976.976 0 01-.032.298c-.04.163-.118.349-.166.41a.503.503 0 00-.045.075c.014.074.071.17.12.267.108.157.126.246.15.422.023.167.046.416-.091.69a.401.401 0 01-.042.065c-.029.038-.046.071-.039.12.005.04.032.075.045.104a.805.805 0 01.035.096c.099.24.181.423.207.612.043.313-.04.582-.071.841a.726.726 0 01-.123.348.541.541 0 01-.044.05l.127.933a.435.435 0 01-.044.262.753.753 0 01-.074.116c-.012.015-.033.029-.042.052a.384.384 0 01-.224.232l.05.307.001.054c-.001.095-.021.279-.116.401a.383.383 0 01-.251.144s-.043.011-.112-.001a.386.386 0 01-.106-.032.619.619 0 01-.349-.412l-.086-.297-.023-.028c-.006.026-.026.062-.016.132a.385.385 0 01-.726.23.403.403 0 01-.086-.073l-.247-.272a.412.412 0 01-.084-.114l-.076-.151.055.028c.093.205.34.177.34.177l-.34-.177-.018-.049a.513.513 0 01-.331-.318l-.062-.123.395.205-.436-.333a1.673 1.673 0 00-.174-.501c-.102-.213-.208-.418-.269-.629l-.008-.035-.004-.002a.369.369 0 01-.241-.207 1.69 1.69 0 01-.129-.374c-.147-.638-.397-1.209-.59-1.787a.43.43 0 01-.016-.071l-.077-.562a1.706 1.706 0 01-.352-.855c-.054-.39.008-.796-.046-1.186a.991.991 0 010-.231c.004-.037.016-.074.011-.111 0-.002-.002-.004-.004-.006l-.004-.004.004.004.007.005c.081.06.181.085.28.072l-.431-.465.018-.127-.057-.418.436.333-.436-.333c-.005-.035-.003-.056-.021-.086a.382.382 0 01-.075-.186l-.007-.053.435.332-.436-.333a.94.94 0 01.001-.231c.004-.038.016-.075.011-.111a.357.357 0 01-.003-.08c.017-.253.046-.457.026-.605l-.161-1.169a.384.384 0 01.038-.229.509.509 0 00.065-.296.39.39 0 01.029-.211l-.041-.299c-.056-.41.046-.963.058-1.323a.393.393 0 00.127.302.384.384 0 00.227.099l.008-.078-.36-.355.043-.366c-.014-.014-.034-.034-.051-.046a.39.39 0 01-.155-.262 2.06 2.06 0 01-.016-.447.598.598 0 01.023-.101c.041-.473.073-.992.004-1.497a.39.39 0 01.018-.183c.112-.317.123-.457.319-.634l.009-.079a.645.645 0 01.065-.373.452.452 0 01.02-.151 1.224 1.224 0 01-.087-.33.438.438 0 01.032-.264l.004-.008a.612.612 0 01-.047-.07.354.354 0 01-.054-.137l-.026-.185.284.213-.285-.217c-.026-.19-.019-.306.033-.411l.126-1.42c-.025-.31.145-.48.316-.545a.697.697 0 01-.074-.234l-.053-.39.435.333-.434-.448c.155-.979.198-1.943.393-3.033.005-.41.052-.934.114-1.347a.454.454 0 01.012-.053l.255-.866-.033-.241.417.31v-.002l-.422-.384c.012-.361-.029-.769.086-1.143.03-.659.19-1.129.228-1.681.023-.695.225-1.357.315-2.003l.061-.75-.024-.174.401.301-.402-.307a1.866 1.866 0 01-.025-.411.61.61 0 01.059-.206c.061-.187.112-.442.084-.648-.028-.206-.008-.609.089-.853.125-.713.303-1.431.271-2.069a.44.44 0 01.004-.081c.158-.991.33-1.87.511-2.694l.286-1.705zm74.63 34.135a4.793 4.793 0 01-.409.465.279.279 0 01-.032.028c-.564.438-1.185.873-1.692 1.42a.383.383 0 01-.192.112c-.24.059-.389.156-.535.231-.138.072-.274.13-.437.161l-1.897.725c-.892.289-1.605.462-2.379.577l-.055.001-.001.003h-.406a10.514 10.514 0 01-1.082-.114.432.432 0 01-.254-.115.935.935 0 01-.067-.07c-.012-.015-.018-.047-.047-.057a.383.383 0 01-.247-.243c-.08-.232-.247-.343-.472-.489a.717.717 0 01-.364-.235.551.551 0 01-.084-.146c-.026-.033-.064-.053-.092-.084a.776.776 0 01-.105-.14l-.013-.022a.387.387 0 00.336.197l-.061-.156a.388.388 0 01-.209-.346c0-.039.001-.094.009-.159l-.004-.011.007-.007a.9.9 0 01.06-.22l-.001-.001a.433.433 0 01-.013-.106l-.001-.008c-.061-.237-.115-.425-.115-.669 0-.075.025-.268.025-.268s.009.037.018.054c.066.129.199.21.343.21l-.386-.392v-.107l.386.387-.386-.39c0-.199.149-1.059.217-1.191.126-.245.367-.546.617-.751.174-.356.357-.839.587-1.118a.445.445 0 01.048-.049c.439-.372.939-.63 1.214-1.003l-.007.076-.002.006-.009.014v.011l.009-.025.002-.003v-.003l.005-.005.092-.151.055-.022.132-.157c.172-.041.318-.153.457-.278.184-.165.354-.358.524-.523l.017-.016c.294-.253.65-.402 1.018-.545.291-.113.592-.222.851-.423a.39.39 0 00-.09.517c.081-.043.16-.09.236-.143l-.111-.398.324-.21c.273-.219.53-.383.723-.493l-.276-.235c-.62-.492-1.126-.932-1.802-1.315a.301.301 0 01-.042-.027c-.522-.394-1.16-.732-1.74-1.182a7.374 7.374 0 01-1.294-1.254l.002.055-.022.155a.437.437 0 01-.116.188 4.032 4.032 0 01-.199.283 28.02 28.02 0 01-.435.556.384.384 0 01.268.206.393.393 0 01-.035.407s-1.87 2.541-2.244 3.09l-.179.27a.624.624 0 01-.064.076c-.033.04-.051.102-.079.16a1.957 1.957 0 01-.149.274l-.013.017c-.074.096-.148.173-.21.245-.023.027-.056.043-.056.078a.396.396 0 01-.022.128c-.072.211-.193.31-.335.443a2.186 2.186 0 00-.051.14.351.351 0 01-.019.091c-.079.229-.172.451-.329.603-.117.114-.287.25-.345.399a.349.349 0 01-.135.284l.013-.005-.11.107a.414.414 0 01-.069.056c-.206.156-.368.35-.522.465-.421.456-.953.807-1.545 1.153l-1.06.866c-.532.514-1.12.86-1.651 1.261a.322.322 0 01-.064.039c-.064.032-.128.083-.193.118a.725.725 0 01-.256.086c-.368.108-.783.31-1.196.51a2.025 2.025 0 01-.636.263 7.884 7.884 0 01-1.112.181 2.136 2.136 0 01-.598.062c-.209 0-.476-.016-.696-.123a1.093 1.093 0 01-.311-.102l-.328-.001c-.631-.018-1.481-.311-1.974-.606a3.456 3.456 0 01-.212-.127.377.377 0 01-.199-.084l-1.1-.9a.262.262 0 01-.025-.022c-.274-.266-.415-.529-.552-.862a.381.381 0 01-.03-.149c0-.242-.021-.53-.229-.732a.39.39 0 01-.116-.242l-.348-3.543a.387.387 0 01.019-.165c.28-.815.505-1.684.674-2.552a4.23 4.23 0 01.066-.83.335.335 0 01.022-.07c.151-.368.332-.684.466-1.036a1.276 1.276 0 01-.109.004h-1.217c-.232 0-.695.338-1.043.338-.115-.057-.463 0-.579-.113-.116-.056-.405-.056-.405-.056a1.272 1.272 0 00-.464.281v.45l-.058 1.293c0 .45-.232 1.012-.347 1.687-.116.169-.174.394-.464.787v.338c0 .169-.058.225-.174.337l-.116.225c-.115.506-.231.675-.463.9a.15.15 0 01-.018.063l-.022.042a.15.15 0 00-.018.064v.056c0 .112 0 .225-.116.281a11.844 11.844 0 01-.811 1.462l-.463.562c-.058.169-.232.281-.406.45l-.058.113c-.405.168-.753.506-1.042.956-.522.337-1.043.674-1.623.843-.521.112-.637.337-.926.394-.116.056-.29.112-.406.112-.116 0-.174-.056-.232-.056l-.695-.113c-.29 0-.753 0-1.043-.112l-.984-.281c-.116-.056-.232-.056-.348-.169-.174-.225-.464-.281-.464-.394-.289-.224-.579-.674-.811-.955-.347-.282-.695-.675-.869-1.125-.057-.113 0-.338-.115-.562-.232-.507-.29-1.181-.464-1.8l-.058-.281c.116-.112.116-.281.116-.619-.058-.112-.058-.224-.058-.393v-.45c0-.225.058-.562.058-.675v-.337l.058-.45c.058-.281.058-.619.174-.9v-.112l.232-1.35.347-.843c0-.225.116-.281.116-.394.174-.506.29-.9.521-1.349 0-.057 0-.113.174-.282l1.622-3.374c.348-.337.638-.955.985-1.293.174-.056.174-.225.29-.337l.695-1.012c.29-.282.348-.45.637-.788.058-.112.058-.168.058-.281.058-.112.174-.281.348-.281.058 0 .116 0 .173-.112l.174-.282c.116-.112.232-.112.348-.112h.927s.058-.056.116-.056.173.056.289.056c.058.056.116.056.174.056.058-.056.174-.056.232-.056.116 0 .232 0 .347.056h.174c.116 0 .29.113.348.225l.116.281v.113l.034.19a.627.627 0 01.024.147v.056c0 .074-.023.169-.048.268l-.021.084a1.194 1.194 0 00-.047.267 1.673 1.673 0 00-.464.956c-.116.225-.289.337-.289.562v.056h.058c.115 0 .173-.056.231-.056 0 0 .058-.056.058-.112.058-.057.116-.057.174-.057.058 0 .058 0 .174.057.232.168.347.168.579.168h.29c.116.113.289.113.405.113.116 0 .232 0 .406-.113.058 0 .058 0 .116.057l.347.225c.522.168.927.562 1.101 1.124.116.169.116.394.348.45 0 .056 0 .281.173.45-.058 0-.058.056-.058.056.116.338.058.731.29 1.012v.225c0 .056 0 .113.058.169v.225c.058.169.116.45.463.45.174 0 .348 0 .406.056.174.056.232.394.521.394.406 0 .985.112 1.217.224h.347c.232-.056.406-.056.522-.056.232 0 .521 0 .695-.056l.307.05c.192-.427.349-.847.486-1.246a.435.435 0 01.041-.084c.29-.45.464-.9.753-1.35a.385.385 0 01.116-.115c.037-.024.048-.069.064-.109.028-.067.048-.136.069-.197a1.02 1.02 0 01.012-.031c.187-.423.327-.897.686-1.267l.146-.235c.349-.621.645-1.132 1.043-1.586.196-.445.582-.796.879-1.135.143-.267.295-.465.505-.605l.008-.006c.512-.39 1.026-.936 1.536-1.273.183-.173.367-.296.601-.413.11-.097.219-.16.326-.214a1.527 1.527 0 01.935-.521c.318-.052.584-.101.849-.204l.021-.008c.224-.072.299-.074.523-.074.11 0 .261.02.371-.051a.387.387 0 01.209-.062c.213 0 .426.006.639.075a.331.331 0 01.067.029l1.306.717c.299.12.543.292.844.467.483.269.697.6.905 1.003a.265.265 0 01.018.042c.25.665.315 1.27.315 1.936v.563c0 .569-.171 1.083-.232 1.652l-.005.152c-.013.107-.053.239-.053.332a.387.387 0 01-.003.048c-.116.96-.401 1.865-.692 2.769v.104a.377.377 0 01-.063.217c-.067.111-.096.234-.136.361a2.188 2.188 0 01-.262.584 3.259 3.259 0 00-.242.72.335.335 0 01-.022.07c-.132.322-.273.639-.53.896-.233.295-.469.439-.779.514a.15.15 0 01-.029.006c-.307.05-.614.098-.919.19a.585.585 0 01-.359.096c-.245 0-.486-.016-.73-.174a.402.402 0 01-.06-.047c-.245-.238-.485-.363-.67-.599-.288-.351-.491-.708-.491-1.2v-.164l.387.385-.366-.517c.107-.309.215-.618.27-.971a.731.731 0 01.167-.432.318.318 0 01.026-.026 19.56 19.56 0 01.882-1.81c.213-.618.43-1.186.43-1.807 0-.276.066-.489.136-.637l.106-.462a.347.347 0 01.023-.071c.144-.325.149-.693.188-1.064l-.002-.002a.139.139 0 00-.064-.017c-.062 0-.119.044-.18.074a1.703 1.703 0 00-.494.337c-.533.465-1.076.921-1.343 1.593a.39.39 0 01-.09.136c-.073.071-.089.177-.136.271-.065.131-.15.254-.275.355l-.4.442c-.043.042-.056.107-.056.17a.396.396 0 01-.081.239c-.154.199-.252.449-.354.697a.379.379 0 01-.071.113c-.372.413-.539.926-.84 1.394a1.39 1.39 0 01-.214.512c-.172.326-.45.704-.617 1.083a.242.242 0 01-.018.036c-.284.496-.457.992-.736 1.488l-.688 1.892c-.282.712-.565 1.532-.734 2.353a.369.369 0 01-.05.125v.129c0 .083-.02.148-.051.201-.078.166-.065.371-.065.534 0 .169-.057.282-.057.394a.406.406 0 01-.013.098c-.049.192-.103.384-.103.577 0 .192.054.384.103.577l.007.031c.058.337.113.675.12.914.028.041.101.15.132.21l.003.008a.429.429 0 00.059.007h.695c.274 0 .448-.152.676-.285l.035-.018c.841-.381 1.514-.872 2.237-1.357.528-.453 1.113-.798 1.756-1.195l.898-.708c.506-.436.902-.708 1.296-1.145l.022-.023 2.024-1.908c.051-.05.152-.174.172-.198a.386.386 0 01.08-.21c.196-.253.394-.444.587-.574.31-.284 2.939-2.667 3.526-3.163.065-.055.117-.093.15-.116a3.664 3.664 0 01-.173-1.138c0-.191.006-.44.062-.631.068-.85.334-1.805 1.003-2.48l.381-.633a.283.283 0 01.032-.045.957.957 0 01.238-.289c.696-.623 1.28-1.352 1.978-1.86l.004-.004c.626-.442 1.138-.94 1.651-1.382a.124.124 0 01.022-.018c1.216-.9 2.606-1.63 3.88-2.585a.39.39 0 00-.082.54l.167-.12c-.093-.223-.147-.498.151-.498h.139c.534-.427 1.263-.506 1.825-.506h.463c.343 0 .551.003.79-.037.226-.125.503-.188.717-.188l.036.001c.369.006.631.114.882.234.066.013.167.029.416.349a.48.48 0 01.11.23c.007.035.012.078.016.125.074.02.145.047.209.081a.692.692 0 01.236.208c.113.072.193.153.26.235.048.058.082.118.131.165.051.05.088.113.105.182.045.172.08.326.124.464.038.117.079.22.16.302.062.032.115.08.158.141a.697.697 0 01.092.301.363.363 0 01-.06.222l.002-.002a1.672 1.672 0 01-.409.431c-.09.072-.184.134-.252.221a.383.383 0 01-.305.15c-.267 0-.496.104-.734.198-.325.13-.661.252-1.061.252-.041 0-.081.017-.122.027-.027.006-.054.012-.078.015-.332.239-.734.411-1.131.565-.36.139-.715.263-.978.435a.536.536 0 01-.311.135c-.363.332-.814.546-1.263.761-.389.186-.779.369-1.059.693a.781.781 0 01-.182.225c-.111.098-.284.183-.401.297a.39.39 0 01-.17.096c-.585.155-.895.529-1.32.839l-.027.018c-.885.536-1.543 1.346-2.152 2.151a.374.374 0 01-.165.126.626.626 0 01-.016.058c.249.215.496.547.795.692a.347.347 0 01.046.027c.768.515 1.649.978 2.243 1.55l2.28 1.88.03-.006-.032.004c.234-.046.412-.241.552-.335.589-.4 1.181-.852 1.716-1.091.494-.327.722-.655 1.171-.982a.38.38 0 01.135-.063c.206-.05 1.792-.863 2.364-1.11a.497.497 0 01.312-.137l.02-.001.002.39v-.39c.035 0 .08.008.13.023l.048-.094.067.111.062-.045c-.024-.15.015-.276.216-.276h.055c.307 0 .235.297.135.524l.019-.009c.108-.169.234-.321.234-.121v.015l.252-.087a.396.396 0 01.097-.033l-.097.033a.39.39 0 00-.2.452c.05-.083.103-.157.162-.215l-.092.217c.132-.059.237-.096.302-.105 0 0 .04.076.053.134.062-.247.17-.554.294-.307.019.038.098.239.098.341a.392.392 0 01-.119.281c-.051.05-.08.135-.129.209a1.012 1.012 0 01-.206.235 2.016 2.016 0 01-.264.273c-.285.25-.76.598-1.17.915-.261.202-.558.478-.626.541-.094.401-.366.74-.71.952l-1.337 1.243c-.226.29-.471.555-.92.628h-.012l-.029.031c-.092.09-.617.446-.708.507a.383.383 0 01-.071.068 8.041 8.041 0 00-.171.126c.19.316.32.693.385 1.132a.546.546 0 01.004.057c0 .551-.001 1.157.056 1.763a.395.395 0 01-.043.219l-.05.097c-.156.358-.15.667-.203.924-.003.016-.008.032-.013.048a3.59 3.59 0 01-.714 1.256l-.02.022a4.688 4.688 0 00-.409.466l-.109.137zm-2.778-3.449c-.311.559-.683.959-1.238 1.498a.382.382 0 00-.082.116c-.02.013-.066.046-.096.065-.09.056-.185.118-.272.199-1.008.771-1.471.96-2.43 1.491a.405.405 0 00-.085-.012.361.361 0 00.102-.081l1.113-1.243c1.099-.593 2.096-1.333 2.988-2.033zM69.249 51.98a.76.76 0 00-.027-.143c.259-.371.47-.753.635-1.224a.404.404 0 00.029-.155v-.085l.372-.878.217-.474a.316.316 0 00.044-.129l1.045-1.709.248-.385.111-.081.013.01.17.244s-.121.034-.098.056c.04.038.079.064.115.081l.008.102c.075.437.319.855.612 1.036.143.15.256.331.377.483.125.158.26.292.415.383.198.115.31.35.35.465.033.098.078.211.094.253v.705c-.1.23-.116.525-.116.658v.203c-.048.13-.081.293-.109.452-.018.097-.057.25-.059.257a.39.39 0 00-.063.212c0 .437-.188.871-.264 1.188-.166.238-.26.498-.344.734-.051.145-.075.284-.169.357a.39.39 0 00-.096.11l-.923 1.567-.265.412-.728.761a.454.454 0 00-.039.048c-.306.446-.66.846-.929 1.115-.384.139-.587.405-.881.639-.072.039-.152.03-.234.049a1.104 1.104 0 00-.385.164h-.004c-.105-.198-.285-.506-.339-.821v-.245a.39.39 0 00-.165-.324l-.009-.187c0-.13-.008-.304.037-.435a.393.393 0 00.021-.127v-1.145a.792.792 0 00.174-.486.529.529 0 00-.026-.131c.053-.117.089-.231.12-.337.022-.078.032-.151.065-.204a.367.367 0 00.073-.23v-.088c.046-.431.135-.566.316-.785l-.009.004a.357.357 0 00.098-.259l.001-.284a.357.357 0 00.115-.275v-.11c0-.055.043-.086.068-.128l.114-.243.004-.007a.49.49 0 00.019-.04l-.007.013.117-.281.091-.326zm-32.772 7.355c.039-.407-.034-.838.047-1.331l.003-.018c.029-.252.055-.504.018-.804.007-.231-.065-.423.028-.766a.405.405 0 00.017-.189l-.032-.228c-.01-.062-.035-.14-.014-.213a.381.381 0 00.128-.221.488.488 0 00-.039-.293l.02-.035a.63.63 0 00.051-.245l-.003-.081c-.021-.151.016-.277.039-.391.028-.147.044-.282.026-.412a.794.794 0 00-.088-.214l-.023-.165.087-.528a8.71 8.71 0 00.073-1.222c.137-.703.225-1.347.248-2.038.07-.72.132-1.5.355-2.356l.008-.04c.064-.424.141-.731.153-1.088a.365.365 0 00-.003-.066c-.049-.354-.045-.583.062-.823a1.128 1.128 0 00.06-.407c0-.128-.039-.286.089-.423a.39.39 0 00.102-.32l-.08-.587c.124-.44.229-.882.164-1.355l-.032-.235c.08-.196.183-.369.229-.559a.565.565 0 00.052-.375l-.031-.223c-.002-.015-.009-.041-.006-.071.14-.242.223-.647.303-.955a.373.373 0 00.009-.046l1.092-8.207c.058-.38.112-.76.231-1.095a.404.404 0 00.021-.11c.01-.043.027-.118.032-.182v.039c.111-.843.237-1.579.41-2.373a.387.387 0 00.013-.177l-.001-.009c.237-.63.335-1.194.531-1.824a.351.351 0 00.014-.066c.135-1.044.383-2.05.685-3.064.667-.251 1.614-.661 1.761-.383.147-.131.391-.285.606-.376l.767-.107a.377.377 0 00.141-.049c.124-.072.25-.105.381-.154.184-.068.375-.154.584-.32.03-.019.07-.017.111-.021.069-.007.142-.009.215-.012.157-.006.313-.021.454-.066.598-.06 1.255-.183 1.857-.471.07-.024.142-.056.213-.086.04-.017.077-.037.116-.048.149.041.324.05.452.05h.753c.04 0 .08-.006.118-.019.311-.1.62-.206.983-.206h.173l.002-.004.06-.001c.673-.109 1.291-.107 1.908-.107.04 0 .08-.007.118-.019.124-.04.286-.039.417-.038.536.115 1.073.225 1.724.225.333 0 .719.168 1.106.221.371.052.74.263 1.007.369l.516.222c.115.05.244.04.348-.022.064.01.122.065.188.107.105.067.212.138.317.189.021.01.043.019.065.025.178.049.344.131.509.216l.141.074c.165.085.332.167.509.216.152.042.274.171.41.287.195.167.402.325.641.411.071.087.143.198.216.295.088.116.181.217.27.283.357.358.61.915.869 1.469l.516 1.558.002.004c.104.304.158.608.21.867v1.086l.058.528a7.388 7.388 0 01-.171 1.564c-.055.48-.109.854-.219 1.227a.418.418 0 00-.015.111c0 .074-.048.145-.07.207a.873.873 0 00-.042.176l-.105.408-.029.092c-.009.031-.005.06-.04.083a.382.382 0 00-.157.202.492.492 0 00-.079.238.491.491 0 00.229.419l-.025.129c-.025.133-.047.282-.175.385l-.026.024a.557.557 0 00-.131.2c-.019.05-.026.116-.06.182a.38.38 0 00-.026.063l-.174.563c-.08.257-.23.474-.356.713-.165.312-.299.651-.299 1.089l.003.003-.001.002-.002-.001v.005l-.016.035-.436.635-.02.031c-.414.746-.941 1.38-1.238 2.183-.102.243-.31.434-.462.629-.142.164-.3.304-.43.458a1.453 1.453 0 00-.323.611.38.38 0 00-.044.066l-.359.697c-.38.05-.588.334-.755.739a.49.49 0 01-.181.259c-.284.147-.508.409-.66.744a1.009 1.009 0 00-.223.264l-.233.097.085.432-.053.062-.177-.389-.289.337.184.407a1.775 1.775 0 01-.145.142.392.392 0 01-.09-.473c-.068.132-.214.22-.339.335a1.467 1.467 0 00-.379.513l-.001.001a.572.572 0 00-.324.275l.343.569-.386-.389v.343l-.255.267a.388.388 0 00-.14.124 1.252 1.252 0 01-.103.124c-.061-.011-.11-.011-.159-.011-.192 0-.271.07-.319.116-.051.05-.125.13-.125.33 0 .039.001.078.006.117h-.103a.611.611 0 00-.325.123.548.548 0 00-.207.336l-.047.023a.815.815 0 00-.191.133.37.37 0 00-.074.101c-.047.09-.139.244-.17.296h-.008c-.228 0-.248.162-.203.339a.354.354 0 00-.066.051c-.03.029-.068.074-.105.121a.679.679 0 00-.09-.005.401.401 0 00-.286.115c-.037.035-.095.16-.129.237l-.391.284a.396.396 0 00-.102.11c-.087.142-.225.192-.323.258a.915.915 0 00-.246.232l-.025.042a.487.487 0 01-.162.187.783.783 0 00-.074-.003.444.444 0 00-.354.169.681.681 0 00-.101.177l-.03.079a.141.141 0 00-.056.055l-.008-.029-.275.16.107.418-.033.032-.156-.39-.333.324c-.158.125-.342.212-.519.32a2.058 2.058 0 00-.547.461c-.21.067-.467.153-.671.343-.562.434-1.183.817-1.803 1.2a.441.441 0 00-.049.036c-.511.441-1.135.993-1.703 1.379l-.01.007a3.668 3.668 0 00-.697.672l-.102.098h-.075c-.196 0-.321.051-.4.119a.444.444 0 00-.127.18c-.299.253-.692.42-1.087.56-.495.175-.997.305-1.379.463-.332.137-.581.309-.729.511-.514.105-.953.391-1.437.547-.224.073-.392.268-.543.416-.113.081-.22.098-.327.126l-.073.021z" />
  </g>
</svg>

            </a>
            <div class="hidden sm:flex gap-6 border-r bg-clip-padding pr-8 mr-8 font-medium">
              <a 
                href="/pricing/"
                class="hocus:text-violet-600 transition"
              >
                Pricing
              </a>
              <a 
                href="/docs/about/support/"
                class="hocus:text-violet-600 transition"
              >
                Support
              </a>
            </div>
            <a
              href="/app/sign-in/"
              class="mr-2 btn-sm"
              tabindex=""
            >
              Sign In
            </a>
            <a
              href="/app/sign-up/"
              class="btn-sm btn-purple btn-border-dark"
              tabindex=""
            >
              Sign Up
            </a>
          </div>
          
          <div class="lg:hidden opacity-0 z-[-1] [[data-menu-state=on]_&]:opacity-100 [[data-menu-state=on]_&]:z-40 transition-all duration-500 fixed inset-0 top-14 -mt-px bg-gray-500/25 backdrop-blur-sm"></div>
          <nav class="docs-nav [[data-menu-state=on]_&]:translate-x-0 -translate-x-full lg:!translate-x-0 transition duration-300 ease-in-out block text-sm w-full max-w-sm lg:w-auto fixed left-0 top-14 lg:-mx-3 bottom-0 max-h-[calc(100vh-theme('spacing.12'))] lg:max-h-[calc(100vh-theme('spacing.36'))] lg:static z-50 border-t border-t-gray-200 bg-clip-padding lg:border-0 pl-3 pr-6 lg:pl-0 lg:pr-3 pt-2 lg:pt-0 bg-white shadow-[1px_0_rgba(86,75,128,0.1)] lg:shadow-none overflow-y-auto" data-menu>
            <div class="lg:hidden docsearch-wrapper-sm relative ml-3 my-5">
              <svg class="text-gray-400 absolute pointer-events-none w-3.5 h-3.5 left-3.5 top-1/2 -translate-y-1/2 z-10" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"></path>
              </svg>
            </div>
              
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/getting-started/launch"><span class='truncate pointer-events-none'>Getting Started</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Getting Started section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Getting Started">
              <li>
                  <a href="/docs/getting-started/launch/"><span class='truncate pointer-events-none'>Quickstart: Launch your app</span></a>
              </li>
              <li>
                  <a href="/docs/getting-started/launch-demo"><span class='truncate pointer-events-none'>Launch HelloFly Demo App</span></a>
              </li>
              <li>
                  <a href="/docs/deep-dive/"><span class='truncate pointer-events-none'>Deep Dive Demo App</span></a>
              </li>
              <li>
                  <a href="/docs/getting-started/get-started-by-framework/"><span class='truncate pointer-events-none'>Choose a Language or Framework</span></a>
              </li>
              <li>
                  <a href="/docs/getting-started/essentials/"><span class='truncate pointer-events-none'>Fly.io Essentials</span></a>
              </li>
              <li>
                  <a href="/docs/getting-started/troubleshooting/"><span class='truncate pointer-events-none'>Troubleshoot Deployments</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/blueprints/"><span class='truncate pointer-events-none'>Guides (Blueprints)</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Guides (Blueprints) section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Guides (Blueprints)">
              <li>
                  <a href="/docs/blueprints/"><span class='truncate pointer-events-none'>Guides Overview</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/apps/overview"><span class='truncate pointer-events-none'>Apps on Fly.io</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Apps on Fly.io section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Apps on Fly.io">
              <li>
                  <a href="/docs/apps/overview/"><span class='truncate pointer-events-none'>Fly Apps Overview</span></a>
              </li>
              <li>
                  <a href="/docs/launch/"><span class='truncate pointer-events-none'>Fly Launch</span></a>
              </li>
              <li>
                  <a href="/docs/apps/secrets/"><span class='truncate pointer-events-none'>Secrets</span></a>
              </li>
              <li>
                  <a href="/docs/apps/going-to-production/"><span class='truncate pointer-events-none'>Production Checklist</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/languages-and-frameworks/"><span class='truncate pointer-events-none'>Languages & Frameworks</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Languages &amp; Frameworks section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Languages &amp; Frameworks">
              <li>
                  <a href="/docs/elixir/"><span class='truncate pointer-events-none'>Elixir</span></a>
              </li>
              <li>
                  <a href="/docs/rails/getting-started/"><span class='truncate pointer-events-none'>Rails</span></a>
              </li>
              <li>
                  <a href="/docs/laravel/"><span class='truncate pointer-events-none'>Laravel</span></a>
              </li>
              <li>
                  <a href="/docs/django/getting-started/"><span class='truncate pointer-events-none'>Django</span></a>
              </li>
              <li>
                  <a href="/docs/js/"><span class='truncate pointer-events-none'>JavaScript</span></a>
              </li>
              <li>
                  <a href="/docs/rust/"><span class='truncate pointer-events-none'>Rust</span></a>
              </li>
              <li>
                  <a href="/docs/python/"><span class='truncate pointer-events-none'>Python</span></a>
              </li>
              <li>
                  <a href="/docs/languages-and-frameworks/"><span class='truncate pointer-events-none'>More...</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/machines/overview"><span class='truncate pointer-events-none'>Fly Machines</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Fly Machines section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Fly Machines">
              <li>
                  <a href="/docs/machines/overview/"><span class='truncate pointer-events-none'>Introduction to Fly Machines</span></a>
              </li>
              <li>
                  <a href="/docs/machines/api/"><span class='truncate pointer-events-none'>Machines API</span></a>
              </li>
              <li>
                  <a href="/docs/machines/flyctl/fly-machine-run/"><span class='truncate pointer-events-none'>Run a New Machine</span></a>
              </li>
              <li>
                  <a href="/docs/machines/flyctl/fly-machine-update/"><span class='truncate pointer-events-none'>Update a Machine</span></a>
              </li>
              <li>
                  <a href="/docs/machines/guides-examples/machine-sizing/"><span class='truncate pointer-events-none'>Machine Sizing</span></a>
              </li>
              <li>
                  <a href="/docs/machines/guides-examples/machine-restart-policy/"><span class='truncate pointer-events-none'>Machine Restart Policy</span></a>
              </li>
              <li>
                  <a href="/docs/machines/machine-states/"><span class='truncate pointer-events-none'>Machine States</span></a>
              </li>
              <li>
                  <a href="/docs/machines/guides-examples/functions-with-machines/"><span class='truncate pointer-events-none'>Run User Code on Fly Machines</span></a>
              </li>
              <li>
                  <a href="/docs/machines/guides-examples/one-app-per-user-why/"><span class='truncate pointer-events-none'>One App Per Customer - Why?</span></a>
              </li>
              <li>
                  <a href="/docs/machines/runtime-environment/"><span class='truncate pointer-events-none'>The Machine Runtime Environment</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/mpg"><span class='truncate pointer-events-none'>Managed Postgres</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Managed Postgres section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Managed Postgres">
              <li>
                  <a href="/docs/mpg/create-and-connect/"><span class='truncate pointer-events-none'>Create and Connect to a Managed Postgres Cluster</span></a>
              </li>
              <li>
                  <a href="/docs/mpg/configuration/"><span class='truncate pointer-events-none'>Cluster Configuration Options</span></a>
              </li>
              <li>
                  <a href="/docs/mpg/guides-examples/phoenix-guide/"><span class='truncate pointer-events-none'>Phoenix with Managed Postgres</span></a>
              </li>
              <li>
                  <a href="/docs/mpg/metrics/"><span class='truncate pointer-events-none'>Monitoring and Metrics</span></a>
              </li>
              <li>
                  <a href="/docs/mpg/import/"><span class='truncate pointer-events-none'>Import data from another postgres cluster</span></a>
              </li>
              <li>
                  <a href="/docs/mpg/extensions/"><span class='truncate pointer-events-none'>Supported Postgres Extensions</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/gpus/gpu-quickstart"><span class='truncate pointer-events-none'>Fly GPUs</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Fly GPUs section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Fly GPUs">
              <li>
                  <a href="/docs/gpus/gpu-quickstart/"><span class='truncate pointer-events-none'>GPU Quickstart</span></a>
              </li>
              <li>
                  <a href="/docs/gpus/getting-started-gpus/"><span class='truncate pointer-events-none'>Getting Started with GPU Machines</span></a>
              </li>
              <li>
                  <a href="/docs/gpus/python-gpu-example/"><span class='truncate pointer-events-none'>Python GPU Dev Machine</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/database-storage-guides/"><span class='truncate pointer-events-none'>Databases & Storage</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Databases &amp; Storage section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Databases &amp; Storage">
              <li>
                  <a href="/docs/mpg/"><span class='truncate pointer-events-none'>Fly Managed Postgres</span></a>
              </li>
              <li>
                  <a href="/docs/tigris/"><span class='truncate pointer-events-none'>Tigris Object Storage</span></a>
              </li>
              <li>
                  <a href="/docs/upstash/redis/"><span class='truncate pointer-events-none'>Upstash for RedisÂ®</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/volumes/overview"><span class='truncate pointer-events-none'>Fly Volumes</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Fly Volumes section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Fly Volumes">
              <li>
                  <a href="/docs/volumes/overview/"><span class='truncate pointer-events-none'>Fly Volumes Overview</span></a>
              </li>
              <li>
                  <a href="/docs/volumes/volume-manage/"><span class='truncate pointer-events-none'>Create and Manage Volumes</span></a>
              </li>
              <li>
                  <a href="/docs/volumes/snapshots/"><span class='truncate pointer-events-none'>Manage Volume Snapshots</span></a>
              </li>
              <li>
                  <a href="/docs/volumes/volume-states/"><span class='truncate pointer-events-none'>Volume States</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/kubernetes/fks-quickstart"><span class='truncate pointer-events-none'>Fly Kubernetes</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Fly Kubernetes section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Fly Kubernetes">
              <li>
                  <a href="/docs/kubernetes/fks-quickstart/"><span class='truncate pointer-events-none'>Fly Kubernetes Quickstart</span></a>
              </li>
              <li>
                  <a href="/docs/kubernetes/fks-features/"><span class='truncate pointer-events-none'>Fly Kubernetes Features</span></a>
              </li>
              <li>
                  <a href="/docs/kubernetes/clusters/"><span class='truncate pointer-events-none'>Create an FKS Cluster</span></a>
              </li>
              <li>
                  <a href="/docs/kubernetes/connect-clusters/"><span class='truncate pointer-events-none'>Connect to an FKS Cluster</span></a>
              </li>
              <li>
                  <a href="/docs/kubernetes/services/"><span class='truncate pointer-events-none'>Configure FKS Services</span></a>
              </li>
              <li>
                  <a href="/docs/kubernetes/using-gpus/"><span class='truncate pointer-events-none'>Use GPUs with FKS</span></a>
              </li>
              <li>
                  <a href="/docs/kubernetes/using-volumes/"><span class='truncate pointer-events-none'>Use Volumes with FKS</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/networking/"><span class='truncate pointer-events-none'>Networking</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Networking section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Networking">
              <li>
                  <a href="/docs/networking/app-services/"><span class='truncate pointer-events-none'>Connect to an App Service</span></a>
              </li>
              <li>
                  <a href="/docs/networking/services/"><span class='truncate pointer-events-none'>Public Networking</span></a>
              </li>
              <li>
                  <a href="/docs/networking/private-networking/"><span class='truncate pointer-events-none'>Private Networking</span></a>
              </li>
              <li>
                  <a href="/docs/networking/custom-private-networks/"><span class='truncate pointer-events-none'>Custom Private Networks</span></a>
              </li>
              <li>
                  <a href="/docs/networking/flycast/"><span class='truncate pointer-events-none'>Flycast - Private Proxy Services</span></a>
              </li>
              <li>
                  <a href="/docs/networking/egress-ips/"><span class='truncate pointer-events-none'>Egress IP Addresses</span></a>
              </li>
              <li>
                  <a href="/docs/networking/dynamic-request-routing/"><span class='truncate pointer-events-none'>Dynamic Request Routing</span></a>
              </li>
              <li>
                  <a href="/docs/networking/custom-domain/"><span class='truncate pointer-events-none'>Custom Domains</span></a>
              </li>
              <li>
                  <a href="/docs/networking/custom-domain-api/"><span class='truncate pointer-events-none'>Automate Certificates via API</span></a>
              </li>
              <li>
                  <a href="/docs/networking/understanding-cloudflare/"><span class='truncate pointer-events-none'>Understanding Cloudflare</span></a>
              </li>
              <li>
                  <a href="/docs/networking/request-headers/"><span class='truncate pointer-events-none'>Request Headers</span></a>
              </li>
              <li>
                  <a href="/docs/networking/udp-and-tcp/"><span class='truncate pointer-events-none'>Run UDP Services</span></a>
              </li>
              <li>
                  <a href="/docs/networking/tls/"><span class='truncate pointer-events-none'>TLS Support</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/monitoring/"><span class='truncate pointer-events-none'>Monitoring</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Monitoring section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Monitoring">
              <li>
                  <a href="/docs/monitoring/metrics/"><span class='truncate pointer-events-none'>Metrics</span></a>
              </li>
              <li>
                  <a href="/docs/monitoring/sentry/"><span class='truncate pointer-events-none'>Sentry Error Tracking</span></a>
              </li>
              <li>
                <dl class="accordion">
                  <dt class="accordion-header">
                      <a class="title-link" href="/docs/monitoring/logging-overview/"><span class='truncate pointer-events-none'>Logging</span></a>
                    <button class="accordion-trigger" aria-expanded="false">
                      <span class="sr-only">Toggle Logging section</span>
                    </button>
                  </dt>
                  <dd class="accordion-target">
                    <ul class="accordion-content" role="region" aria-label="Logging">
                        <li>
                            <a href="/docs/monitoring/live-tail-logs/"><span class='truncate pointer-events-none'>Live Tail Logs</span></a>
                        </li>
                        <li>
                            <a href="/docs/monitoring/logs-api-options/"><span class='truncate pointer-events-none'>Logs API Options</span></a>
                        </li>
                        <li>
                            <a href="/docs/monitoring/search-logs/"><span class='truncate pointer-events-none'>Search Logs</span></a>
                        </li>
                        <li>
                            <a href="/docs/monitoring/exporting-logs/"><span class='truncate pointer-events-none'>Export Logs</span></a>
                        </li>
                        <li>
                            <a href="/docs/monitoring/error-codes/"><span class='truncate pointer-events-none'>Error Codes</span></a>
                        </li>
                    </ul>
                  </dd>
                </dl>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/security/"><span class='truncate pointer-events-none'>Security</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle Security section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Security">
              <li>
                  <a href="/docs/security/org-roles-permissions/"><span class='truncate pointer-events-none'>Organization Roles and Permissions</span></a>
              </li>
              <li>
                  <a href="/docs/security/sso/"><span class='truncate pointer-events-none'>SSO for Organizations</span></a>
              </li>
              <li>
                  <a href="/docs/security/remove-org-member/"><span class='truncate pointer-events-none'>Remove a Member from an Org</span></a>
              </li>
              <li>
                  <a href="/docs/security/tls-termination/"><span class='truncate pointer-events-none'>TLS Termination</span></a>
              </li>
              <li>
                  <a href="/docs/security/arcjet/"><span class='truncate pointer-events-none'>App Security by Arcjet</span></a>
              </li>
              <li>
                  <a href="/docs/security/tokens/"><span class='truncate pointer-events-none'>Access Tokens</span></a>
              </li>
              <li>
                  <a href="/docs/reference/openid-connect/"><span class='truncate pointer-events-none'>OpenID Connect</span></a>
              </li>
              <li>
                  <a href="/docs/security/shared-responsibility/"><span class='truncate pointer-events-none'>Shared Responsibility Model</span></a>
              </li>
              <li>
                  <a href="/docs/security/security-at-fly-io/"><span class='truncate pointer-events-none'>Security Practices and Compliance</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion open">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/reference/"><span class='truncate pointer-events-none'>Reference</span></a>
          <button class="accordion-trigger" aria-expanded="true">
            <span class="sr-only">Toggle Reference section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="Reference">
              <li>
                  <a href="/docs/flyctl/"><span class='truncate pointer-events-none'>flyctl</span></a>
              </li>
              <li>
                  <a class="active" href="/docs/reference/configuration/"><span class='truncate pointer-events-none'>App Config Reference (fly.toml)</span></a>
              </li>
              <li>
                  <a href="/docs/reference/architecture/"><span class='truncate pointer-events-none'>Architecture</span></a>
              </li>
              <li>
                  <a href="/docs/reference/autoscaling/"><span class='truncate pointer-events-none'>Autoscaling</span></a>
              </li>
              <li>
                  <a href="/docs/reference/aws-to-fly-guide/"><span class='truncate pointer-events-none'>AWS to Fly Overview</span></a>
              </li>
              <li>
                  <a href="/docs/reference/builders/"><span class='truncate pointer-events-none'>Builders</span></a>
              </li>
              <li>
                  <a href="/docs/reference/content-encoding/"><span class='truncate pointer-events-none'>Content Encoding</span></a>
              </li>
              <li>
                  <a href="/docs/reference/fly-launch/"><span class='truncate pointer-events-none'>Fly Launch</span></a>
              </li>
              <li>
                  <a href="/docs/reference/health-checks/"><span class='truncate pointer-events-none'>Health Checks</span></a>
              </li>
              <li>
                  <a href="/docs/reference/load-balancing/"><span class='truncate pointer-events-none'>Load Balancing</span></a>
              </li>
              <li>
                  <a href="/docs/reference/machine-migration/"><span class='truncate pointer-events-none'>Machine Migration</span></a>
              </li>
              <li>
                  <a href="/docs/app-guides/multiple-processes/"><span class='truncate pointer-events-none'>Multiple Processes in Apps</span></a>
              </li>
              <li>
                  <a href="/docs/reference/fly-proxy/"><span class='truncate pointer-events-none'>Fly Proxy</span></a>
              </li>
              <li>
                  <a href="/docs/reference/fly-proxy-autostop-autostart/"><span class='truncate pointer-events-none'>Fly Proxy Autostop/Autostart</span></a>
              </li>
              <li>
                  <a href="/docs/reference/regions/"><span class='truncate pointer-events-none'>Regions</span></a>
              </li>
              <li>
                  <a href="/docs/reference/suspend-resume/"><span class='truncate pointer-events-none'>Suspend/Resume</span></a>
              </li>
        </ul>
      </dd>
    </dl>
    <dl class="accordion">
      <dt class="accordion-header">
          <a class="title-link" href="/docs/about/"><span class='truncate pointer-events-none'>About</span></a>
          <button class="accordion-trigger" aria-expanded="false">
            <span class="sr-only">Toggle About section</span>
          </button>
      </dt>
      <dd class="accordion-target">
        <ul class="accordion-content" role="region" aria-label="About">
              <li>
                  <a href="/docs/about/pricing/"><span class='truncate pointer-events-none'>Pricing</span></a>
              </li>
              <li>
                  <a href="/docs/about/billing/"><span class='truncate pointer-events-none'>Billing</span></a>
              </li>
              <li>
                  <a href="/docs/about/cost-management/"><span class='truncate pointer-events-none'>Cost Management</span></a>
              </li>
              <li>
                  <a href="/docs/about/free-trial/"><span class='truncate pointer-events-none'>Free Trial</span></a>
              </li>
              <li>
                  <a href="/docs/about/support/"><span class='truncate pointer-events-none'>Support</span></a>
              </li>
              <li>
                  <a href="/docs/hiring/"><span class='truncate pointer-events-none'>Engineering Jobs</span></a>
              </li>
              <li>
                  <a href="/docs/about/healthcare/"><span class='truncate pointer-events-none'>Healthcare on Fly.io</span></a>
              </li>
              <li>
                  <a href="/docs/about/extensions/"><span class='truncate pointer-events-none'>Extensions Program</span></a>
              </li>
              <li>
                  <a href="/docs/reference/extensions_api/"><span class='truncate pointer-events-none'>Extensions API</span></a>
              </li>
              <li>
                  <a href="/docs/about/merch/"><span class='truncate pointer-events-none'>Merch</span></a>
              </li>
              <li>
                  <a href="/docs/about/open-source/"><span class='truncate pointer-events-none'>Open Source</span></a>
              </li>
              <li>
                  <a href="/docs/about/brand/"><span class='truncate pointer-events-none'>Using Our Brand</span></a>
              </li>
              <li>
                  <a href="/legal/privacy-policy/"><span class='truncate pointer-events-none'>Privacy Policy</span></a>
              </li>
              <li>
                  <a href="/legal/terms-of-service/"><span class='truncate pointer-events-none'>Terms of Service</span></a>
              </li>
        </ul>
      </dd>
    </dl>


          </nav>
        </div>
      </header>

      <div class="relative pt-14 backdrop-opacity-100">
      
        <div class="absolute -left-px right-0 inset-y-0 max-w-none overflow-hidden mix-blend-multiply pointer-events-none z-10" aria-hidden="true">
          <div class="absolute left-1/2 top-0 ml-[-38rem] h-60 w-[100rem]">
            <div class="absolute inset-0 bg-gradient-to-r from-fuchsia-500 via-25% via-purple-500 to-75% to-violet-500 opacity-40 [mask-image:radial-gradient(farthest-side_at_top,white,transparent)]">
              <svg viewBox="0 0 5400 2800" fill="none" stroke-width="4" class="stroke-black/60 mix-blend-overlay">
                <path d="M5707.82 2999.82h-378.31m0 0l115.01 161.52m-115.01-161.52l-873.86-.01m0 0l76.79 161.53m-76.79-161.53l-873.87-.01m0 0l38.58 161.54m-38.58-161.54h-873.86m0 0l.34 161.54m-.34-161.54l-873.86-.01m0 0l-37.88 161.54m37.88-161.54l-873.853-.02m0 0l-76.115 161.56m76.115-161.56l-873.845-.01m0 0l-114.359 161.57m114.359-161.57h-394.196m6015.654-925.41h-382.47m0 0l382.47 403.14m-382.47-403.14h-654.86m0 0l659.02 925.47m-659.02-925.47l-654.85-.01m0 0l440.01 925.47m-440.01-925.47h-654.85m0 0l220.99 925.46m-220.99-925.46l-654.85-.01m0 0l1.98 925.47m-1.98-925.47h-654.85m0 0l-217.03 925.46m217.03-925.46h-654.85m0 0l-436.033 925.44m436.033-925.44l-654.84-.01m0 0L86.362 2999.77M741.4 2074.32H86.56m-.001 0l-394.393 417.59m394.393-417.59h-394.393m6015.654-554.5l-384.96-.01m0 0l384.96 324.76m-384.96-324.76h-523.63m0 0l526.12 554.54m-526.12-554.54h-523.62m0 0l394.88 554.54m-394.88-554.54h-523.62m0 0l263.65 554.53m-263.65-554.53l-523.62-.01m0 0l132.42 554.54m-132.42-554.54h-523.62m0 0l1.19 554.53m-1.19-554.53h-523.61m0 0l-130.05 554.53m130.05-554.53h-523.63m0 0l-261.27 554.53m261.27-554.53l-523.61-.01m0 0l-392.501 554.53m392.501-554.53H610.289m0 0l-523.73 554.53m523.73-554.53H86.677m0 0l-394.511 334.01m394.511-334.01h-394.511m6015.654-369.36h-386.63m0 0l386.63 271.88m-386.63-271.88h-436.21m0 0l437.88 369.38m-437.88-369.38h-436.2m0 0l350.45 369.38m-350.45-369.38h-436.2m0 0l263.03 369.38m-263.03-369.38l-436.21-.02m0 0l175.62 369.4m-175.62-369.4h-436.21m0 0l88.21 369.39m-88.21-369.39h-436.2m0 0l.79 369.39m-.79-369.39h-436.21m0 0l-86.61 369.39m86.61-369.39h-436.2m0 0l-174.04 369.39m174.04-369.39l-436.19-.01m0 .01l-261.46 369.38m261.46-369.38l-436.203-.01m0 0l-348.868 369.39m348.868-369.39H522.954m0 0L86.677 1519.79m436.277-369.39H86.757m0 0l-394.591 278.32M86.757 1150.4h-394.591M5707.82 886.731h-14m0 0l14 7.389m-14-7.389l-373.81-.001m0 0l387.81 233.81m-387.81-233.81l-373.81-.001m0-.001l374.99 263.702M4946.2 886.728l-373.8-.001m0 0l312.58 263.703M4572.4 886.727l-373.8-.002m0 0l250.18 263.705M4198.6 886.725l-373.8-.001m0 0l187.78 263.706M3824.8 886.724l-373.81-.001m0-.001l125.38 263.688m-125.38-263.688l-373.8-.001m0 0l62.97 263.689m-62.97-263.689l-373.8-.002m0 0l.57 263.691m-.57-263.691l-373.8-.002m0 0l-61.84 263.693m61.84-263.693l-373.79-.001m0 0l-124.25 263.694m124.25-263.694l-373.8-.001m0 0l-186.64 263.695M1582 886.715l-373.8-.002m0-.001L959.157 1150.4M1208.2 886.712l-373.797-.001m0 0L522.954 1150.4m311.449-263.689l-373.796-.001m0 0L86.757 1150.4m373.85-263.69l-373.795-.001m0-.002l-394.646 238.553M86.812 886.707l-373.795-.001m0 0l-20.851 11.026m20.851-11.026h-20.851M5707.82 689.04h-61.68m0 0l61.68 28.93m-61.68-28.93l-327.01-.001m0 0l374.69 197.692m-374.69-197.692l-327.03-.001m0 0l327.91 197.692M4992.1 689.038l-327.02-.001m0 0l281.12 197.691m-281.12-197.691l-327.02-.001m0 0l234.34 197.691m-234.34-197.691l-327.01-.002m0 0l187.55 197.691m-187.55-197.691l-327.03-.001m0 0l140.78 197.691m-140.78-197.691l-327.01-.001m0 0l93.98 197.69m-93.98-197.69l-327.02-.001m0 0l47.2 197.69m-47.2-197.69l-327.02-.001m0 0l.42 197.688m-.42-197.688l-327.02-.002m0 0l-46.36 197.689m46.36-197.689l-327.01-.001m0 0l-93.14 197.689m93.14-197.689l-327.02-.001m0 0L1582 886.715m139.92-197.689l-327.01-.001m0 0L1208.2 886.712m186.71-197.687l-327.02-.001m0 0L834.403 886.711m233.487-197.687l-327.011-.002m0 0L460.607 886.71m280.272-197.688l-327.013-.001m0 0L86.812 886.709m327.054-197.688l-327.011-.001m0 0l-373.838 197.686M86.855 689.02l-327.013-.001m0 0l-67.675 31.806m67.675-31.806h-67.675m6015.653-153.69h-98.74m0 0l98.74 41.688m-98.74-41.688l-290.65-.001m0 0l327.71 153.712m-327.71-153.712l-290.65-.001m0 0l291.35 153.712m-291.35-153.712l-290.64-.001m0 0l254.96 153.712m-254.96-153.712l-290.64-.002m0 .002l218.58 153.711M4446.5 535.326l-290.64-.002m0 0l182.2 153.712m-182.2-153.712l-290.65-.001m0 0l145.84 153.711m-145.84-153.711l-290.65-.001m0 0l109.46 153.711m-109.46-153.711l-290.64-.001m0 0l73.09 153.71m-73.09-153.71l-290.64-.001m0 .001l36.71 153.71m-36.71-153.71l-290.64-.001m0 0l.33 153.71m-.33-153.71l-290.65-.002m0 0l-36.04 153.71m36.04-153.71l-290.64-.001m.01 0l-72.42 153.71m72.42-153.71h-290.64m0 0l-108.8 153.709m108.8-153.709l-290.64-.001m0 0l-145.17 153.709m145.17-153.709h-290.64m0-.001l-181.55 153.709m181.55-153.709l-290.634-.001m0 0L740.879 689.022m217.927-153.708l-290.644-.001m0 0L413.866 689.02m254.296-153.707l-290.638-.002m0 .002L86.855 689.02m290.669-153.707l-290.637-.002m.001 0l-327.046 153.708M86.888 535.311l-290.638-.001m0 0l-104.083 44.022M-203.75 535.31h-104.083M5707.82 412.391h-128.38m0 0l128.38 49.28m-128.38-49.28l-261.56-.001m0 0l291.2 122.939m-291.2-122.939h-261.56m0 0l262.11 122.938M5056.32 412.39l-261.55-.002m0 0l233.01 122.939m-233.01-122.939h-261.54m0 0l203.91 122.939m-203.91-122.939l-261.56-.001m0 0l174.83 122.939m-174.83-122.939l-261.54-.001m0 0l145.73 122.938m-145.73-122.938h-261.56m0 0l116.64 122.937m-116.64-122.937l-261.55-.001m0 0l87.54 122.937m-87.54-122.937h-261.55m0-.001l58.45 122.937m-58.45-122.937l-261.54-.002m0 .002l29.35 122.937m-29.35-122.937h-261.55m0-.002l.26 122.938m-.26-122.938h-261.55m0 0l-28.84 122.936m28.84-122.936l-261.54-.001m0 0l-57.94 122.937m57.94-122.937h-261.56m0-.001l-87.01 122.937m87.01-122.937l-261.54-.001m0 0l-116.11 122.936m116.11-122.936l-261.55-.001m0 .001l-145.2 122.936m145.2-122.936H1133.1m0-.001L958.806 535.314M1133.1 412.378l-261.555-.002m0 0L668.162 535.313m203.383-122.937H610.004m0 0l-232.48 122.937m232.48-122.937l-261.546-.001m0 0L86.888 535.311m261.57-122.936H86.913m.001 0L-203.75 535.31M86.914 412.375l-261.545-.001m0 0l-133.203 51.212m133.203-51.212h-133.203M5707.82 311.826h-152.64m0-.001l152.64 53.71m-152.64-53.71h-237.75m-.01 0l262.02 100.566m-262.02-100.566h-237.75m0-.001l238.21 100.566m-238.21-100.566h-237.75m0 0l214.4 100.566m-214.4-100.566h-237.75m0-.002l190.6 100.566m-190.6-100.566h-237.76m0 0l166.82 100.566m-166.82-100.566l-237.75-.001m0 0l143.01 100.566m-143.01-100.566h-237.75m0 0l119.22 100.566m-119.22-100.566h-237.75m0-.001l95.41 100.566m-95.41-100.566h-237.75m0 0l71.61 100.565m-71.61-100.565h-237.75m0-.001l47.81 100.565m-47.81-100.565h-237.75m0 0l24.02 100.565m-24.02-100.565h-237.74m0-.001l.21 100.564m-.21-100.564l-237.76-.002m0 0l-23.58 100.565m23.58-100.565h-237.75m0 0l-47.37 100.565m47.37-100.565h-237.75m0-.001l-71.18 100.565m71.18-100.565h-237.75m0 0l-94.97 100.564m94.97-100.564h-237.74m0-.001l-118.78 100.564m118.78-100.564h-237.75m0 0L1133.1 412.378m142.57-100.564h-237.75m0-.001L871.545 412.376m166.375-100.563l-237.745-.001m0 .001L610.003 412.376m190.172-100.563H562.428m.001-.001L348.458 412.375m213.971-100.563H324.682m-.001 0L86.913 412.375m237.768-100.563H86.935m0-.002l-261.567 100.563M86.935 311.81l-237.747-.001m.001.001l-157.023 55.336m157.023-55.336h-157.023m6015.654-83.775h-172.84m0 0l172.84 56.145m-172.84-56.145h-217.93m0-.001l238.13 83.791m-238.13-83.791h-217.92m0 0l218.3 83.791m-218.3-83.791H4881.2m0-.002l198.48 83.792m-198.48-83.792h-217.92m0 0l178.64 83.792m-178.64-83.792h-217.93m0 0l158.82 83.792m-158.82-83.792h-217.92m0-.001l138.98 83.791m-138.98-83.791l-217.92-.001m0 0l119.15 83.791m-119.15-83.791H3791.6m-.01 0l99.32 83.791m-99.32-83.791h-217.92m0-.001l79.49 83.791m-79.49-83.791h-217.92m0 0l59.66 83.79m-59.66-83.79h-217.92m0 0l39.83 83.79m-39.83-83.79H2919.9m.01-.001l20.01 83.791m-20.01-83.791h-217.93m0 0l.19 83.791m-.19-83.791h-217.92m0-.002l-19.65 83.79m19.65-83.79h-217.92m0 0l-39.48 83.79m39.48-83.79h-217.92m0 0l-59.31 83.79m59.31-83.79h-217.91m0-.001l-79.15 83.79m79.15-83.79h-217.92m0 0l-98.97 83.79m98.97-83.79h-217.92m0-.001l-118.8 83.79m118.8-83.79h-217.93m0 0l-138.62 83.79m138.62-83.79H958.62m0-.001l-158.445 83.789m158.445-83.789H740.707m-.001 0l-178.278 83.789m178.278-83.789H522.789m0-.001l-198.108 83.79m198.108-83.79H304.87m0 0l-217.935 83.79m217.935-83.79H86.952m.001 0l-237.764 83.788m237.764-83.788h-217.917m-.001-.001l-176.869 57.531m176.869-57.531h-176.869m6015.654-70.876h-189.94m0 0l189.94 57.293m-189.94-57.293h-201.15m0-.002l218.25 70.891m-218.25-70.891h-201.15m0 0l201.47 70.891m-201.47-70.891h-201.15m0 0l184.7 70.891m-184.7-70.891h-201.15m0-.001l167.92 70.89m-167.92-70.89h-201.13m0 0l151.13 70.89m-151.13-70.89H4311m0 0l134.35 70.89M4311 157.142h-201.15m0-.001l117.58 70.89m-117.58-70.89H3908.7m0 0l100.81 70.89m-100.81-70.89h-201.14m0 0l84.03 70.889m-84.03-70.889l-201.15-.001m0 0l67.26 70.89m-67.26-70.89h-201.15m0 0l50.49 70.89m-50.49-70.89h-201.13m0-.001l33.7 70.89m-33.7-70.89h-201.15m0 0l16.93 70.889m-16.93-70.889h-201.15m0-.002l.15 70.889m-.15-70.889h-201.14m0 0l-16.63 70.889m16.63-70.889h-201.15m0 0l-33.4 70.889m33.4-70.889H2098.4m0-.001l-50.18 70.889m50.18-70.889h-201.15m0 0l-66.94 70.889m66.94-70.889h-201.13m0 0l-83.73 70.889m83.73-70.889h-201.15m0-.001l-100.5 70.889m100.5-70.889h-201.14m0 0l-117.29 70.889m117.29-70.889h-201.15m0 0l-134.06 70.889M1092.68 157.135H891.542m0-.001l-150.836 70.889m150.836-70.889H690.394m0 0l-167.605 70.889m167.605-70.889H489.252m0-.001L304.87 228.022m184.382-70.889H288.11m0 0L86.953 228.022m201.157-70.889H86.969m0-.002l-217.933 70.89m217.933-70.89h-201.143m0 0l-193.659 58.491m193.659-58.491h-193.659M5707.82 96.388H5690m0 0l17.82 4.705M5690 96.388h-186.77m0 0l204.59 57.601m-204.59-57.601h-186.77m0 0l201.42 60.757m-201.42-60.757h-186.78m0 0l187.05 60.757m-187.05-60.757h-186.76m0-.001l172.66 60.756m-172.66-60.756h-186.78m0 0l158.29 60.756m-158.29-60.756h-186.76m0 0l143.9 60.756m-143.9-60.756h-186.77m0-.001l129.54 60.756m-129.54-60.756h-186.77m0 0L4311 157.142m-115.16-60.756h-186.76m0 0l100.77 60.756m-100.77-60.756H3822.3m0-.001l86.4 60.755m-86.4-60.755h-186.76m0 0l72.02 60.756m-72.02-60.756h-186.77m0 0l57.64 60.755m-57.64-60.755H3262m0-.001l43.26 60.755M3262 96.384h-186.76m0 0l28.89 60.755m-28.89-60.755h-186.77m0 0l14.51 60.755m-14.51-60.755H2701.7m0-.002l.13 60.755m-.13-60.755h-186.77m0 0l-14.24 60.755m14.24-60.755h-186.76m0-.001l-28.63 60.755m28.63-60.755H2141.4m0 0l-43 60.755m43-60.755h-186.77m0 0l-57.38 60.755m57.38-60.755h-186.76m0 0l-71.75 60.755m71.75-60.755H1581.1m0-.001l-86.13 60.755m86.13-60.755h-186.76m0 0l-100.51 60.755m100.51-60.755h-186.77m0 0l-114.89 60.755m114.89-60.755h-186.76m0-.001l-129.268 60.755m129.268-60.755H834.04m0 0l-143.645 60.755M834.04 96.379H647.275m-.001 0l-158.022 60.755m158.022-60.755H460.51m0 0l-172.4 60.754m172.4-60.754H273.745m0-.001L86.968 157.131m186.777-60.753H86.981m0 0l-201.156 60.753M86.981 96.378H-99.784m.001 0l-208.05 58.644m208.05-58.644h-186.764m-.001-.002l-21.286 5.625m21.286-5.625h-21.286M5707.82 43.74h-42.98m0 0l42.98 10.677m-42.98-10.677h-174.31m0 0L5690 96.39m-199.47-52.65h-174.31m0-.001l187 52.649m-187-52.649h-174.31m0 0l174.55 52.649m-174.55-52.649H4967.6m0 0l162.08 52.649M4967.6 43.739h-174.31m0 0l149.63 52.649m-149.63-52.649h-174.31m0-.002l137.17 52.65m-137.17-52.65h-174.31m0 0l124.71 52.65m-124.71-52.65l-174.31-.001m0 0l112.25 52.65m-112.25-52.65h-174.31m0 0l99.79 52.65m-99.79-52.65h-174.3m0 0l87.33 52.65m-87.33-52.65h-174.32m0 0l74.87 52.65m-74.87-52.65h-174.3m0-.001l62.41 52.65m-62.41-52.65h-174.31m0 0l49.95 52.65m-49.95-52.65h-174.31m0 0l37.49 52.65m-37.49-52.65h-174.3m0-.001l25.03 52.65m-25.03-52.65h-174.32m.01 0l12.57 52.65m-12.57-52.65h-174.31m0 0l.11 52.65m-.11-52.65h-174.31m0 0l-12.35 52.648m12.35-52.648h-174.31m0-.001l-24.8 52.648m24.8-52.648h-174.31m0 0l-37.26 52.648m37.26-52.648h-174.3m0 0l-49.73 52.648m49.73-52.648h-174.3m0 0l-62.19 52.648m62.19-52.648h-174.32m0-.002L1581.1 96.38m74.64-52.649h-174.31m0 0l-87.09 52.649m87.09-52.649h-174.3m0 0l-99.56 52.649m99.56-52.649h-174.3m0 0L1020.81 96.38m112.02-52.649H958.522m0-.001L834.039 96.379M958.522 43.73H784.213m.001 0L647.275 96.379M784.214 43.73H609.909m0-.001L460.51 96.378m149.399-52.649H435.604m-.001 0L273.745 96.378m161.858-52.649H261.296m.001 0L86.981 96.378m174.316-52.649H86.993m0 0L-99.783 96.378M86.993 43.729H-87.313m-.001-.001l-199.234 52.648m199.234-52.648h-174.305m0 0l-46.215 11.493m46.215-11.493h-46.215M5707.82-2.324h-64.99m0-.001l64.99 15.248m-64.99-15.248h-163.41m0 0l185.42 46.065M5479.42-2.325h-163.41m0 0l174.52 46.065M5316.01-2.325H5152.6m0 0l163.62 46.064M5152.6-2.325h-163.41m0-.001l152.72 46.065M4989.19-2.326h-163.41m0 0l141.82 46.063M4825.78-2.326h-163.41m0 0l130.92 46.065M4662.37-2.326h-163.39m0 0l120 46.063m-120-46.063h-163.41m0-.002l109.1 46.065m-109.1-46.065h-163.41m0 0l98.2 46.064m-98.2-46.064h-163.41m0 0l87.3 46.064m-87.3-46.064h-163.41m0-.001l76.41 46.064m-76.41-46.064h-163.41m0 0l65.5 46.064m-65.5-46.064h-163.41m0 0l54.61 46.064m-54.61-46.064h-163.41m0 0l43.71 46.064m-43.71-46.064H3191.7m0 0l32.81 46.064M3191.7-2.329h-163.39m0-.001l21.9 46.064m-21.9-46.064H2864.9m0 0l10.99 46.064M2864.9-2.33h-163.41m0 0l.1 46.064m-.1-46.064h-163.41m0 0l-10.8 46.064m10.8-46.064h-163.4m0-.001l-21.7 46.064m21.7-46.064h-163.41m0 0l-32.61 46.064m32.61-46.064h-163.41m0 0l-43.5 46.064m43.5-46.064h-163.41m0 0l-54.39 46.064m54.39-46.064h-163.39M1721.06-2.332l-65.31 46.063m65.31-46.063h-163.41m0 0l-76.22 46.063m76.22-46.063h-163.41m0 0l-87.11 46.063m87.11-46.063h-163.41m0 0l-98 46.063m98-46.063h-163.4m0-.002L958.522 43.73M1067.43-2.334H904.023m0 0l-119.81 46.063m119.81-46.063H740.62m0 0L609.909 43.729M740.62-2.334H577.215m.001 0L435.604 43.729M577.216-2.334H413.812m-.001-.001L261.297 43.728M413.811-2.335H250.406m0 0L86.993 43.728M250.406-2.335H87.003m0 0L-87.313 43.728M87.003-2.335H-76.402m-.001-.001l-185.216 46.063M-76.403-2.336h-163.404m.001 0l-68.028 15.978m68.028-15.978h-68.028m6015.654-40.63h-84.41m0-.001l84.41 18.763m-84.41-18.763h-153.79m0 0l173.21 40.642m-173.21-40.642h-153.79m0 0l163.59 40.642m-163.59-40.642h-153.79m0 0l153.97 40.642m-153.97-40.642h-153.79m0 0L5152.6-2.325m-144.35-40.642h-153.8m0-.001l134.74 40.642m-134.74-40.642h-153.78m0 0l125.11 40.642m-125.11-40.642h-153.79m0 0l115.49 40.642m-115.49-40.642h-153.79m0 0l105.88 40.642m-105.88-40.642H4239.3m0-.001l96.27 40.641m-96.27-40.641h-153.79m0 0l86.65 40.641m-86.65-40.641h-153.79m0 0l77.03 40.641m-77.03-40.641h-153.79m0 0l67.41 40.641m-67.41-40.641h-153.79m0-.002l57.79 40.642m-57.79-40.642h-153.79m0 0l48.17 40.642m-48.17-40.642h-153.79m0 0l38.55 40.642m-38.55-40.642h-153.79m0 0l28.93 40.642m-28.93-40.642h-153.79m0 0l19.33 40.642m-19.33-40.642h-153.79m0 0l9.71 40.642m-9.71-40.642H2701.4m0-.001l.09 40.642m-.09-40.642h-153.78m0 0l-9.54 40.642m9.54-40.642h-153.79m0 0L2374.68-2.33m19.15-40.642h-153.79m0 0L2211.27-2.33m28.77-40.642h-153.79m0 0l-38.39 40.641m38.39-40.641h-153.78m-.01-.001l-48.01 40.642m48.01-40.642h-153.79m0 0l-57.61 40.642m57.61-40.642h-153.79m0 0l-67.23 40.642m67.23-40.642H1471.1m0-.001l-76.86 40.642m76.86-40.642h-153.8m0 0l-86.47 40.642m86.47-40.642h-153.78m0 0l-96.09 40.642m96.09-40.642h-153.78m0 0L904.023-2.332m105.717-40.642H855.946m0-.001L740.62-2.334m115.326-40.641H702.158m0 0L577.215-2.334m124.943-40.641H548.371m0 0l-134.56 40.64m134.56-40.64H394.584m0 0L250.406-2.334m144.178-40.641H240.797m0 0L87.003-2.335m153.794-40.64H87.011m-.001-.002L-76.403-2.336M87.01-42.977H-66.776m0 0L-239.807-2.336m173.031-40.641h-153.787m0 0l-87.271 19.419m87.271-19.419h-87.271M5707.82-79.09h-101.67m0 0l101.67 21.471M5606.15-79.09h-145.24m0 0l162.5 36.123m-162.5-36.123h-145.24m0 0l153.95 36.123M5315.67-79.09h-145.24m0-.001l145.4 36.123m-145.4-36.123h-145.25m0 0l136.86 36.123m-136.86-36.123h-145.24m0 0l128.31 36.124m-128.31-36.124H4734.7m0 0l119.75 36.123M4734.7-79.091h-145.25m0 0l111.22 36.123m-111.22-36.123h-145.24m0-.001l102.67 36.123m-102.67-36.123h-145.23m0 0l94.11 36.123m-94.11-36.123h-145.24m0 0l85.56 36.123m-85.56-36.123H4008.5m0 0l77.01 36.123m-77.01-36.123h-145.25m0 0l68.47 36.123m-68.47-36.123h-145.24m0-.002l59.92 36.123m-59.92-36.123h-145.24m0 0l51.37 36.123m-51.37-36.123h-145.24m0 0l42.82 36.123m-42.82-36.123h-145.24m0 0l34.27 36.125m-34.27-36.125h-145.24m0 0l25.72 36.123m-25.72-36.123H2991.8m0 0l17.18 36.123m-17.18-36.123h-145.24m0-.001l8.63 36.123m-8.63-36.123h-145.24m0 0l.08 36.123m-.08-36.123h-145.23m0 0l-8.47 36.123m8.47-36.123h-145.24m0 0l-17.02 36.123m17.02-36.123h-145.24m0 0l-25.57 36.123m25.57-36.123h-145.24m0-.001l-34.12 36.123m34.12-36.123h-145.24m0 0l-42.66 36.123m42.66-36.123h-145.24m0 0l-51.22 36.123m51.22-36.123h-145.24m0 0l-59.77 36.123m59.77-36.123h-145.24m0 0l-68.31 36.123m68.31-36.123h-145.25m.01-.001l-76.87 36.123m76.87-36.123h-145.25m0 0l-85.4 36.123m85.4-36.123h-145.24m0 0l-93.94 36.123m93.94-36.123H958.445m0 0L855.946-42.974m102.499-36.123H813.211m0 0L702.158-42.974m111.053-36.123H667.972m0-.001l-119.6 36.123m119.6-36.123H522.734m0 0l-128.15 36.123m128.15-36.123H377.495m0 0L240.797-42.975m136.698-36.123H232.256m0 0L87.01-42.975m145.246-36.123H87.018m0 0L-66.776-42.975M87.018-79.098H-58.221m.001 0l-162.343 36.121M-58.22-79.098h-145.238m0-.002l-104.376 22.063M-203.458-79.1h-104.376m6015.654-32.309h-117.11m0 0l117.11 23.554m-117.11-23.554h-137.59m0 0l153.03 32.319m-153.03-32.319h-137.6m.01 0l145.38 32.319m-145.38-32.319h-137.6m0-.002l137.74 32.32m-137.74-32.32h-137.6m0 0l130.1 32.32m-130.1-32.32h-137.59m0 0l122.44 32.32" />
              </svg>
            </div>
          </div>
        </div>

        <main role="main" data-menu-container class="flex-auto">
          
          <div id="main-content-start" tabindex="-1" class="justify-start flex gap-10 h-full pb-10 pt-20 outline-none relative">
            
              <div id="raw-markdown-content" style="display: none;">---
title: App configuration (fly.toml)
layout: docs
nav: firecracker
---

You can configure an app for deployment on Fly.io using a `fly.toml` file. Configuration of builds, environment variables, internet-exposed services, disk mounts, and release commands go here. `fly.toml` configuration applies for apps managed by [Fly Launch commands](/docs/launch/).

## App configuration files

Most of the time you&#39;ll use the `fly.toml` file that you get automatically when you run `fly launch` to create an app. There are also ways to re-use config files and to generate them in different formats.

### Ways to get a config file

 - Run [`flyctl launch`](/docs/flyctl/launch/) in your project source directory to create a new app and `fly.toml` file automatically.
 - Run [`flyctl config save -a &lt;existing-app-name&gt;`](/docs/flyctl/config-save/) to download a `fly.toml` file from an existing app.
 - Create one by hand with help from this reference, or copy and modify an example file.

### Config file formats

The default configuration file generated by Fly Launch is called `fly.toml`.

TOML is a simple [configuration file format](https://github.com/toml-lang/toml+external). If you&#39;re a VSCode user, then you can install the [Even Better TOML](https://marketplace.visualstudio.com/items?itemName=tamasfe.even-better-toml+external) extension for automatic `fly.toml` validation and hints drawn from this documentation.

If you want your config file in JSON or YAML format, use the `--json` and `--yaml` options in flyctl commands:

- Add the `--yaml` or `--json` options to `fly launch`.
- For existing apps, run `fly config save -a &lt;existing-app-name` and specify `--yaml` or `--json`. Remove your `fly.toml` file when done as it takes precedence.
- Run `fly config show --local` to preview different formats in your terminal. `fly config show` defaults to JSON, but you can also specify `--toml` or `--yaml` options.

## The `app` name

The first key/value in any `fly.toml` file is the application name. This will also be used to create the host name that the application will use by default. For example:

```toml
app = &quot;restless-fire-6276&quot;
```

Whenever `flyctl` is run, it will look for a `fly.toml` file in the current directory and use the application name in that file. This behavior can be overridden by using the `-a` flag to set the application name, or on some commands (such as `deploy`) by using a `-c` flag to point to a different `fly.toml` file.

## Primary region

`fly deploy` uses the `primary_region` option to determine where to create new Machines, as well as to set the `PRIMARY_REGION` environment variable within the Machines it deploys. Replace `ord` with the three-letter code for your [Fly Region](/docs/reference/regions/) of choice.

```toml
primary_region = &quot;ord&quot;
```

## Runtime options

The following options are available to control the lifecycle of a running application. These are optional and can be placed at the top level of the `fly.toml` file:

### `kill_signal` option

When shutting down a Fly Machine, Fly.io sends a `SIGINT` signal to the running process by default. Typically this triggers a hard shutdown option on most applications. The `kill_signal` option lets you override that with a different signal so that you can trigger a softer, less disruptive shutdown: `SIGTERM`, `SIGQUIT`, `SIGUSR1`, `SIGUSR2`, `SIGKILL`, or `SIGSTOP`. 

For example, to set the kill signal to SIGTERM, you would add:

```toml
kill_signal = &quot;SIGTERM&quot;
```

### `kill_timeout` option

&lt;section class=&quot;warning&quot;&gt;Note: `kill_timeout` settings should be considered best-effort, and your app needs to be prepared to handle shorter stopping times&lt;/section&gt;

This sets how long Fly.io waits (in seconds) after sending the `kill_signal` before moving on to a forced shutdown. Set `kill_timeout` to a value that gives your app enough time to exit gracefully. The default is 5 seconds. You can set it up to a maximum of 300 seconds (5 minutes).

For example, to set the timeout to two minutes:

```toml
kill_timeout = 120
```

### How the shutdown sequence works

These options come into play during controlled shutdowns such as:

* When using `fly deploy`
* When using `fly machine stop`
* When a machine stops due to `auto_stop_machines`

The sequence looks like this:

1. Fly sends the `kill_signal` to the main process (defined by your Dockerfileâs `ENTRYPOINT` or `CMD`, or overridden via `--entrypoint`).

1. It waits for up to `kill_timeout` seconds.

1. Then it sends `SIGTERM` unconditionally.

This gives your app a chance to shut down cleanly: finish requests, close connections, stop taking new work. It&#39;s designed for apps that can wrap up in under five minutes.

Many workers will re-queue unfinished jobs so another machine can pick them up. If your app doesn&#39;t support that, or needs longer to shut down, you&#39;ll want to plan around that.

You can watch shutdown behavior by watching `fly logs` during a deploy or idle stop.

## Console command

The command to run when you run the [`fly console` command](/docs/flyctl/console/). Configure the `console_command` field with the command that opens your framework&#39;s console, and then `fly console` will run that command automatically in a new, dedicated Machine. The new Machine is configured with the image and environment from your appâs latest release, but your app isnât started, and no traffic will be routed to it. The Machine gets destroyed when you exit the console.

Here&#39;s an example of a console command for Django:

```toml
console_command = &quot;/code/manage.py shell&quot;
```

## `swap_size_mb` option

Setting this option enables Linux swap on Machines. A swap partition is created with size `swap_size_mb`, expressed in megabytes.

Swapping to disk can help avoid out-of-memory crashes on brief spikes in memory use. Swap is much slower than RAM, so if performance is important, a better solution is to increase the Machine memory with [`fly scale memory`](/docs/flyctl/scale-memory/).

```toml
swap_size_mb = 512
```

## The `build` section

The optional build section contains key/values concerned with how the application should be built. You can read more about builders in [Builders and Fly](/docs/reference/builders/)

### builder

```toml
[build]
  builder = &quot;paketobuildpacks/builder:base&quot;
  buildpacks = [&quot;gcr.io/paketo-buildpacks/nodejs&quot;]
```

The builder &quot;builder&quot; uses CNB Buildpacks and Builders to create the application image. These are third party toolkits which can use Heroku compatible build processes or other tools. The tooling is all managed by the buildpacks and buildpacks are assembled into CNB Builders - images complete with the buildpacks and OS to run the tool chains.

In our example above, the builder is being set to use [Paketo&#39;s all-purpose builder](https://paketo.io) with the NodeJS buildpack.

### Specify a Docker image

```toml
[build]
  image = &quot;flyio/hellofly:latest&quot;
```

The image builder is used when you want to immediately deploy an existing public image. When deployed, there will be no build process; the image will be prepared and uploaded to Fly.io infrastructure as is. This option is useful if you already have a working Docker image you want to deploy on Fly.io or you want a well known Docker image from a repository to be run.

### Specify a Dockerfile

```toml
[build]
  dockerfile = &quot;Dockerfile.test&quot;
```

`dockerfile` accepts a relative path to a Dockerfile, or a URL. By default, `flyctl` looks for `Dockerfile` in the application root.

&lt;div class=&quot;note icon&quot;&gt;
**Gotchas:**
- This option will not change the Docker context path, which is set to the project root directory by default. If you want the `Dockerfile` to use its containing directory as the context root, use `fly deploy &lt;directory&gt;`.
- When specifying a local Dockerfile, make sure it&#39;s not excluded from the Docker build context in your `.dockerignore`.
&lt;/div&gt;

### Specify a Docker ignore file

```toml
[build]
  ignorefile = &quot;/path/.dockerignore&quot;
```

`ignorefile` accepts a relative path to a `.dockerignore` file. By default, `flyctl` looks for the `.dockerignore` file in the working directory.

### Specify a multistage Docker build target

```toml
[build]
  build-target = &quot;test&quot;
```

If your Dockerfile has [multiple stages](https://docs.docker.com/develop/develop-images/multistage-build/), you can specify one as the target for deployment. The target stage must have a `CMD` or `ENTRYPOINT` set.

### Specify Docker build arguments

You can pass [build-time arguments](https://docs.docker.com/engine/reference/commandline/build/#set-build-time-variables---build-arg) to both Dockerfile and Buildpack builds using the `[build.args]` sub-section:

```toml
[build.args]
  USER=&quot;plugh&quot;
  MODE=&quot;production&quot;
```

You can also pass build arguments to `flyctl deploy` using `--build-arg`. Command line args take priority over args with the same name in `fly.toml`.

Note that build arguments are *not available* in the runtime container. If you need build information at runtime - like a Git revision - store it in a file at build time, like:

```
RUN echo $GIT_REVISION &gt; REVISION
```

Likewise, application environment variables and secrets are not available to builds.

## The `deploy` section

This section configures deployment-related settings such as the release command or deployment strategy.

### Run one-off commands before releasing a deployment

The `release_command` lets you run a one-off task, like a database migration, before any of your deployed Machines are created or updated. It runs in a temporary Machine using the newly built image, once per deploy attempt. This is a common pattern for frameworks like Rails or Phoenix, but it&#39;s not limited to them. You can use it for any setup task that needs to run once, not on every app boot.

If the command fails, the deploy will stop. The goal is to make deployment safer: do the risky part first, and only continue if it succeeds.

To run a command in a temporary Machine *before* the release is deployed, define a `release_command`:

```toml
[deploy]
  release_command = &quot;bin/rails db:prepare&quot;
```

The `release_command` value replaces `CMD` in the temporary Machine. This is most commonly used for database migrations, but can be any task that prepares your app for the new release. Note that the Docker image&#39;s `ENTRYPOINT` is not overridden by the `release_command`; `ENTRYPOINT` always runs.

By default, the temporary Machine has full access to the network, environment variables and secrets, but *not* to persistent volumes. Changes made to the file system on the temporary Machine will not persist. It has no volumes attached, and the Machine is destroyed after the command completes. The building/compiling of your project should be done in your Dockerfile. If you need to modify persistent volumes or configure your application, consider making use of `CMD` or `ENTRYPOINT` in your Dockerfile, or of a [process group command](#the-processes-section).

The temporary Machine inherits the size from the largest Machine in the default process group of the app as of flyctl v0.0.508 (they also default larger on empty/new apps, using the Machine `shared-cpu-2x` preset). The default process group is defined as either the `app` process, or the first process group in alphabetical order (if an `app` process is not present).

It is also possible to explicitly define the Machine size by setting `[deploy.release_command_vm]`, for example:

```toml
[deploy]
  release_command = &quot;bin/rails db:prepare&quot;

  [deploy.release_command_vm]
    size = &quot;performance-1x&quot;
    memory = &quot;8gb&quot;
```

A non-zero exit status from this command will stop the deployment. `fly deploy` will display logs from the command. Logs are available via `fly logs` as well.

To ensure the command runs in a specific region, such as `dfw`, set `PRIMARY_REGION = &#39;dfw&#39;` in your application environment in `fly.toml` or with `fly deploy -e PRIMARY_REGION=dfw`. Setting `PRIMARY_REGION` is important if you&#39;re running [database replicas in multiple regions](/docs/postgres/high-availability-and-global-replication).

The environment variable `RELEASE_COMMAND=1` is set within the temporary release Machine. You can use this to define behavior in your Dockerfile&#39;s `ENTRYPOINT`  that&#39;s conditional on being run on a release Machine.

By default, the release command has 5 minutes to complete before it is killed. It is possible to increase or decrease the timeout with `fly deploy --release-command-timeout=10m` or by setting `release_command_timeout = &quot;10m&quot;` in `[deploy]` section of `fly.toml`.

For more context, see our [Seamless Deployments guide](/docs/blueprints/seamless-deployments/#one-off-tasks-with-release_command).

&lt;div class=&quot;callout&quot;&gt;
**Things to know about `release_command`:**
- Replaces `CMD`, but not `ENTRYPOINT`
- Runs in a temporary Machine with no volumes
- Inherits environment, secrets, and network config
- Fails the deploy on a non-zero exit code
- Times out after 5 minutes by default (configurable)
- Logs are streamed to `fly deploy` and `fly logs`
&lt;/div&gt;

### Picking a deployment strategy

```toml
[deploy]
  strategy = &quot;bluegreen&quot;
```

`strategy` controls the way a new release replaces the previous release. Different strategies offer trade-offs between downtime and reliability.

`strategy` may also be specified at deploy time with `flyctl deploy --strategy`.

The available strategies are:

**rolling**: The default strategy for apps with or without volumes. One by one, each running Machine is taken down and replaced by a new release Machine.

**immediate**: Replace all Machines with new releases immediately without waiting for health checks to pass. This is useful in emergency situations where you&#39;re confident about release health and can&#39;t wait for health checks.

**canary**: Boots a single, new Machine with the new release, verifies its health, and then proceeds with a `rolling` restart strategy. The `canary` strategy cannot be used for Machines with attached volumes.

**bluegreen**: For every running Machine, a new one is booted alongside it in the same region. Once all of the new Machines pass health checks, traffic gets migrated to the new Machines and the old Machines are destroyed. If your app is scaled to 2 or more Machines, this strategy can reduce deploy time by running tasks in parallel. You need to configure at least one health check to use the `bluegreen` strategy. The `bluegreen` strategy cannot be used for Machines with attached volumes.

&lt;div class=&quot;note icon&quot;&gt;
**Note:** If `max-per-region` is set to 1, then the default strategy is set to `rolling`. This happens because `canary` needs to temporarily run more than one Machine to work correctly. The `bluegreen` strategy will behave similarly with `max-per-region` set to 1.
&lt;/div&gt;

#### Rolling deploy configuration

```toml
[deploy]
  strategy = &quot;rolling&quot;
  max_unavailable = 1
```

For rolling deploys, you can use `max_unavailable` to control how many Machines can be down at a time.

Whole number values, greater than or equal to one, specify exactly how many Machines can be down at a time. For example, a value of &quot;1&quot; would update one-at-a-time.

Fractional values, between zero and one, provide a percentage of Machines that can be down at a time. For example, the default value of 0.33 means that a maximum of one third of your Machines can be down during a deploy.

### Dealing with timeout errors while deploying a new version

Every time `fly deploy` runs, it builds a new Docker image, pushes it to an internal registry, and then updates or creates Machines for the app. Sometimes the image is too large, or the platform is slower than usual pulling the new image layers, triggering the default 5 minute timeout waiting for the Machine to be in a started state.

The good thing is that this timeout can be controlled in two ways, with the `--wait-timeout` option, for example `fly deploy --wait-timeout=10m`, or as a more permanent `fly.toml` setting:

```toml
[deploy]
wait_timeout = &quot;10m&quot;
```

## The `env` variables section

```toml
[env]
  LOG_LEVEL = &quot;debug&quot;
  RAILS_ENV = &quot;production&quot;
  S3_BUCKET = &quot;my-app-production&quot;
```

This optional section allows setting non-sensitive information as environment variables in the application&#39;s [runtime environment](/docs/machines/runtime-environment/).

For sensitive information, such as credentials or passwords, use the [secrets CLI command](/docs/reference/secrets).

Env variable names are strictly case-sensitive and cannot begin with `FLY_` (as this could clash with the [runtime environment](/docs/machines/runtime-environment)). Env values can only be strings.

Secrets take precedence over env variables with the same name.

**Note:** In Apps V2, the [`primary_region` option](#primary-region) sets the `PRIMARY_REGION` environment variable within a Machine and overrides any value set in the `[env]` section.


## The `http_service` section

For apps that only need HTTP and HTTPS services, you can replace the `[[services]]` section with this simpler alternative.

An `[http_service]` section defines a service that listens on ports 80 and 443. Port 80 will have an HTTP handler. Port 443 will have a TLS and HTTP handler. You can configure additional services on different ports by adding `[[services]]` sections.

As with the more verbose [`[[services]]`](#the-services-sections), you can specify a list of [processes](#the-processes-section) to limit the service definition to Machines belonging to process groups that should receive HTTP requests.

```toml
[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = &quot;stop&quot;
  auto_start_machines = true
  min_machines_running = 0
  [http_service.concurrency]
    type = &quot;requests&quot;
    soft_limit = 200
    hard_limit = 250
```

* `processes`: For apps with multiple processes. The process group that this service belongs to. Define process groups in the [processes](#the-processes-section) section.
* `internal_port`: The port this service (and application) will use to communicate with clients. The default is 8080. We recommend applications use the default.
* `force_https`: A Boolean which determines whether to enforce HTTP to HTTPS redirects.
* `auto_stop_machines`: The action, if any, that Fly Proxy should take when the app is idle for several minutes. Options are `&quot;off&quot;`, `&quot;stop&quot;`, or `&quot;suspend&quot;`. If `&quot;off&quot;`, Fly Proxy will never stop Machines. If `&quot;stop&quot;`, Fly Proxy stops Machines when the app has excess capacity. If `&quot;suspend&quot;`, Fly Proxy suspends Machines (if possible) when the app has excess capacity. Starting a Machine from a `suspended` state is faster than starting a Machine from a `stopped` state, but there are [some caveats](https://community.fly.io/t/autosuspend-is-here-machine-suspension-is-enabled-everywhere/20942). If there&#39;s only one Machine in a region, then the Machine is stopped or suspended if it has no traffic. The Fly Proxy runs a process to automatically stop Machines every few minutes. The default if not set is `&quot;off&quot;`.
* `auto_start_machines`: Whether to automatically start an application&#39;s Machines when a new request is made to the application and there&#39;s no excess capacity, per region. If there&#39;s only one Machine in a region, then it&#39;s started whenever a request is made to the application. The default if not set is `true`.
* `min_machines_running`: The number of Machines to keep running, in the primary region only, when `auto_stop_machines` is `&quot;stop&quot;` or `&quot;suspend&quot;`. The default if not set is `0`.

&lt;div class=&quot;important icon&quot;&gt;
We recommend configuring `auto_stop_machines` and `auto_start_machines` so that they are both enabled or both disabled, to avoid having Machines that either never start or never stop. Learn more about [how Fly Proxy autostop/autostart works](/docs/reference/fly-proxy-autostop-autostart/), including how Fly Proxy determines excess capacity in a region using the `soft_limit` setting.
&lt;/div&gt;

### `http_service.concurrency`

The `http_service` concurrency section configures how to measure load for an application to inform Fly Proxy [load balancing](/docs/reference/load-balancing) and [autostop/autostart](/docs/launch/autostop-autostart/). The `[http_service.concurrency]` section has the same settings as `[services.concurrency]`, which are:

* `type` specifies what metric is used to determine when to auto start or stop, or when a given Machine should receive more or less traffic (load balancing). The two supported values are `connections` and `requests`.

**connections**: Load balance and scale based on the number of concurrent TCP connections. This is the default when unspecified. This is also the default when `fly.toml` is created with `fly launch`. A new connection is established for each HTTP request; consider the `requests` type for HTTP apps.

**requests**: Load balance and scale based on the number of HTTP requests. This is recommended for web services, because the Fly Proxy can pool and reuse connections for requests.

* `hard_limit` : When a Fly Machine is at or over this number of concurrent connections or requests, the system will stop sending new traffic to that Machine. If unset, no `hard_limit` is enforced.
* `soft_limit` : When a Fly Machine is at or over this number of concurrent connections or requests, the system will deprioritize sending new traffic to that Machine and only send it to that Machine if all other Machines are also at or above their `soft_limit`. This setting is also used to determine excess capacity for the [autostop/autostart feature](/docs/launch/autostop-autostart/). If unset, the default is 20.

For more information about concurrency settings, see [Guidelines for concurrency settings](/docs/reference/concurrency/).

### `http_service.http_options.idle_timeout`

Configure an idle-timeout for connections to your app.
 ```toml
  [http_service.http_options]
    idle_timeout = 600
```

### `http_service.http_options.response.pristine`

Configures Fly Proxy to not add any Fly headers to HTTP responses. The following response headers won&#39;t be added and won&#39;t be modified if returned by the app:
 - `Server`
 - `Via`
 - `Fly-Request-Id`
 - `Fly-Cache-Status`

This is useful if you are building a platform on top of Fly and have your own load balancer that already adds similar response headers.

```toml
  [http_service.http_options.response]
    pristine = true
```

### `http_service.http_options.response.headers`

Add or remove HTTP response headers.

In the following example, `Example-Header` will be removed from the final response that Fly Proxy sends, while `Example-Header-1` and `Example-Multi-Value` and their values will be added to the response header.

```toml
  [http_service.http_options.response.headers]
    Example-Header = false
    Example-Header-1 = &quot;value&quot;
    Example-Multi-Value = [&quot;value1&quot;, &quot;value2&quot;]
```

### `http_service.http_options.h2_backend`

Indicates whether the app supports HTTP/2 cleartext (H2C) with prior knowledge or not.

In the following example, `h2_backend` is set to `true`, which allows the app to expose HTTP/2-only service, like gRPC, via `http` handler.

```toml
  [http_service.http_options]
    h2_backend = true
```

### `http_service.http_options.replay_cache`

Configures session-based replay caching. When your app issues a `fly-replay` response, Fly Proxy can cache that replay decision based on cookie or header values, automatically applying it to subsequent requests with the same identifier.

Each `http_options.replay_cache` entry configures a caching rule:

```toml
[[http_service.http_options.replay_cache]]
  path_prefix = &quot;/&quot;
  ttl_seconds = 300
  type = &quot;cookie&quot;
  name = &quot;session_id&quot;
  allow_bypass = false
```

For documentation on replays, and further explanation on caching, see [Session-based Replay Caching](/docs/networking/dynamic-request-routing/#session-based-replay-caching).

#### `http_service.http_options.replay_cache.path_prefix`

Path pattern where this caching rule applies. 

This can be a path like `/api` (applies to any hostname) or include a hostname like `example.com/api`. When multiple rules match a request, the longest matching path takes precedence. 

If including a hostname, do not include the protocol or the port. If no hostname is provided, the cache rule applies to all hostnames, but each hostname retains a separate cache.

Implicitly ends with `/*`, meaning that `example.com/api`, `example.com/api/`, and `example.com/api/*` are all equivalent.

#### `http_service.http_options.replay_cache.ttl_seconds`

How many seconds to cache the replay decision. Minimum value is 10 seconds.

#### `http_service.http_options.replay_cache.type`

Either `&quot;cookie&quot;` or `&quot;header&quot;`. Specifies whether to key the cache on a cookie or request header.

#### `http_service.http_options.replay_cache.name`

Name of the cookie or header to use as the cache key.

#### `http_service.http_options.replay_cache.allow_bypass`

Optional boolean. When `true`, allows clients to bypass the cache by setting the `fly-replay-cache-control: skip` request header. Default is `false`.

### `http_service.tls_options`

Configure the TLS versions and ALPN protocols that Fly&#39;s edge will use to terminate TLS for your application with:

```toml
[http_service.tls_options]
  alpn = [&quot;h2&quot;, &quot;http/1.1&quot;]
  versions = [&quot;TLSv1.2&quot;, &quot;TLSv1.3&quot;]
  default_self_signed = false
```

* `alpn`: Array of strings indicating how to handle ALPN negotiations with clients.
* `versions`: Array of strings indicating which TLS versions are allowed.
* `default_self_signed`: When `true`, serve a self-signed certificate if no certificate exists. Default is `false`. 

Fly.io can also terminate TLS only and pass through directly to your service. For more information, refer to [services.ports.tls_options](/docs/reference/configuration/#services-ports-tls_options)

### `http_service.checks`

To configure health checks for your HTTP service, you can use the `http_service.checks` section. These checks expect a successful HTTP status in response (i.e, 2xx). Here is an example of a `http_service.checks` section:

```toml
[[http_service.checks]]
  grace_period = &quot;10s&quot;
  interval = &quot;30s&quot;
  method = &quot;GET&quot;
  timeout = &quot;5s&quot;
  path = &quot;/&quot;
```

Roughly translated, this section says every thirty seconds, perform an HTTP GET on the root path (e.g. http://appname.fly.dev/) looking for it to return an HTTP 200 status within five seconds. The parameters of a `check` are listed below.

Times are in milliseconds unless units are specified.

* `grace_period`: The time to wait after a Machine starts before checking its health. Make sure this is long enough for your app to start up. For example, if your app takes 2 seconds to start up, give it some runway by setting `grace_period` to at least 3 seconds.
* `interval`: The time between connectivity checks. There should be a balance between the interval and the grace period. If interval is long and grace_period is shorter than your app&#39;s startup time, the health check will take too long, adding to your deployment time.
* `timeout`: The maximum time a connection can take before being reported as failing its health check.
* `method`: The HTTP method to be used for the check. If omitted, the default is `get`.
* `path`: The path of the URL to be requested.
* `protocol`: The protocol to be used (`http` or `https`). If omitted, the default is `http`.
* `tls_server_name`: If the protocol is `https`, the hostname to use for TLS certificate validation.
* `tls_skip_verify`: When `true` (and using HTTPS protocol) skip verifying the certificates sent by the server.
* `http_service.checks.headers`: This is a sub-section of `http_service.checks`. It uses the key/value pairs as a specification of header and header values that will get passed with the check call.

&lt;section class=&quot;warning&quot;&gt; The health check will not automatically follow any `HTTP 301` or `302` redirect, so it will fail if it receives anything other than a `200 OK` response. This may be an issue if your heath check specifies `protocol = http` (the default) but your app forces `https`. You may be able to avoid this redirect and continue using `http` for your health check by adding `X-Forwarded-Proto = &quot;https&quot;` to the `[http_service.checks.headers]` sub-section. &lt;/section&gt;

### The `http_service.machine_checks` section

You can use the same `machine_checks` section for HTTP services as for [`services`](#services-machine_checks). The `machine_checks` section defines parameters for checking the health of a service.

```toml
[[http_service.machine_checks]]
  image = &quot;curlimages/curl&quot;
  entrypoint = [&quot;/bin/sh&quot;, &quot;-c&quot;]
  command = [&quot;curl http://[$FLY_TEST_MACHINE_IP] | grep &#39;Hello, World!&#39;&quot;]
  kill_signal = &quot;SIGKILL&quot;
  kill_timeout = &quot;5s&quot;
```

## The `services` sections

The `services` sections define how Fly Proxy connects requests that hit an app&#39;s public [Anycast](/docs/networking/services/) or private [Flycast](/docs/networking/flycast) address to services running within Machines, and configure other Fly Proxy behavior for a service. If a service only needs HTTP and HTTPS on standard ports, you can use the less verbose [`http_service`](#the-http_service-section).

A `services` section itself is a table of tables in TOML, so it is delimited with double square brackets. Tables within `[[services]]` configure additional features and behaviors for the service, and are described in subsequent sections. 

&lt;section class=&quot;warning&quot;&gt; At least one [`services.ports`](#services-ports) entry is required for each `services` section, to set a port and handler for incoming requests. &lt;/section&gt;

An app can have:

* No `services` section (and no [`http_service` section](#the-http_service-section)): The application cannot be reached from the public internet, nor by a [Flycast](/docs/networking/flycast/) address; this is typical of apps that talk only over [6PN private networking](/docs/networking/private-networking/) to other apps on the same network.
* One `services` section (or an [`http_service` section](#the-http_service-section)): One internal port mapped to one or more external ports.
* Multiple `services` sections (or an [`http_service` section](#the-http_service-section) and one or more `services` sections): Mapping multiple internal ports to multiple external ports.
  

Example (note the double square brackets):

```toml
[[services]]
  internal_port = 8080
  protocol = &quot;tcp&quot;
  auto_stop_machines = &quot;stop&quot;
  auto_start_machines = true
  min_machines_running = 0
```

Settings: 

* `processes`: For apps with multiple process groups, the process group or groups that this service belongs to. Define process groups in the [processes](#the-processes-section) section.
* `internal_port` : The port this service (and application) will use to communicate with clients. The default is 8080. We recommend applications use the default.
* `protocol` : The protocol that this service will use to communicate. Typically `tcp` for most applications, but can also be `udp`.
* `auto_stop_machines`: The action, if any, that Fly Proxy should take when the app is idle for several minutes. Options are `&quot;off&quot;`, `&quot;stop&quot;`, or `&quot;suspend&quot;`. If `&quot;off&quot;`, Fly Proxy will never stop Machines. If `&quot;stop&quot;`, Fly Proxy stops Machines when the app has excess capacity. If `&quot;suspend&quot;`, Fly Proxy suspends Machines (if possible) when the app has excess capacity. Starting a Machine from a `suspended` state is faster than starting a Machine from a `stopped` state, but there are [some caveats](https://community.fly.io/t/autosuspend-is-here-machine-suspension-is-enabled-everywhere/20942). If there&#39;s only one Machine in a region, then the Machine is stopped or suspended if it has no traffic. The Fly Proxy runs a process to automatically stop Machines every few minutes. The default if not set is `&quot;off&quot;`.
* `auto_start_machines`: Whether to automatically start an application&#39;s Machines when a new request is made to the application and there&#39;s no excess capacity, per region. If there&#39;s only one Machine in a region, then it&#39;s started whenever a request is made to the application. The default if not set is `true`.
* `min_machines_running`: The number of Machines to keep running, in the primary region only, when `auto_stop_machines` is `&quot;stop&quot;` or `&quot;suspend&quot;`. The default if not set is `0`.

&lt;div class=&quot;callout&quot;&gt;
We recommend configuring `auto_stop_machines` and `auto_start_machines` so that they are both enabled or both disabled, to avoid having Machines that either never start or never stop. Learn more about [how Fly Proxy autostop/autostart works](/docs/reference/fly-proxy-autostop-autostart/), including how Fly Proxy determines excess capacity in a region using the `soft_limit` setting.
&lt;/div&gt;

### `services.ports`

For each `services` section in your `fly.toml`, i.e. for each external port you want to accept connections on, you need a `services.ports` section. The section is denoted by double square brackets like this:

```toml
  [[services.ports]]
    handlers = [&quot;http&quot;]
    port = 80
    force_https = true  # optional
```

This example defines an HTTP handler on port 80.

* `handlers` : An array of strings, each string selecting a handler process to terminate the connection with at the edge. Here, the `http` handler will accept HTTP traffic and pass it on to the `internal_port` of the application, which we defined in the `services` section above.
  For the list of available handlers, and how they manage network traffic, see the [Public Network Services documentation](/docs/networking/services/).
* `port` : An integer representing the external port to listen on (ports 1-65535).
* `start_port` : For a port range, the first port to listen on.
* `end_port` : For a port range, the last port to listen on.
* `force_https`: A Boolean which determines whether to enforce HTTP to HTTPS redirects.

You can have more than one `services.ports` section. The default configuration, for example, contains two. We&#39;ve already seen one above. The second one defines an external port 443 for secure connections, using the `tls` handler.

```toml
  [[services.ports]]
    handlers = [&quot;tls&quot;, &quot;http&quot;]
    port = 443
```

For UDP applications, make sure to bind the application to the same port as defined in the relevant `services.ports` section. For example, the configuration below will listen on port 5000 and the application will need to bind to `fly-global-services:5000` to receive traffic. Leave `handlers` unset for UDP services.

```toml
[[services]]
  internal_port = 5000
  protocol = &quot;udp&quot;
  [[services.ports]]
    port = 5000
```

Instead of using multiple port definitions, you can specify a range of ports. For example, the configuration below will listen on the ports `8080`, `8081`, `8082`, `8083`, `8084` and `8085`:

```toml
[[services.ports]]
  handlers = [&quot;tls&quot;]
  start_port = 8080
  end_port = 8085
```

### `services.ports.http_options.idle_timeout`

Configure an idle-timeout for connections to your app.
 ```toml
  [services.ports.http_options]
    idle_timeout = 600
```

### `services.ports.http_options.response.pristine`

Configures Fly Proxy to not add any Fly headers to HTTP responses. The following response headers won&#39;t be added and won&#39;t be modified if returned by the app:
 - `Server`
 - `Via`
 - `Fly-Request-Id`
 - `Fly-Cache-Status`

This is useful if you are building a platform on top of Fly and have your own load balancer that already adds similar response headers.

```toml
  [services.ports.http_options.response]
    pristine = true
```

#### `services.ports.http_options.response.headers`

Add or remove HTTP response headers.

In the following example, `Example-Header` will be removed from the final response that Fly Proxy sends, while `Example-Header-1` and `Example-Multi-Value` and their values will be added to the response header.

```toml
  [services.ports.http_options.response.headers]
    Example-Header = false
    Example-Header-1 = &quot;value&quot;
    Example-Multi-Value = [&quot;value1&quot;, &quot;value2&quot;]
```

### `services.ports.http_options.h2_backend`

Indicates whether the app supports HTTP/2 cleartext (H2C) with prior knowledge or not.

In the following example, `h2_backend` is set to `true`, which allows the app to expose HTTP/2-only service, like gRPC, via `http` handler.

```toml
  [services.ports.http_options]
    h2_backend = true
```

### `services.ports.http_options.replay_cache`

Configures session-based replay caching. When your app issues a `fly-replay` response, Fly Proxy can cache that replay decision based on cookie or header values, automatically applying it to subsequent requests with the same identifier.

Each `http_options.replay_cache` entry configures a caching rule:

```toml
  [[services.ports.http_options.replay_cache]]
    path_prefix = &quot;/&quot;
    ttl_seconds = 300
    type = &quot;cookie&quot;
    name = &quot;session_id&quot;
    allow_bypass = false
```

For documentation on replays, and further explanation on caching, see [Session-based Replay Caching](/docs/networking/dynamic-request-routing/#session-based-replay-caching).

#### `services.ports.http_options.replay_cache.path_prefix`

Path pattern where this caching rule applies. 

This can be a path like `/api` (applies to any hostname) or include a hostname like `example.com/api`. When multiple rules match a request, the longest matching path takes precedence. 

If including a hostname, do not include the protocol or the port. If no hostname is provided, the cache rule applies to all hostnames, but each hostname retains a separate cache.

Implicitly ends with `/*`, meaning that `example.com/api`, `example.com/api/`, and `example.com/api/*` are all equivalent.

#### `services.ports.http_options.replay_cache.ttl_seconds`

How many seconds to cache the replay decision. Minimum value is 10 seconds.

#### `services.ports.http_options.replay_cache.type`

Either `&quot;cookie&quot;` or `&quot;header&quot;`. Specifies whether to key the cache on a cookie or request header.

#### `services.ports.http_options.replay_cache.name`

Name of the cookie or header to use as the cache key.

#### `services.ports.http_options.replay_cache.allow_bypass`

Optional boolean. When `true`, allows clients to bypass the cache by setting the `fly-replay-cache-control: skip` request header. Default is `false`.

#### `services.ports.proxy_proto_options`

Configure the version of the PROXY protocol that your app accepts. Version 1 is the default.

For example:
```toml
[[services.ports]]
  handlers = [&quot;proxy_proto&quot;]
  port = 5000
  proxy_proto_options = { version = &quot;v2&quot; }
```

* `version` : A string to indicate that the TCP connection uses PROXY protocol version 2. The default when not set is version 1.

#### `services.ports.tls_options`

Configure the TLS versions and ALPN protocols that Fly&#39;s edge will use to terminate TLS for your application with:

```toml
  [[services.ports]]
    handlers = [&quot;tls&quot;, &quot;http&quot;]
    port = 443
    tls_options = { &quot;alpn&quot; = [&quot;h2&quot;, &quot;http/1.1&quot;], &quot;versions&quot; = [&quot;TLSv1.2&quot;, &quot;TLSv1.3&quot;] }
```

* `alpn` : Array of strings indicating how to handle ALPN negotiations with clients.
* `versions` : Array of strings indicating which TLS versions are allowed.
* `default_self_signed`: When `true`, serve a self-signed certificate if no certificate exists. Default is `false`.

Fly.io can also terminate TLS only and pass through directly to your service. This works for a variety of applications that can benefit from offloading TLS termination and accept the unencrypted connection.

One use case is applications using HTTP/2, like gRPC. Fly&#39;s edge terminates TLS and sends h2c (HTTP/2 without TLS) directly to your application through our backhaul. The config below will negotiate HTTP/2 with clients, and then send h2c to the application:

```toml
  [[services.ports]]
    handlers = [&quot;tls&quot;]
    port = 443
    tls_options = { &quot;alpn&quot; = [&quot;h2&quot;] }
```

### `services.concurrency`

The services concurrency sub-section configures how to measure load for an application to inform Fly Proxy [load balancing](/docs/reference/load-balancing) and [autostop/autostart](/docs/launch/autostop-autostart/).

This section is a simple list of key/values, so the section is denoted with single square brackets like so:

```toml
  [services.concurrency]
    type = &quot;connections&quot;
    hard_limit = 25
    soft_limit = 20
```

`type` specifies what metric is used to determine when a given Machine has reached a concurrency limit. The two supported values are `connections` and `requests`.

**connections**: Load balance and scale based on the number of concurrent TCP connections. This is the default when unspecified. This is also the default when `fly.toml` is created with `fly launch`. A new connection is established for each HTTP request; consider the `requests` type for HTTP apps.

**requests**: Load balance and scale based on the number of HTTP requests. This is recommended for web services, because the Fly Proxy can pool and reuse connections for requests.

* `hard_limit` : When a Fly Machine is at or over this number of concurrent connections or requests, the system will stop sending new traffic to that Machine. If unset, no `hard_limit` is enforced.
* `soft_limit` : When a Fly Machine is at or over this number of concurrent connections or requests, the system will deprioritize sending new traffic to that Machine and only send it to that Machine if all other Machines are also at or above their `soft_limit`. This setting is also used to determine excess capacity for the [autostop/autostart feature](/docs/launch/autostop-autostart/). If unset, the default is 20.

For more information about concurrency settings, see [Guidelines for concurrency settings](/docs/reference/concurrency/).

### `services.tcp_checks`

When a service is running, Fly Proxy can check up on it by connecting to a port. The `services.tcp_checks` section defines parameters for those checks. For example, the default `tcp_checks` looks like this:

```toml
  [[services.tcp_checks]]
    grace_period = &quot;1s&quot;
    interval = &quot;15s&quot;
    timeout = &quot;2s&quot;
```
Times are in milliseconds unless units are specified.

* `grace_period`: The time to wait after a Machine starts before checking its health. Make sure this is long enough for your application to start up. For example if your app takes 2 seconds to start up, give it some runway by setting this to at least 3 seconds.
* `interval`: The time between connectivity checks. If the interval is long, and the `grace_period` is shorter than your app&#39;s startup time, then the health check will take longer and will add to your deployment time.
* `timeout`: The maximum time a connection can take before being reported as failing its health check.

### `services.http_checks`

Another way of checking a service is running is through HTTP checks as defined in the `services.http_checks` section. These checks are more thorough than `services.tcp_checks` as they require not just a connection but a successful HTTP status in response (i.e, 2xx). Here is an example of a `services.http_checks` section:

```toml
  [[services.http_checks]]
    interval = 10000
    grace_period = &quot;5s&quot;
    method = &quot;get&quot;
    path = &quot;/&quot;
    protocol = &quot;http&quot;
    timeout = 2000
    tls_skip_verify = false
    [services.http_checks.headers]
```

Roughly translated, this section says every ten seconds, perform an HTTP GET on the root path (e.g. http://appname.fly.dev/) looking for it to return an HTTP 200 status within two seconds. The parameters of a `http_check` are listed below.

Times are in milliseconds unless units are specified.

* `grace_period`: The time to wait after a Machine starts before checking its health. Make sure this is long enough for your app to start up. For example, if your app takes 2 seconds to start up, give it some runway by setting `grace_period` to at least 3 seconds.
* `interval`: The time between connectivity checks. There should be a balance between the interval and the grace period. If it&#39;s long and your grace_period shorter than your app&#39;s startup time, health check will take too long adding you your deployment time.
* `timeout`: The maximum time a connection can take before being reported as failing its health check.
* `method`: The HTTP method to be used for the check.
* `path`: The path of the URL to be requested.
* `protocol`: The protocol to be used (`http` or `https`).
* `tls_server_name`: If the protocol is `https`, the hostname to use for TLS certificate validation.
* `tls_skip_verify`: When `true` (and using HTTPS protocol) skip verifying the certificates sent by the server.
* `services.http_checks.headers`: This is a sub-section of `services.http_checks`. It uses the key/value pairs as a specification of header and header values that will get passed with the http_check call.

**Note**: The `services.http_checks` section is optional and not generated in the default `fly.toml` file.

### `services.machine_checks`

Machine checks work a bit differently than the other checks. They run on each deploy, and if they fail, the deploy is stopped. A new Machine is spawned with the environment variable `FLY_TEST_MACHINE_IP` set to the [6PN IPv6 address](/docs/networking/private-networking/#6pn-addresses-in-detail) of the Machine being tested. This is useful for running integration tests on Machines before a deployment. Here&#39;s an example:

```toml
  [[services.machine_checks]]
    image = &quot;curlimages/curl&quot;
    entrypoint = [&quot;/bin/sh&quot;, &quot;-c&quot;]
    command = [&quot;curl http://[$FLY_TEST_MACHINE_IP] | grep &#39;Hello, World!&#39;&quot;]
    kill_signal = &quot;SIGKILL&quot;
    kill_timeout = &quot;5s&quot;
```

This example uses the `curl` image to run a test. It checks that the Machine is serving a page with the text &quot;Hello, World!&quot;.

* `image`: The Docker image to use for the test. We default to the one used for the process group the Machine is in.
* `entrypoint`: The entrypoint for the test. Defaults to the entrypoint of the Machine being tested if not set
* `command`: The command to run for the test.
* `kill_signal`: The signal to send to the test process if it runs too long. Defaults to the signal of the image, if a custom image is set.
* `kill_timeout`: The time to wait before sending the kill signal. Defaults to the timeout of the image, if a custom image is set.

Machine checks are especially useful for `canary` deploys. `flyctl` will spawn a new Machine, ensure all machine capabilities are functional, and then deploy the rest of the Machines in your app.

Machine checks are supported for apps using the `rolling` and `canary` deployment strategies.

## The `mounts` section

This section supports the Volumes feature for persistent storage. The section has two required entries: `source` and `destination`.

```toml
[mounts]
  source = &quot;myapp_data&quot;
  destination = &quot;/data&quot;
  processes = [&quot;disk&quot;] # optional - attach volumes to Machines that belong to one or more process groups
  initial_size = &quot;20gb&quot; # optional - the size of the volume created on first deploy
```

### `source`

The `source` is a volume name that this app should mount. Any volume with this name, in the same region as the app and that isn&#39;t already mounted, may be mounted. A volume of this name must exist in _some_ region for the application to deploy.

### `destination`

The `destination` is the directory where the `source` volume should be mounted on the running app. This cannot be `/` since that&#39;s where the root file system is mounted.

### `processes`

Optionally, you can specify a list of [processes](#the-processes-section) to limit volume mounts by process group. You can even specify two different `[[mounts]]` sections to mount different source volumes to Machines in different process groups. Note the need to use double brackets if there are multiple `[[mounts]]` defined.

### `initial_size`

Optionally, you can specify the size of the volume to be created when launching an app for the first time.

This value is only used by `fly launch` and `fly deploy` commands in case they need to create a new volume; it is ignored by the `fly volume create` command.

The value can be a string with units, like `initial_size = &quot;30GB&quot;` for example. The value can also be an integer, like `initial_size = 30` for example, with GB as the default unit.

### `snapshot_retention`

Optionally, you can specify the number of days snapshots of the volumes in this app are retained.

The default is 5 days when unset. The minimum is 1 day. The maximum is 60 days.

For example, the following config retains snapshots of volumes for 14 days:

```toml
[mounts]
  source = &quot;myapp_data&quot;
  destination = &quot;/data&quot;
  snapshot_retention = 14
```

### `scheduled_snapshots`

Optional. Enable or disable automatic daily snapshots for a volume.

The default is true (enabled) when unset.

For example, the following config disables automatic daily snapshots:
```toml
[mounts]
  source = &quot;myapp_cache&quot;
  destination = &quot;/cache&quot;
  scheduled_snapshots = false
```

### `auto_extend_size_threshold`

Optional. The threshold of storage used on a volume, by percentage, that triggers extending the volume&#39;s size by the value of `auto_extend_size_increment`,
unless the resulting size would exceed `auto_extend_size_limit`.

### `auto_extend_size_increment`

The increment, in GB, by which to extend the volume after reaching the `auto_extend_size_threshold`.

### `auto_extend_size_limit`

Maximum size, in GB, of a volume after an extension is completed.

&lt;div class=&quot;important&quot;&gt;
When using the auto-extension feature for volumes, both `auto_extend_size_increment` and `auto_extend_size_limit` are required. Without these values, the volume won&#39;t resize automatically, even if the usage threshold is reached.
&lt;/div&gt;

### Auto extend volume size configuration

You can optionally configure volumes to automatically extend when they reach a usage threshold.

For example, the following config extends the size of the volume by 1GB when it reaches 80% capacity. The volume extensions are limited to 5GB in total.

```toml
[[mounts]]
  source = &quot;data&quot;
  destination = &quot;/data&quot;
  auto_extend_size_threshold = 80
  auto_extend_size_increment = &quot;1GB&quot;
  auto_extend_size_limit = &quot;5GB&quot;
  ```

## The `vm` section

This section defines the compute requirements for the Machines used for the application.

The default Machine size is `shared-cpu-1x` but it is not enforced if not specified in `fly.toml`. It means commands like `fly deploy` won&#39;t attempt to update the compute requirements (or size) for a Machine. `fly scale` commands will use existing Machines to infer new Machine sizes, and in the event that there are no Machines, they will use `shared-cpu-1x`.

If you care about a predictable _scaling up from zero_ case, or if you have different compute requirements for different process groups, then it is highly recommended to add this section to `fly.toml`. Once compute requirements are set, `fly deploy` and `fly scale count` commands will enforce them. If you change the size of the Machines using `fly scale vm` (or its sibling `fly scale memory`) then it will be reset on next `fly deploy` unless `fly.toml` is updated accordingly. Learn more about [Machine size configuration precedence](/docs/apps/scale-machine/#machine-size-configuration-precedence).

&lt;div class=&quot;callout&quot;&gt;
If you update your Machine size using `fly scale vm` or `fly scale memory` but you still have a `[[vm]]` section in your `fly.toml` file, the next `fly deploy` will reset your Machines to the configuration in the file.  If you want to manually scale your Machines and keep those settings, remove the `[[vm]]` section from your `fly.toml` file.
&lt;/div&gt;

All keys are optional and `size` has lower precedence than all other keys.

```toml
[[vm]]
  size = &quot;shared-cpu-2x&quot;
  memory = &quot;1gb&quot;
  cpus = 2
  cpu_kind = &quot;shared&quot;
  gpus = 1
  gpu_kind = &quot;a100-pcie-40gb&quot;
  kernel_args = &quot;no-hlt=true&quot;
  host_dedication_id = &quot;customer-id&quot;
  persist_rootfs = &quot;never&quot;
  processes = [&quot;app&quot;]
```

### `size`

The Machine preset size to use as base, like `size = &quot;shared-cpu-1x&quot;` for example.

To get the full list, run `fly platform vm-sizes` or check the [pricing page](/docs/about/pricing/#compute).

### `memory`

The memory to request. It can be expressed with units, like `memory = &quot;2GB&quot;` or `memory = &quot;512mb&quot;` for example. The value can also be an integer, like `memory = 1024` for example, with MB as the default unit.

### `cpus`

The number of vCPUs to request. Valid values are `1`, `2`, `4`, `8`, or `16`, but depends on `cpu_kind`. 

### `cpu_kind`

The kind of CPU to request. Valid values are `shared` and `performance`.

### `gpus`

The number of GPUs to request. Valid values are `1`, `2`, `4`, `8`, but depends on `gpu_kind`. 

Setting this value requires also setting `gpu_kind`.

### `gpu_kind`

The kind of GPU to request. Valid values are `a10`, `l40s`, `a100-pcie-40gb` and `a100-sxm4-80gb`.

Setting this value assumes `gpus = 1` if not present.

### `kernel_args`

Additional kernel parameters provided to the kernel when booting the VM.

### `host_dedication_id`

In the case of having a dedicated host, this is the value to set so Machines are launched on dedicated hardware.

### persist_rootfs

The persistence of the root filesystem across restarts and updates. Valid values are `never` (default), `restart`, and `always`.

- `never`: The root filesystem is ephemeral and will not be persisted across restarts or updates.
- `restart`: The root filesystem is persisted across restarts, but not across updates.
- `always`: The root filesystem is persisted across restarts and updates.

### `processes`

Optionally, you can specify a list of [processes](#the-processes-section) to limit by process group. You can even specify two different `[[vm]]` sections to have different compute requirements per process group. Note the need to use double brackets if there are multiple `[[vm]]` sections defined.

A `[[vm]]` section without a `processes` key applies to all process groups, except when another `[[vm]]` section targets a specific process group. For example the following snippets uses `shared-cpu-4x` for `app` and `other` process groups but `performance-1x` for `worker` group.

```
[processes]
app = &quot;/start-app&quot;
worker = &quot;/start-worker&quot;
other = &quot;/start-other&quot;

[[vm]]
size = &quot;shared-cpu-4x&quot;

[[vm]]
size = &quot;performance-1x&quot;
processes = [&quot;worker&quot;]
```

## The `restart` section

```toml
[[restart]]
  policy = &quot;never&quot;
  retries = 10
  processes = [&quot;app&quot;]
```

When a machine unexpectedly exits, our scheduling machinery follows a machineâs restart policy to restart it without your intervention. These policies are quite similar to Dockerâs container restart policies:

- always: weâll attempt to restart the machine no matter the exit code.
- never: we wonât restart the machine even if it exits with a non-zero exit code.
- on-failure: weâll only restart the machine if it exited with a non-zero exit code (due to a failure or crash). This is the default policy if one is not explicitly set. 

A restart policy can be targeted to a specific process group. If a group is not specified, all machines in an app will have the same default restart policy. You can also specify the number of times we should retry restarting the machine before giving up.

## The `checks` section

If your app doesn&#39;t have public-facing services, or you want independent health checks that don&#39;t affect request routing,
use this top-level `checks` section instead of `[[services.checks]]`.

Unlike service-level checks, top-level checks require:
- A port number
- A unique name
- The type of check (`http` or `tcp`)

```toml
[checks]
  [checks.name_of_your_http_check]
    grace_period = &quot;30s&quot;
    interval = &quot;15s&quot;
    method = &quot;get&quot;
    path = &quot;/path/to/status&quot;
    port = 5500
    timeout = &quot;10s&quot;
    type = &quot;http&quot;
    [checks.name_of_your_http_check.headers]
      Content-Type = &quot;application/json&quot;
      Authorization = &quot;super-secret&quot;

  [checks.name_of_your_tcp_check]
    grace_period = &quot;30s&quot;
    interval = &quot;15s&quot;
    port = 1234
    timeout = &quot;10s&quot;
    type = &quot;tcp&quot;
```

Fields are very similar to `[[services.checks]]`:

* `port`: Internal port to connect to. Needs to be available on `0.0.0.0`. Required.
* `type`: Either `tcp` or `http`. Required.
* `grace_period`: The time to wait after a Machine starts before checking its health. Make sure you give your app enough time to start up. For example if your app takes 2 seconds to start up, give it some runway by setting this to at least 3 seconds.
* `interval`: The time between check runs. If your `grace_period` is shorter than your app&#39;s startup time, and `interval` is too long, checks will increase deployment times.
* `processes`: For apps with multiple processes. The process group to apply the health checks to. Define process groups in the [processes](#the-processes-section) section.

For HTTP checks only:

* `method`: The HTTP method to be used for the check.
* `path`: The path of the URL to be requested.
* `timeout`: The maximum time a connection can take before being reported as failing its health check.
* `headers`: Specify key/value pairs will get passed as HTTP headers on the check request.

Again, times are in milliseconds unless units are specified.

## The `processes` section

The `processes` section allows you to define process groups to be run on separate Machines within a single app. Learn more about [running multiple process groups in an app](/docs/apps/processes/).

**Each Machine can run a different command on start**, allowing you to re-use your code base for different tasks (web server, queue worker, etc).

To run multiple processes, you&#39;ll need a `[processes]` block containing a map of a name and command to start the application.

```toml
[processes]
  web = &quot;bundle exec rails server -b [::] -p 8080&quot;
  worker = &quot;bundle exec sidekiqswarm&quot;
```

Furthermore, you can &quot;match&quot; a specific process (or processes) to an [`[http_service]`](#the-http_service-section) or [`[[services]]`](#the-services-sections) configuration. For example:

```toml
[http_service]
  processes = [&quot;web&quot;] # this service only applies to the web process
  internal_port = 8080
  force_https = true
```

Volumes can also be assigned to specific processes; use double brackets to include more than one [`[[mounts]]`](#the-mounts-section) section, and mount differently named volumes to Machines in different process groups:

```toml
[[mounts]]
  source = &quot;data&quot;
  destination = &quot;/data&quot;
  processes = [&quot;app&quot;]
```

## The `metrics` section

Fly apps can be configured to export custom metrics to the Fly.io-hosted Prometheus service.

```toml
[metrics]
  port = 9091
  path = &quot;/metrics&quot; # default for most prometheus exporters
```

Custom metrics can be also configured for specific `processes`, using double brackets to define multiple `[[metrics]]` tables:
```toml
[[metrics]]
  port = 9394
  path = &quot;/metrics&quot;
  processes = [&quot;web&quot;]

[[metrics]]
  port = 9113
  path = &quot;/metrics&quot;
  processes = [&quot;proxy&quot;]
```

Check out [Metrics on Fly.io](/docs/reference/metrics/) for more information about collecting metrics for your apps.

## The `statics` sections

You can use the `[[statics]]` section in your `fly.toml` to serve static files such as images, CSS, or JavaScript for your application. There are two ways to serve statics: 
- From a running Fly Machine
- From a Tigris object storage bucket.

### Serving statics from a Fly Machine

When you add a `[[statics]]` section to `fly.toml`, the Fly Proxy intercepts requests matching your `url_prefix`. If the requested file exists in your `guest_path`, the request is routed to a static file server running inside your machine. This bypasses your main web server process. Your machine must be running for static files to be served.

If your machine is stopped, static files will not be served. If `autostart` is enabled, the machine will be started during statics requests as well as during normal requests to the app. Static assets are always served directly from your VM, not from the Fly edge or proxy host.

```toml
[[statics]]
  guest_path = &quot;/app/public&quot;
  url_prefix = &quot;/public&quot;
```

In this example, a request to `/public/image.png` is served from `/app/public/image.png` inside your running machine. You can define up to 10 `[[statics]]` mappings per application.

The `guest_path` is the directory in your Docker image to serve files from. It may overlap across mappings, but `url_prefix` values must not overlap. Only one static mapping is honored for a given prefix. For example, two mappings to `/public/foo` and `/public/bar` are allowed, but two mappings to `/public` are not.

### Serving statics from Tigris object storage

You can serve static files directly from a Tigris object storage bucket. This lets you host assets or full static sites from a bucket instead of baking them into your Docker image. 

Static files in Tigris buckets are always delivered through your applicationâs running VM, not directly from the Fly edge. If no machine is running, requests for Tigris statics will not be served.
However, if `autostart` is enabled for your app, incoming requests for static assets will automatically start a machine as needed, the same as for normal application traffic.

```toml
[[statics]]
  guest_path = &quot;/app/public&quot;
  url_prefix = &quot;/public&quot;
  tigris_bucket = &quot;my-bucket&quot;
```

In this configuration, requests under `/public` are served from files stored in `my-bucket` under the `/app/public` path. Your machine must be running for these files to be served. If your machine scales to zero, static assets will not be accessible.

When handling trailing slashes, requests to a directory path such as `/public/dir/` look for an `index.html` file, if you specify one. Requests without a trailing slash such as `/public/dir` may not serve as expected. Consider using redirects or documenting this for your users. Tigris statics support the `index_document` key, which allows you to serve a default file for a directory path.

```toml
[[statics]]
  guest_path = &quot;/app/public&quot;
  url_prefix = &quot;/public&quot;
  tigris_bucket = &quot;my-bucket&quot;
  index_document = &quot;index.html&quot;
```

In this configuration, a request to `https://example.com/public/` serves `/app/public/index.html` from the bucket. Similarly, `https://example.com/public/assets/` serves `/app/public/assets/index.html`.

Tigris statics are billed at Tigris pricing. Data egress from Tigris may incur both Tigris and Fly Proxy egress charges. 

Do not overlap `url_prefix` values; only one static mapping will be honored for a given prefix.


### Caveats

This feature should not be compared directly with a CDN, for the following reasons:

- This feature does not exempt you from having to run a web service in your Machine.
- You must have a running machine for statics to be served. If your machine is stopped, static assets will not be served. If `auto_start_machines` is enabled, the machine will be started automatically in response to statics requests, the same as with normal application requests.
- The Fly Proxy routes matching requests directly to the statics file server running inside your machine. Static requests do not go through your main application process, but are handled by the file server within the same VM.
- Serving an index document is only supported for statics served directly from Tigris. The index document must have the same name in all the relevant locations in your Tigris bucket.
- For statics served from your container, it will not find `index.html` at the root. The full path must be requested.
- You cannot set `Cache-Control` or any other headers on assets. If you need those, deliver them from your application and set the relevant headers.
- `statics` does not honor symlinks. For example, if `/app/public` in your container is a symlink, such as `/app-39403/public`, use the absolute original path in your statics configuration.


## The `files` section

When a `files` section is set, the contents from one of `raw_value`, `local_path`, or `secret_name` will be written to the Machine at the provided `guest_path`.

* `raw_value`: The raw file content to be written. Must be base64 encoded.
* `local_path`: The path to a local file in your system that should be used. Does not need to be base64 encoded.
* `secret_name`: The name of an app secret that&#39;s been set with `fly secrets set`. The value of the secret will be written to the file. The referenced secret&#39;s value must be base64 encoded.

Examples:

```toml
[[files]]
  guest_path = &quot;/path/to/hello.txt&quot;
  raw_value = &quot;aGVsbG8gd29ybGQK&quot;

[[files]]
  guest_path = &quot;/path/to/config.yaml&quot;
  local_path = &quot;/local/path/config.yaml&quot;

[[files]]
  guest_path = &quot;/path/to/secret.txt&quot;
  secret_name = &quot;SUPER_SECRET&quot;
```

You can optionally restrict which Machine(s) contain the file using the [processes](#the-processes-section) field. For example:

```toml
[[files]]
  guest_path = &quot;/path/to/config.yaml&quot;
  local_path = &quot;/local/path/config.yaml&quot;
  processes = [&quot;web&quot;]
```

To remove a previously configured file on the next deployment, either delete the `files` entry entirely, or set its source to an empty string like this:

```toml
[[files]]
  guest_path = &quot;/path/to/config.yaml&quot;
  local_path = &quot;&quot;
```

## The `experimental` section

This section is for flags and feature settings which have yet to be promoted into the main configuration.

```toml
[experimental]
cmd = [&quot;path/to/command&quot;, &quot;arg1&quot;, &quot;arg2&quot;]
entrypoint = [&quot;path/to/command&quot;, &quot;arg1&quot;, &quot;arg2&quot;]
exec = [&quot;path/to/command&quot;, &quot;arg1&quot;, &quot;arg2&quot;]
```

### `cmd`

This overrides the `CMD` set by the Dockerfile. It should be specified as an array of strings, as seen in the example above.

### `entrypoint`

This overrides the `ENTRYPOINT` set by the Dockerfile. It should be specified as an array of strings, as seen in the example above.

### `exec`

This overrides both the `CMD` and the `ENTRYPOINT` set by the Dockerfile. It should be specified as an array of strings, as seen in the example above.
</div>

            <article class="px-10 flex-auto [body_:where(&>*)]:mx-auto [body_:where(&>*)]:max-w-2xl [body:not(.toc)_:where(&>*)]:lg:mx-[calc(50%-min(50%,35rem))] [body_:where(&>*)]:lg:max-w-3xl min-w-0 relative">
                <nav aria-label="Breadcrumb" class="mb-11 flex items-center space-x-2 text-sm font-semibold text-gray-500">
  <a href="/docs/" class="hover:text-violet-600 transition-colors truncate">Docs</a>
    <span data-lvl="0" class="flex items-center truncate">
      <svg class="w-4 h-4 text-gray-500/50 shrink-0" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
      </svg>
        <a href="/docs/reference" class="ml-2 hover:text-violet-600 transition-colors truncate">Fly.io reference</a>
    </span>
    <span data-lvl="1" class="flex items-center truncate">
      <svg class="w-4 h-4 text-gray-500/50 shrink-0" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
      </svg>
        <span class="ml-2 text-navy-950 truncate">App configuration (fly.toml)</span>
    </span>
</nav>


              <h1 class="w-full font-heading text-navy-950 leading-tight text-3xl mb-4">
                App configuration (fly.toml)
              </h1>

              <p>You can configure an app for deployment on Fly.io using a <code>fly.toml</code> file. Configuration of builds, environment variables, internet-exposed services, disk mounts, and release commands go here. <code>fly.toml</code> configuration applies for apps managed by <a href='/docs/launch/' title=''>Fly Launch commands</a>.</p>
<h2 id='app-configuration-files' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#app-configuration-files' aria-label='Anchor'></a><span class='plain-code'>App configuration files</span></h2>
<p>Most of the time you&rsquo;ll use the <code>fly.toml</code> file that you get automatically when you run <code>fly launch</code> to create an app. There are also ways to re-use config files and to generate them in different formats.</p>
<h3 id='ways-to-get-a-config-file' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#ways-to-get-a-config-file' aria-label='Anchor'></a><span class='plain-code'>Ways to get a config file</span></h3>
<ul>
<li>Run <a href='/docs/flyctl/launch/' title=''><code>flyctl launch</code></a> in your project source directory to create a new app and <code>fly.toml</code> file automatically.
</li><li>Run <a href='/docs/flyctl/config-save/' title=''><code>flyctl config save -a &lt;existing-app-name&gt;</code></a> to download a <code>fly.toml</code> file from an existing app.
</li><li>Create one by hand with help from this reference, or copy and modify an example file.
</li></ul>
<h3 id='config-file-formats' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#config-file-formats' aria-label='Anchor'></a><span class='plain-code'>Config file formats</span></h3>
<p>The default configuration file generated by Fly Launch is called <code>fly.toml</code>.</p>

<p>TOML is a simple <a href='https://github.com/toml-lang/toml' title=''>configuration file format<svg role='img' width='14' height='14' class='inline-flex ml-2 self-center pointer-events-none' viewBox='0 0 14 14'><g buffered-rendering='static' fill='none' stroke='currentColor' stroke-width='1.3' stroke-linecap='round' stroke-linejoin='round'><path d='M12.625 4.825c0-2.318-1.882-4.2-4.2-4.2h-3.6a4.202 4.202 0 00-4.2 4.2v3.6c0 2.318 1.882 4.2 4.2 4.2h3.6c2.318 0 4.2-1.882 4.2-4.2v-3.6zM4.482 8.625l4-4'/><path d='M8.482 7.297V4.625H5.81'/></g></svg></a>. If you&rsquo;re a VSCode user, then you can install the <a href='https://marketplace.visualstudio.com/items?itemName=tamasfe.even-better-toml' title=''>Even Better TOML<svg role='img' width='14' height='14' class='inline-flex ml-2 self-center pointer-events-none' viewBox='0 0 14 14'><g buffered-rendering='static' fill='none' stroke='currentColor' stroke-width='1.3' stroke-linecap='round' stroke-linejoin='round'><path d='M12.625 4.825c0-2.318-1.882-4.2-4.2-4.2h-3.6a4.202 4.202 0 00-4.2 4.2v3.6c0 2.318 1.882 4.2 4.2 4.2h3.6c2.318 0 4.2-1.882 4.2-4.2v-3.6zM4.482 8.625l4-4'/><path d='M8.482 7.297V4.625H5.81'/></g></svg></a> extension for automatic <code>fly.toml</code> validation and hints drawn from this documentation.</p>

<p>If you want your config file in JSON or YAML format, use the <code>--json</code> and <code>--yaml</code> options in flyctl commands:</p>

<ul>
<li>Add the <code>--yaml</code> or <code>--json</code> options to <code>fly launch</code>.
</li><li>For existing apps, run <code>fly config save -a &lt;existing-app-name</code> and specify <code>--yaml</code> or <code>--json</code>. Remove your <code>fly.toml</code> file when done as it takes precedence.
</li><li>Run <code>fly config show --local</code> to preview different formats in your terminal. <code>fly config show</code> defaults to JSON, but you can also specify <code>--toml</code> or <code>--yaml</code> options.
</li></ul>
<h2 id='the-app-name' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-app-name' aria-label='Anchor'></a><span class='plain-code'>The <code>app</code> name</span></h2>
<p>The first key/value in any <code>fly.toml</code> file is the application name. This will also be used to create the host name that the application will use by default. For example:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-3lm6kzpj"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-3lm6kzpj"><span class="py">app</span> <span class="p">=</span> <span class="s">"restless-fire-6276"</span>
</code></pre>
  </div>
</div>
<p>Whenever <code>flyctl</code> is run, it will look for a <code>fly.toml</code> file in the current directory and use the application name in that file. This behavior can be overridden by using the <code>-a</code> flag to set the application name, or on some commands (such as <code>deploy</code>) by using a <code>-c</code> flag to point to a different <code>fly.toml</code> file.</p>
<h2 id='primary-region' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#primary-region' aria-label='Anchor'></a><span class='plain-code'>Primary region</span></h2>
<p><code>fly deploy</code> uses the <code>primary_region</code> option to determine where to create new Machines, as well as to set the <code>PRIMARY_REGION</code> environment variable within the Machines it deploys. Replace <code>ord</code> with the three-letter code for your <a href='/docs/reference/regions/' title=''>Fly Region</a> of choice.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-bg3kw3la"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-bg3kw3la"><span class="py">primary_region</span> <span class="p">=</span> <span class="s">"ord"</span>
</code></pre>
  </div>
</div><h2 id='runtime-options' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#runtime-options' aria-label='Anchor'></a><span class='plain-code'>Runtime options</span></h2>
<p>The following options are available to control the lifecycle of a running application. These are optional and can be placed at the top level of the <code>fly.toml</code> file:</p>
<h3 id='kill_signal-option' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#kill_signal-option' aria-label='Anchor'></a><span class='plain-code'><code>kill_signal</code> option</span></h3>
<p>When shutting down a Fly Machine, Fly.io sends a <code>SIGINT</code> signal to the running process by default. Typically this triggers a hard shutdown option on most applications. The <code>kill_signal</code> option lets you override that with a different signal so that you can trigger a softer, less disruptive shutdown: <code>SIGTERM</code>, <code>SIGQUIT</code>, <code>SIGUSR1</code>, <code>SIGUSR2</code>, <code>SIGKILL</code>, or <code>SIGSTOP</code>. </p>

<p>For example, to set the kill signal to SIGTERM, you would add:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-t9gxxdcy"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-t9gxxdcy"><span class="py">kill_signal</span> <span class="p">=</span> <span class="s">"SIGTERM"</span>
</code></pre>
  </div>
</div><h3 id='kill_timeout-option' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#kill_timeout-option' aria-label='Anchor'></a><span class='plain-code'><code>kill_timeout</code> option</span></h3><div class="warning"><p>Note: <code>kill_timeout</code> settings should be considered best-effort, and your app needs to be prepared to handle shorter stopping times</p>
</div>
<p>This sets how long Fly.io waits (in seconds) after sending the <code>kill_signal</code> before moving on to a forced shutdown. Set <code>kill_timeout</code> to a value that gives your app enough time to exit gracefully. The default is 5 seconds. You can set it up to a maximum of 300 seconds (5 minutes).</p>

<p>For example, to set the timeout to two minutes:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-8ct3hnw7"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-8ct3hnw7"><span class="py">kill_timeout</span> <span class="p">=</span> <span class="mi">120</span>
</code></pre>
  </div>
</div><h3 id='how-the-shutdown-sequence-works' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#how-the-shutdown-sequence-works' aria-label='Anchor'></a><span class='plain-code'>How the shutdown sequence works</span></h3>
<p>These options come into play during controlled shutdowns such as:</p>

<ul>
<li>When using <code>fly deploy</code>
</li><li>When using <code>fly machine stop</code>
</li><li>When a machine stops due to <code>auto_stop_machines</code>
</li></ul>

<p>The sequence looks like this:</p>

<ol>
<li><p>Fly sends the <code>kill_signal</code> to the main process (defined by your Dockerfileâs <code>ENTRYPOINT</code> or <code>CMD</code>, or overridden via <code>--entrypoint</code>).</p>
</li><li><p>It waits for up to <code>kill_timeout</code> seconds.</p>
</li><li><p>Then it sends <code>SIGTERM</code> unconditionally.</p>
</li></ol>

<p>This gives your app a chance to shut down cleanly: finish requests, close connections, stop taking new work. It&rsquo;s designed for apps that can wrap up in under five minutes.</p>

<p>Many workers will re-queue unfinished jobs so another machine can pick them up. If your app doesn&rsquo;t support that, or needs longer to shut down, you&rsquo;ll want to plan around that.</p>

<p>You can watch shutdown behavior by watching <code>fly logs</code> during a deploy or idle stop.</p>
<h2 id='console-command' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#console-command' aria-label='Anchor'></a><span class='plain-code'>Console command</span></h2>
<p>The command to run when you run the <a href='/docs/flyctl/console/' title=''><code>fly console</code> command</a>. Configure the <code>console_command</code> field with the command that opens your framework&rsquo;s console, and then <code>fly console</code> will run that command automatically in a new, dedicated Machine. The new Machine is configured with the image and environment from your appâs latest release, but your app isnât started, and no traffic will be routed to it. The Machine gets destroyed when you exit the console.</p>

<p>Here&rsquo;s an example of a console command for Django:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-kctnv3va"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-kctnv3va"><span class="py">console_command</span> <span class="p">=</span> <span class="s">"/code/manage.py shell"</span>
</code></pre>
  </div>
</div><h2 id='swap_size_mb-option' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#swap_size_mb-option' aria-label='Anchor'></a><span class='plain-code'><code>swap_size_mb</code> option</span></h2>
<p>Setting this option enables Linux swap on Machines. A swap partition is created with size <code>swap_size_mb</code>, expressed in megabytes.</p>

<p>Swapping to disk can help avoid out-of-memory crashes on brief spikes in memory use. Swap is much slower than RAM, so if performance is important, a better solution is to increase the Machine memory with <a href='/docs/flyctl/scale-memory/' title=''><code>fly scale memory</code></a>.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-43x5sqc0"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-43x5sqc0"><span class="py">swap_size_mb</span> <span class="p">=</span> <span class="mi">512</span>
</code></pre>
  </div>
</div><h2 id='the-build-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-build-section' aria-label='Anchor'></a><span class='plain-code'>The <code>build</code> section</span></h2>
<p>The optional build section contains key/values concerned with how the application should be built. You can read more about builders in <a href='/docs/reference/builders/' title=''>Builders and Fly</a></p>
<h3 id='builder' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#builder' aria-label='Anchor'></a><span class='plain-code'>builder</span></h3><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-jczcknpd"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-jczcknpd"><span class="nn">[build]</span>
  <span class="py">builder</span> <span class="p">=</span> <span class="s">"paketobuildpacks/builder:base"</span>
  <span class="py">buildpacks</span> <span class="p">=</span> <span class="nn">["gcr.io/paketo-buildpacks/nodejs"]</span>
</code></pre>
  </div>
</div>
<p>The builder &ldquo;builder&rdquo; uses CNB Buildpacks and Builders to create the application image. These are third party toolkits which can use Heroku compatible build processes or other tools. The tooling is all managed by the buildpacks and buildpacks are assembled into CNB Builders - images complete with the buildpacks and OS to run the tool chains.</p>

<p>In our example above, the builder is being set to use <a href='https://paketo.io' title=''>Paketo&rsquo;s all-purpose builder</a> with the NodeJS buildpack.</p>
<h3 id='specify-a-docker-image' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#specify-a-docker-image' aria-label='Anchor'></a><span class='plain-code'>Specify a Docker image</span></h3><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-rv502dbc"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-rv502dbc"><span class="nn">[build]</span>
  <span class="py">image</span> <span class="p">=</span> <span class="s">"flyio/hellofly:latest"</span>
</code></pre>
  </div>
</div>
<p>The image builder is used when you want to immediately deploy an existing public image. When deployed, there will be no build process; the image will be prepared and uploaded to Fly.io infrastructure as is. This option is useful if you already have a working Docker image you want to deploy on Fly.io or you want a well known Docker image from a repository to be run.</p>
<h3 id='specify-a-dockerfile' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#specify-a-dockerfile' aria-label='Anchor'></a><span class='plain-code'>Specify a Dockerfile</span></h3><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-dggum2cp"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-dggum2cp"><span class="nn">[build]</span>
  <span class="py">dockerfile</span> <span class="p">=</span> <span class="s">"Dockerfile.test"</span>
</code></pre>
  </div>
</div>
<p><code>dockerfile</code> accepts a relative path to a Dockerfile, or a URL. By default, <code>flyctl</code> looks for <code>Dockerfile</code> in the application root.</p>
<div class="note icon"><p><strong class="font-semibold text-navy-950">Gotchas:</strong></p>

<ul>
<li>This option will not change the Docker context path, which is set to the project root directory by default. If you want the <code>Dockerfile</code> to use its containing directory as the context root, use <code>fly deploy &lt;directory&gt;</code>.
</li><li>When specifying a local Dockerfile, make sure itâs not excluded from the Docker build context in your <code>.dockerignore</code>.

</li></ul>
</div><h3 id='specify-a-docker-ignore-file' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#specify-a-docker-ignore-file' aria-label='Anchor'></a><span class='plain-code'>Specify a Docker ignore file</span></h3><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-l3jk2gk2"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-l3jk2gk2"><span class="nn">[build]</span>
  <span class="py">ignorefile</span> <span class="p">=</span> <span class="s">"/path/.dockerignore"</span>
</code></pre>
  </div>
</div>
<p><code>ignorefile</code> accepts a relative path to a <code>.dockerignore</code> file. By default, <code>flyctl</code> looks for the <code>.dockerignore</code> file in the working directory.</p>
<h3 id='specify-a-multistage-docker-build-target' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#specify-a-multistage-docker-build-target' aria-label='Anchor'></a><span class='plain-code'>Specify a multistage Docker build target</span></h3><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-wdvor38e"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-wdvor38e"><span class="nn">[build]</span>
  <span class="py">build-target</span> <span class="p">=</span> <span class="s">"test"</span>
</code></pre>
  </div>
</div>
<p>If your Dockerfile has <a href='https://docs.docker.com/develop/develop-images/multistage-build/' title=''>multiple stages</a>, you can specify one as the target for deployment. The target stage must have a <code>CMD</code> or <code>ENTRYPOINT</code> set.</p>
<h3 id='specify-docker-build-arguments' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#specify-docker-build-arguments' aria-label='Anchor'></a><span class='plain-code'>Specify Docker build arguments</span></h3>
<p>You can pass <a href='https://docs.docker.com/engine/reference/commandline/build/#set-build-time-variables---build-arg' title=''>build-time arguments</a> to both Dockerfile and Buildpack builds using the <code>[build.args]</code> sub-section:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-62ug2zts"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-62ug2zts"><span class="nn">[build.args]</span>
  <span class="py">USER</span><span class="p">=</span><span class="s">"plugh"</span>
  <span class="py">MODE</span><span class="p">=</span><span class="s">"production"</span>
</code></pre>
  </div>
</div>
<p>You can also pass build arguments to <code>flyctl deploy</code> using <code>--build-arg</code>. Command line args take priority over args with the same name in <code>fly.toml</code>.</p>

<p>Note that build arguments are <em>not available</em> in the runtime container. If you need build information at runtime - like a Git revision - store it in a file at build time, like:</p>
<div class="highlight-wrapper group relative ">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-xg9rc6qx"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-xg9rc6qx">RUN echo $GIT_REVISION &gt; REVISION
</code></pre>
  </div>
</div>
<p>Likewise, application environment variables and secrets are not available to builds.</p>
<h2 id='the-deploy-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-deploy-section' aria-label='Anchor'></a><span class='plain-code'>The <code>deploy</code> section</span></h2>
<p>This section configures deployment-related settings such as the release command or deployment strategy.</p>
<h3 id='run-one-off-commands-before-releasing-a-deployment' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#run-one-off-commands-before-releasing-a-deployment' aria-label='Anchor'></a><span class='plain-code'>Run one-off commands before releasing a deployment</span></h3>
<p>The <code>release_command</code> lets you run a one-off task, like a database migration, before any of your deployed Machines are created or updated. It runs in a temporary Machine using the newly built image, once per deploy attempt. This is a common pattern for frameworks like Rails or Phoenix, but it&rsquo;s not limited to them. You can use it for any setup task that needs to run once, not on every app boot.</p>

<p>If the command fails, the deploy will stop. The goal is to make deployment safer: do the risky part first, and only continue if it succeeds.</p>

<p>To run a command in a temporary Machine <em>before</em> the release is deployed, define a <code>release_command</code>:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-4e3xvyvz"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-4e3xvyvz"><span class="nn">[deploy]</span>
  <span class="py">release_command</span> <span class="p">=</span> <span class="s">"bin/rails db:prepare"</span>
</code></pre>
  </div>
</div>
<p>The <code>release_command</code> value replaces <code>CMD</code> in the temporary Machine. This is most commonly used for database migrations, but can be any task that prepares your app for the new release. Note that the Docker image&rsquo;s <code>ENTRYPOINT</code> is not overridden by the <code>release_command</code>; <code>ENTRYPOINT</code> always runs.</p>

<p>By default, the temporary Machine has full access to the network, environment variables and secrets, but <em>not</em> to persistent volumes. Changes made to the file system on the temporary Machine will not persist. It has no volumes attached, and the Machine is destroyed after the command completes. The building/compiling of your project should be done in your Dockerfile. If you need to modify persistent volumes or configure your application, consider making use of <code>CMD</code> or <code>ENTRYPOINT</code> in your Dockerfile, or of a <a href='#the-processes-section' title=''>process group command</a>.</p>

<p>The temporary Machine inherits the size from the largest Machine in the default process group of the app as of flyctl v0.0.508 (they also default larger on empty/new apps, using the Machine <code>shared-cpu-2x</code> preset). The default process group is defined as either the <code>app</code> process, or the first process group in alphabetical order (if an <code>app</code> process is not present).</p>

<p>It is also possible to explicitly define the Machine size by setting <code>[deploy.release_command_vm]</code>, for example:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-kb5rlrbq"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-kb5rlrbq"><span class="nn">[deploy]</span>
  <span class="py">release_command</span> <span class="p">=</span> <span class="s">"bin/rails db:prepare"</span>

  <span class="nn">[deploy.release_command_vm]</span>
    <span class="py">size</span> <span class="p">=</span> <span class="s">"performance-1x"</span>
    <span class="py">memory</span> <span class="p">=</span> <span class="s">"8gb"</span>
</code></pre>
  </div>
</div>
<p>A non-zero exit status from this command will stop the deployment. <code>fly deploy</code> will display logs from the command. Logs are available via <code>fly logs</code> as well.</p>

<p>To ensure the command runs in a specific region, such as <code>dfw</code>, set <code>PRIMARY_REGION = &#39;dfw&#39;</code> in your application environment in <code>fly.toml</code> or with <code>fly deploy -e PRIMARY_REGION=dfw</code>. Setting <code>PRIMARY_REGION</code> is important if you&rsquo;re running <a href='/docs/postgres/high-availability-and-global-replication' title=''>database replicas in multiple regions</a>.</p>

<p>The environment variable <code>RELEASE_COMMAND=1</code> is set within the temporary release Machine. You can use this to define behavior in your Dockerfile&rsquo;s <code>ENTRYPOINT</code>  that&rsquo;s conditional on being run on a release Machine.</p>

<p>By default, the release command has 5 minutes to complete before it is killed. It is possible to increase or decrease the timeout with <code>fly deploy --release-command-timeout=10m</code> or by setting <code>release_command_timeout = &quot;10m&quot;</code> in <code>[deploy]</code> section of <code>fly.toml</code>.</p>

<p>For more context, see our <a href='/docs/blueprints/seamless-deployments/#one-off-tasks-with-release_command' title=''>Seamless Deployments guide</a>.</p>
<div class="callout"><p><strong class="font-semibold text-navy-950">Things to know about <code>release_command</code>:</strong></p>

<ul>
<li>Replaces <code>CMD</code>, but not <code>ENTRYPOINT</code>
</li><li>Runs in a temporary Machine with no volumes
</li><li>Inherits environment, secrets, and network config
</li><li>Fails the deploy on a non-zero exit code
</li><li>Times out after 5 minutes by default (configurable)
</li><li>Logs are streamed to <code>fly deploy</code> and <code>fly logs</code>
</li></ul>
</div><h3 id='picking-a-deployment-strategy' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#picking-a-deployment-strategy' aria-label='Anchor'></a><span class='plain-code'>Picking a deployment strategy</span></h3><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-etpv2o68"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-etpv2o68"><span class="nn">[deploy]</span>
  <span class="py">strategy</span> <span class="p">=</span> <span class="s">"bluegreen"</span>
</code></pre>
  </div>
</div>
<p><code>strategy</code> controls the way a new release replaces the previous release. Different strategies offer trade-offs between downtime and reliability.</p>

<p><code>strategy</code> may also be specified at deploy time with <code>flyctl deploy --strategy</code>.</p>

<p>The available strategies are:</p>

<p><strong class='font-semibold text-navy-950'>rolling</strong>: The default strategy for apps with or without volumes. One by one, each running Machine is taken down and replaced by a new release Machine.</p>

<p><strong class='font-semibold text-navy-950'>immediate</strong>: Replace all Machines with new releases immediately without waiting for health checks to pass. This is useful in emergency situations where you&rsquo;re confident about release health and can&rsquo;t wait for health checks.</p>

<p><strong class='font-semibold text-navy-950'>canary</strong>: Boots a single, new Machine with the new release, verifies its health, and then proceeds with a <code>rolling</code> restart strategy. The <code>canary</code> strategy cannot be used for Machines with attached volumes.</p>

<p><strong class='font-semibold text-navy-950'>bluegreen</strong>: For every running Machine, a new one is booted alongside it in the same region. Once all of the new Machines pass health checks, traffic gets migrated to the new Machines and the old Machines are destroyed. If your app is scaled to 2 or more Machines, this strategy can reduce deploy time by running tasks in parallel. You need to configure at least one health check to use the <code>bluegreen</code> strategy. The <code>bluegreen</code> strategy cannot be used for Machines with attached volumes.</p>
<div class="note icon"><p><strong class="font-semibold text-navy-950">Note:</strong> If <code>max-per-region</code> is set to 1, then the default strategy is set to <code>rolling</code>. This happens because <code>canary</code> needs to temporarily run more than one Machine to work correctly. The <code>bluegreen</code> strategy will behave similarly with <code>max-per-region</code> set to 1.</p>
</div><h4 id='rolling-deploy-configuration' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#rolling-deploy-configuration' aria-label='Anchor'></a><span class='plain-code'>Rolling deploy configuration</span></h4><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-20r8xq7a"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-20r8xq7a"><span class="nn">[deploy]</span>
  <span class="py">strategy</span> <span class="p">=</span> <span class="s">"rolling"</span>
  <span class="py">max_unavailable</span> <span class="p">=</span> <span class="mi">1</span>
</code></pre>
  </div>
</div>
<p>For rolling deploys, you can use <code>max_unavailable</code> to control how many Machines can be down at a time.</p>

<p>Whole number values, greater than or equal to one, specify exactly how many Machines can be down at a time. For example, a value of &ldquo;1&rdquo; would update one-at-a-time.</p>

<p>Fractional values, between zero and one, provide a percentage of Machines that can be down at a time. For example, the default value of 0.33 means that a maximum of one third of your Machines can be down during a deploy.</p>
<h3 id='dealing-with-timeout-errors-while-deploying-a-new-version' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#dealing-with-timeout-errors-while-deploying-a-new-version' aria-label='Anchor'></a><span class='plain-code'>Dealing with timeout errors while deploying a new version</span></h3>
<p>Every time <code>fly deploy</code> runs, it builds a new Docker image, pushes it to an internal registry, and then updates or creates Machines for the app. Sometimes the image is too large, or the platform is slower than usual pulling the new image layers, triggering the default 5 minute timeout waiting for the Machine to be in a started state.</p>

<p>The good thing is that this timeout can be controlled in two ways, with the <code>--wait-timeout</code> option, for example <code>fly deploy --wait-timeout=10m</code>, or as a more permanent <code>fly.toml</code> setting:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-dp2alq7q"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-dp2alq7q"><span class="nn">[deploy]</span>
<span class="py">wait_timeout</span> <span class="p">=</span> <span class="s">"10m"</span>
</code></pre>
  </div>
</div><h2 id='the-env-variables-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-env-variables-section' aria-label='Anchor'></a><span class='plain-code'>The <code>env</code> variables section</span></h2><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-iz3shfui"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-iz3shfui"><span class="nn">[env]</span>
  <span class="py">LOG_LEVEL</span> <span class="p">=</span> <span class="s">"debug"</span>
  <span class="py">RAILS_ENV</span> <span class="p">=</span> <span class="s">"production"</span>
  <span class="py">S3_BUCKET</span> <span class="p">=</span> <span class="s">"my-app-production"</span>
</code></pre>
  </div>
</div>
<p>This optional section allows setting non-sensitive information as environment variables in the application&rsquo;s <a href='/docs/machines/runtime-environment/' title=''>runtime environment</a>.</p>

<p>For sensitive information, such as credentials or passwords, use the <a href='/docs/reference/secrets' title=''>secrets CLI command</a>.</p>

<p>Env variable names are strictly case-sensitive and cannot begin with <code>FLY_</code> (as this could clash with the <a href='/docs/machines/runtime-environment' title=''>runtime environment</a>). Env values can only be strings.</p>

<p>Secrets take precedence over env variables with the same name.</p>

<p><strong class='font-semibold text-navy-950'>Note:</strong> In Apps V2, the <a href='#primary-region' title=''><code>primary_region</code> option</a> sets the <code>PRIMARY_REGION</code> environment variable within a Machine and overrides any value set in the <code>[env]</code> section.</p>
<h2 id='the-http_service-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-http_service-section' aria-label='Anchor'></a><span class='plain-code'>The <code>http_service</code> section</span></h2>
<p>For apps that only need HTTP and HTTPS services, you can replace the <code>[[services]]</code> section with this simpler alternative.</p>

<p>An <code>[http_service]</code> section defines a service that listens on ports 80 and 443. Port 80 will have an HTTP handler. Port 443 will have a TLS and HTTP handler. You can configure additional services on different ports by adding <code>[[services]]</code> sections.</p>

<p>As with the more verbose <a href='#the-services-sections' title=''><code>[[services]]</code></a>, you can specify a list of <a href='#the-processes-section' title=''>processes</a> to limit the service definition to Machines belonging to process groups that should receive HTTP requests.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-bxbppgkh"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-bxbppgkh"><span class="nn">[http_service]</span>
  <span class="py">internal_port</span> <span class="p">=</span> <span class="mi">8080</span>
  <span class="py">force_https</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="py">auto_stop_machines</span> <span class="p">=</span> <span class="s">"stop"</span>
  <span class="py">auto_start_machines</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="py">min_machines_running</span> <span class="p">=</span> <span class="mi">0</span>
  <span class="nn">[http_service.concurrency]</span>
    <span class="py">type</span> <span class="p">=</span> <span class="s">"requests"</span>
    <span class="py">soft_limit</span> <span class="p">=</span> <span class="mi">200</span>
    <span class="py">hard_limit</span> <span class="p">=</span> <span class="mi">250</span>
</code></pre>
  </div>
</div>
<ul>
<li><code>processes</code>: For apps with multiple processes. The process group that this service belongs to. Define process groups in the <a href='#the-processes-section' title=''>processes</a> section.
</li><li><code>internal_port</code>: The port this service (and application) will use to communicate with clients. The default is 8080. We recommend applications use the default.
</li><li><code>force_https</code>: A Boolean which determines whether to enforce HTTP to HTTPS redirects.
</li><li><code>auto_stop_machines</code>: The action, if any, that Fly Proxy should take when the app is idle for several minutes. Options are <code>&quot;off&quot;</code>, <code>&quot;stop&quot;</code>, or <code>&quot;suspend&quot;</code>. If <code>&quot;off&quot;</code>, Fly Proxy will never stop Machines. If <code>&quot;stop&quot;</code>, Fly Proxy stops Machines when the app has excess capacity. If <code>&quot;suspend&quot;</code>, Fly Proxy suspends Machines (if possible) when the app has excess capacity. Starting a Machine from a <code>suspended</code> state is faster than starting a Machine from a <code>stopped</code> state, but there are <a href='https://community.fly.io/t/autosuspend-is-here-machine-suspension-is-enabled-everywhere/20942' title=''>some caveats</a>. If there&rsquo;s only one Machine in a region, then the Machine is stopped or suspended if it has no traffic. The Fly Proxy runs a process to automatically stop Machines every few minutes. The default if not set is <code>&quot;off&quot;</code>.
</li><li><code>auto_start_machines</code>: Whether to automatically start an application&rsquo;s Machines when a new request is made to the application and there&rsquo;s no excess capacity, per region. If there&rsquo;s only one Machine in a region, then it&rsquo;s started whenever a request is made to the application. The default if not set is <code>true</code>.
</li><li><code>min_machines_running</code>: The number of Machines to keep running, in the primary region only, when <code>auto_stop_machines</code> is <code>&quot;stop&quot;</code> or <code>&quot;suspend&quot;</code>. The default if not set is <code>0</code>.
</li></ul>
<div class="important icon"><p>We recommend configuring <code>auto_stop_machines</code> and <code>auto_start_machines</code> so that they are both enabled or both disabled, to avoid having Machines that either never start or never stop. Learn more about <a href="/docs/reference/fly-proxy-autostop-autostart/" title="">how Fly Proxy autostop/autostart works</a>, including how Fly Proxy determines excess capacity in a region using the <code>soft_limit</code> setting.</p>
</div><h3 id='http_service-concurrency' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-concurrency' aria-label='Anchor'></a><span class='plain-code'><code>http_service.concurrency</code></span></h3>
<p>The <code>http_service</code> concurrency section configures how to measure load for an application to inform Fly Proxy <a href='/docs/reference/load-balancing' title=''>load balancing</a> and <a href='/docs/launch/autostop-autostart/' title=''>autostop/autostart</a>. The <code>[http_service.concurrency]</code> section has the same settings as <code>[services.concurrency]</code>, which are:</p>

<ul>
<li><code>type</code> specifies what metric is used to determine when to auto start or stop, or when a given Machine should receive more or less traffic (load balancing). The two supported values are <code>connections</code> and <code>requests</code>.
</li></ul>

<p><strong class='font-semibold text-navy-950'>connections</strong>: Load balance and scale based on the number of concurrent TCP connections. This is the default when unspecified. This is also the default when <code>fly.toml</code> is created with <code>fly launch</code>. A new connection is established for each HTTP request; consider the <code>requests</code> type for HTTP apps.</p>

<p><strong class='font-semibold text-navy-950'>requests</strong>: Load balance and scale based on the number of HTTP requests. This is recommended for web services, because the Fly Proxy can pool and reuse connections for requests.</p>

<ul>
<li><code>hard_limit</code> : When a Fly Machine is at or over this number of concurrent connections or requests, the system will stop sending new traffic to that Machine. If unset, no <code>hard_limit</code> is enforced.
</li><li><code>soft_limit</code> : When a Fly Machine is at or over this number of concurrent connections or requests, the system will deprioritize sending new traffic to that Machine and only send it to that Machine if all other Machines are also at or above their <code>soft_limit</code>. This setting is also used to determine excess capacity for the <a href='/docs/launch/autostop-autostart/' title=''>autostop/autostart feature</a>. If unset, the default is 20.
</li></ul>

<p>For more information about concurrency settings, see <a href='/docs/reference/concurrency/' title=''>Guidelines for concurrency settings</a>.</p>
<h3 id='http_service-http_options-idle_timeout' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-idle_timeout' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.idle_timeout</code></span></h3>
<p>Configure an idle-timeout for connections to your app.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-l0u2k6rj"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-l0u2k6rj">  <span class="nn">[http_service.http_options]</span>
    <span class="py">idle_timeout</span> <span class="p">=</span> <span class="mi">600</span>
</code></pre>
  </div>
</div><h3 id='http_service-http_options-response-pristine' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-response-pristine' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.response.pristine</code></span></h3>
<p>Configures Fly Proxy to not add any Fly headers to HTTP responses. The following response headers won&rsquo;t be added and won&rsquo;t be modified if returned by the app:</p>

<ul>
<li><code>Server</code>
</li><li><code>Via</code>
</li><li><code>Fly-Request-Id</code>
</li><li><code>Fly-Cache-Status</code>
</li></ul>

<p>This is useful if you are building a platform on top of Fly and have your own load balancer that already adds similar response headers.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-i9ywtqj1"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-i9ywtqj1">  <span class="nn">[http_service.http_options.response]</span>
    <span class="py">pristine</span> <span class="p">=</span> <span class="kc">true</span>
</code></pre>
  </div>
</div><h3 id='http_service-http_options-response-headers' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-response-headers' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.response.headers</code></span></h3>
<p>Add or remove HTTP response headers.</p>

<p>In the following example, <code>Example-Header</code> will be removed from the final response that Fly Proxy sends, while <code>Example-Header-1</code> and <code>Example-Multi-Value</code> and their values will be added to the response header.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-2szoqiq7"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-2szoqiq7">  <span class="nn">[http_service.http_options.response.headers]</span>
    <span class="py">Example-Header</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="py">Example-Header-1</span> <span class="p">=</span> <span class="s">"value"</span>
    <span class="py">Example-Multi-Value</span> <span class="p">=</span> <span class="p">[</span><span class="s">"value1"</span><span class="p">,</span> <span class="s">"value2"</span><span class="p">]</span>
</code></pre>
  </div>
</div><h3 id='http_service-http_options-h2_backend' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-h2_backend' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.h2_backend</code></span></h3>
<p>Indicates whether the app supports HTTP/2 cleartext (H2C) with prior knowledge or not.</p>

<p>In the following example, <code>h2_backend</code> is set to <code>true</code>, which allows the app to expose HTTP/2-only service, like gRPC, via <code>http</code> handler.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-lh1jaqth"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-lh1jaqth">  <span class="nn">[http_service.http_options]</span>
    <span class="py">h2_backend</span> <span class="p">=</span> <span class="kc">true</span>
</code></pre>
  </div>
</div><h3 id='http_service-http_options-replay_cache' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-replay_cache' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.replay_cache</code></span></h3>
<p>Configures session-based replay caching. When your app issues a <code>fly-replay</code> response, Fly Proxy can cache that replay decision based on cookie or header values, automatically applying it to subsequent requests with the same identifier.</p>

<p>Each <code>http_options.replay_cache</code> entry configures a caching rule:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-9yftstxv"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-9yftstxv"><span class="nn">[[http_service.http_options.replay_cache]]</span>
  <span class="py">path_prefix</span> <span class="p">=</span> <span class="s">"/"</span>
  <span class="py">ttl_seconds</span> <span class="p">=</span> <span class="mi">300</span>
  <span class="py">type</span> <span class="p">=</span> <span class="s">"cookie"</span>
  <span class="py">name</span> <span class="p">=</span> <span class="s">"session_id"</span>
  <span class="py">allow_bypass</span> <span class="p">=</span> <span class="kc">false</span>
</code></pre>
  </div>
</div>
<p>For documentation on replays, and further explanation on caching, see <a href='/docs/networking/dynamic-request-routing/#session-based-replay-caching' title=''>Session-based Replay Caching</a>.</p>
<h4 id='http_service-http_options-replay_cache-path_prefix' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-replay_cache-path_prefix' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.replay_cache.path_prefix</code></span></h4>
<p>Path pattern where this caching rule applies. </p>

<p>This can be a path like <code>/api</code> (applies to any hostname) or include a hostname like <code>example.com/api</code>. When multiple rules match a request, the longest matching path takes precedence. </p>

<p>If including a hostname, do not include the protocol or the port. If no hostname is provided, the cache rule applies to all hostnames, but each hostname retains a separate cache.</p>

<p>Implicitly ends with <code>/*</code>, meaning that <code>example.com/api</code>, <code>example.com/api/</code>, and <code>example.com/api/*</code> are all equivalent.</p>
<h4 id='http_service-http_options-replay_cache-ttl_seconds' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-replay_cache-ttl_seconds' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.replay_cache.ttl_seconds</code></span></h4>
<p>How many seconds to cache the replay decision. Minimum value is 10 seconds.</p>
<h4 id='http_service-http_options-replay_cache-type' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-replay_cache-type' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.replay_cache.type</code></span></h4>
<p>Either <code>&quot;cookie&quot;</code> or <code>&quot;header&quot;</code>. Specifies whether to key the cache on a cookie or request header.</p>
<h4 id='http_service-http_options-replay_cache-name' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-replay_cache-name' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.replay_cache.name</code></span></h4>
<p>Name of the cookie or header to use as the cache key.</p>
<h4 id='http_service-http_options-replay_cache-allow_bypass' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-http_options-replay_cache-allow_bypass' aria-label='Anchor'></a><span class='plain-code'><code>http_service.http_options.replay_cache.allow_bypass</code></span></h4>
<p>Optional boolean. When <code>true</code>, allows clients to bypass the cache by setting the <code>fly-replay-cache-control: skip</code> request header. Default is <code>false</code>.</p>
<h3 id='http_service-tls_options' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-tls_options' aria-label='Anchor'></a><span class='plain-code'><code>http_service.tls_options</code></span></h3>
<p>Configure the TLS versions and ALPN protocols that Fly&rsquo;s edge will use to terminate TLS for your application with:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-x74m6x7z"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-x74m6x7z"><span class="nn">[http_service.tls_options]</span>
  <span class="py">alpn</span> <span class="p">=</span> <span class="p">[</span><span class="s">"h2"</span><span class="p">,</span> <span class="s">"http/1.1"</span><span class="p">]</span>
  <span class="py">versions</span> <span class="p">=</span> <span class="p">[</span><span class="s">"TLSv1.2"</span><span class="p">,</span> <span class="s">"TLSv1.3"</span><span class="p">]</span>
  <span class="py">default_self_signed</span> <span class="p">=</span> <span class="kc">false</span>
</code></pre>
  </div>
</div>
<ul>
<li><code>alpn</code>: Array of strings indicating how to handle ALPN negotiations with clients.
</li><li><code>versions</code>: Array of strings indicating which TLS versions are allowed.
</li><li><code>default_self_signed</code>: When <code>true</code>, serve a self-signed certificate if no certificate exists. Default is <code>false</code>. 
</li></ul>

<p>Fly.io can also terminate TLS only and pass through directly to your service. For more information, refer to <a href='/docs/reference/configuration/#services-ports-tls_options' title=''>services.ports.tls_options</a></p>
<h3 id='http_service-checks' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#http_service-checks' aria-label='Anchor'></a><span class='plain-code'><code>http_service.checks</code></span></h3>
<p>To configure health checks for your HTTP service, you can use the <code>http_service.checks</code> section. These checks expect a successful HTTP status in response (i.e, 2xx). Here is an example of a <code>http_service.checks</code> section:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-ibvum0b3"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-ibvum0b3"><span class="nn">[[http_service.checks]]</span>
  <span class="py">grace_period</span> <span class="p">=</span> <span class="s">"10s"</span>
  <span class="py">interval</span> <span class="p">=</span> <span class="s">"30s"</span>
  <span class="py">method</span> <span class="p">=</span> <span class="s">"GET"</span>
  <span class="py">timeout</span> <span class="p">=</span> <span class="s">"5s"</span>
  <span class="py">path</span> <span class="p">=</span> <span class="s">"/"</span>
</code></pre>
  </div>
</div>
<p>Roughly translated, this section says every thirty seconds, perform an HTTP GET on the root path (e.g. <a href="http://appname.fly.dev/">http://appname.fly.dev/</a>) looking for it to return an HTTP 200 status within five seconds. The parameters of a <code>check</code> are listed below.</p>

<p>Times are in milliseconds unless units are specified.</p>

<ul>
<li><code>grace_period</code>: The time to wait after a Machine starts before checking its health. Make sure this is long enough for your app to start up. For example, if your app takes 2 seconds to start up, give it some runway by setting <code>grace_period</code> to at least 3 seconds.
</li><li><code>interval</code>: The time between connectivity checks. There should be a balance between the interval and the grace period. If interval is long and grace_period is shorter than your app&rsquo;s startup time, the health check will take too long, adding to your deployment time.
</li><li><code>timeout</code>: The maximum time a connection can take before being reported as failing its health check.
</li><li><code>method</code>: The HTTP method to be used for the check. If omitted, the default is <code>get</code>.
</li><li><code>path</code>: The path of the URL to be requested.
</li><li><code>protocol</code>: The protocol to be used (<code>http</code> or <code>https</code>). If omitted, the default is <code>http</code>.
</li><li><code>tls_server_name</code>: If the protocol is <code>https</code>, the hostname to use for TLS certificate validation.
</li><li><code>tls_skip_verify</code>: When <code>true</code> (and using HTTPS protocol) skip verifying the certificates sent by the server.
</li><li><code>http_service.checks.headers</code>: This is a sub-section of <code>http_service.checks</code>. It uses the key/value pairs as a specification of header and header values that will get passed with the check call.
</li></ul>
<div class="warning"><p>The health check will not automatically follow any <code>HTTP 301</code> or <code>302</code> redirect, so it will fail if it receives anything other than a <code>200 OK</code> response. This may be an issue if your heath check specifies <code>protocol = http</code> (the default) but your app forces <code>https</code>. You may be able to avoid this redirect and continue using <code>http</code> for your health check by adding <code>X-Forwarded-Proto = "https"</code> to the <code>[http_service.checks.headers]</code> sub-section. </p>
</div><h3 id='the-http_service-machine_checks-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-http_service-machine_checks-section' aria-label='Anchor'></a><span class='plain-code'>The <code>http_service.machine_checks</code> section</span></h3>
<p>You can use the same <code>machine_checks</code> section for HTTP services as for <a href='#services-machine_checks' title=''><code>services</code></a>. The <code>machine_checks</code> section defines parameters for checking the health of a service.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-5ecbqxun"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-5ecbqxun"><span class="nn">[[http_service.machine_checks]]</span>
  <span class="py">image</span> <span class="p">=</span> <span class="s">"curlimages/curl"</span>
  <span class="py">entrypoint</span> <span class="p">=</span> <span class="p">[</span><span class="s">"/bin/sh"</span><span class="p">,</span> <span class="s">"-c"</span><span class="p">]</span>
  <span class="py">command</span> <span class="p">=</span> <span class="p">[</span><span class="s">"curl http://[$FLY_TEST_MACHINE_IP] | grep 'Hello, World!'"</span><span class="p">]</span>
  <span class="py">kill_signal</span> <span class="p">=</span> <span class="s">"SIGKILL"</span>
  <span class="py">kill_timeout</span> <span class="p">=</span> <span class="s">"5s"</span>
</code></pre>
  </div>
</div><h2 id='the-services-sections' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-services-sections' aria-label='Anchor'></a><span class='plain-code'>The <code>services</code> sections</span></h2>
<p>The <code>services</code> sections define how Fly Proxy connects requests that hit an app&rsquo;s public <a href='/docs/networking/services/' title=''>Anycast</a> or private <a href='/docs/networking/flycast' title=''>Flycast</a> address to services running within Machines, and configure other Fly Proxy behavior for a service. If a service only needs HTTP and HTTPS on standard ports, you can use the less verbose <a href='#the-http_service-section' title=''><code>http_service</code></a>.</p>

<p>A <code>services</code> section itself is a table of tables in TOML, so it is delimited with double square brackets. Tables within <code>[[services]]</code> configure additional features and behaviors for the service, and are described in subsequent sections. </p>
<div class="warning"><p>At least one <a href="#services-ports" title=""><code>services.ports</code></a> entry is required for each <code>services</code> section, to set a port and handler for incoming requests. </p>
</div>
<p>An app can have:</p>

<ul>
<li>No <code>services</code> section (and no <a href='#the-http_service-section' title=''><code>http_service</code> section</a>): The application cannot be reached from the public internet, nor by a <a href='/docs/networking/flycast/' title=''>Flycast</a> address; this is typical of apps that talk only over <a href='/docs/networking/private-networking/' title=''>6PN private networking</a> to other apps on the same network.
</li><li>One <code>services</code> section (or an <a href='#the-http_service-section' title=''><code>http_service</code> section</a>): One internal port mapped to one or more external ports.
</li><li>Multiple <code>services</code> sections (or an <a href='#the-http_service-section' title=''><code>http_service</code> section</a> and one or more <code>services</code> sections): Mapping multiple internal ports to multiple external ports.
</li></ul>

<p>Example (note the double square brackets):</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-qsiozwb9"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-qsiozwb9"><span class="nn">[[services]]</span>
  <span class="py">internal_port</span> <span class="p">=</span> <span class="mi">8080</span>
  <span class="py">protocol</span> <span class="p">=</span> <span class="s">"tcp"</span>
  <span class="py">auto_stop_machines</span> <span class="p">=</span> <span class="s">"stop"</span>
  <span class="py">auto_start_machines</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="py">min_machines_running</span> <span class="p">=</span> <span class="mi">0</span>
</code></pre>
  </div>
</div>
<p>Settings: </p>

<ul>
<li><code>processes</code>: For apps with multiple process groups, the process group or groups that this service belongs to. Define process groups in the <a href='#the-processes-section' title=''>processes</a> section.
</li><li><code>internal_port</code> : The port this service (and application) will use to communicate with clients. The default is 8080. We recommend applications use the default.
</li><li><code>protocol</code> : The protocol that this service will use to communicate. Typically <code>tcp</code> for most applications, but can also be <code>udp</code>.
</li><li><code>auto_stop_machines</code>: The action, if any, that Fly Proxy should take when the app is idle for several minutes. Options are <code>&quot;off&quot;</code>, <code>&quot;stop&quot;</code>, or <code>&quot;suspend&quot;</code>. If <code>&quot;off&quot;</code>, Fly Proxy will never stop Machines. If <code>&quot;stop&quot;</code>, Fly Proxy stops Machines when the app has excess capacity. If <code>&quot;suspend&quot;</code>, Fly Proxy suspends Machines (if possible) when the app has excess capacity. Starting a Machine from a <code>suspended</code> state is faster than starting a Machine from a <code>stopped</code> state, but there are <a href='https://community.fly.io/t/autosuspend-is-here-machine-suspension-is-enabled-everywhere/20942' title=''>some caveats</a>. If there&rsquo;s only one Machine in a region, then the Machine is stopped or suspended if it has no traffic. The Fly Proxy runs a process to automatically stop Machines every few minutes. The default if not set is <code>&quot;off&quot;</code>.
</li><li><code>auto_start_machines</code>: Whether to automatically start an application&rsquo;s Machines when a new request is made to the application and there&rsquo;s no excess capacity, per region. If there&rsquo;s only one Machine in a region, then it&rsquo;s started whenever a request is made to the application. The default if not set is <code>true</code>.
</li><li><code>min_machines_running</code>: The number of Machines to keep running, in the primary region only, when <code>auto_stop_machines</code> is <code>&quot;stop&quot;</code> or <code>&quot;suspend&quot;</code>. The default if not set is <code>0</code>.
</li></ul>
<div class="callout"><p>We recommend configuring <code>auto_stop_machines</code> and <code>auto_start_machines</code> so that they are both enabled or both disabled, to avoid having Machines that either never start or never stop. Learn more about <a href="/docs/reference/fly-proxy-autostop-autostart/" title="">how Fly Proxy autostop/autostart works</a>, including how Fly Proxy determines excess capacity in a region using the <code>soft_limit</code> setting.</p>
</div><h3 id='services-ports' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports' aria-label='Anchor'></a><span class='plain-code'><code>services.ports</code></span></h3>
<p>For each <code>services</code> section in your <code>fly.toml</code>, i.e. for each external port you want to accept connections on, you need a <code>services.ports</code> section. The section is denoted by double square brackets like this:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-yy1qowcf"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-yy1qowcf">  <span class="nn">[[services.ports]]</span>
    <span class="py">handlers</span> <span class="p">=</span> <span class="nn">["http"]</span>
    <span class="py">port</span> <span class="p">=</span> <span class="mi">80</span>
    <span class="py">force_https</span> <span class="p">=</span> <span class="kc">true</span>  <span class="c"># optional</span>
</code></pre>
  </div>
</div>
<p>This example defines an HTTP handler on port 80.</p>

<ul>
<li><code>handlers</code> : An array of strings, each string selecting a handler process to terminate the connection with at the edge. Here, the <code>http</code> handler will accept HTTP traffic and pass it on to the <code>internal_port</code> of the application, which we defined in the <code>services</code> section above.
For the list of available handlers, and how they manage network traffic, see the <a href='/docs/networking/services/' title=''>Public Network Services documentation</a>.
</li><li><code>port</code> : An integer representing the external port to listen on (ports 1-65535).
</li><li><code>start_port</code> : For a port range, the first port to listen on.
</li><li><code>end_port</code> : For a port range, the last port to listen on.
</li><li><code>force_https</code>: A Boolean which determines whether to enforce HTTP to HTTPS redirects.
</li></ul>

<p>You can have more than one <code>services.ports</code> section. The default configuration, for example, contains two. We&rsquo;ve already seen one above. The second one defines an external port 443 for secure connections, using the <code>tls</code> handler.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-7tayddy4"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-7tayddy4">  <span class="nn">[[services.ports]]</span>
    <span class="py">handlers</span> <span class="p">=</span> <span class="p">[</span><span class="s">"tls"</span><span class="p">,</span> <span class="s">"http"</span><span class="p">]</span>
    <span class="py">port</span> <span class="p">=</span> <span class="mi">443</span>
</code></pre>
  </div>
</div>
<p>For UDP applications, make sure to bind the application to the same port as defined in the relevant <code>services.ports</code> section. For example, the configuration below will listen on port 5000 and the application will need to bind to <code>fly-global-services:5000</code> to receive traffic. Leave <code>handlers</code> unset for UDP services.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-wjw76fsj"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-wjw76fsj"><span class="nn">[[services]]</span>
  <span class="py">internal_port</span> <span class="p">=</span> <span class="mi">5000</span>
  <span class="py">protocol</span> <span class="p">=</span> <span class="s">"udp"</span>
  <span class="nn">[[services.ports]]</span>
    <span class="py">port</span> <span class="p">=</span> <span class="mi">5000</span>
</code></pre>
  </div>
</div>
<p>Instead of using multiple port definitions, you can specify a range of ports. For example, the configuration below will listen on the ports <code>8080</code>, <code>8081</code>, <code>8082</code>, <code>8083</code>, <code>8084</code> and <code>8085</code>:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-m8l9pjw1"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-m8l9pjw1"><span class="nn">[[services.ports]]</span>
  <span class="py">handlers</span> <span class="p">=</span> <span class="nn">["tls"]</span>
  <span class="py">start_port</span> <span class="p">=</span> <span class="mi">8080</span>
  <span class="py">end_port</span> <span class="p">=</span> <span class="mi">8085</span>
</code></pre>
  </div>
</div><h3 id='services-ports-http_options-idle_timeout' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-idle_timeout' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.idle_timeout</code></span></h3>
<p>Configure an idle-timeout for connections to your app.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-phcdd6mt"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-phcdd6mt">  <span class="nn">[services.ports.http_options]</span>
    <span class="py">idle_timeout</span> <span class="p">=</span> <span class="mi">600</span>
</code></pre>
  </div>
</div><h3 id='services-ports-http_options-response-pristine' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-response-pristine' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.response.pristine</code></span></h3>
<p>Configures Fly Proxy to not add any Fly headers to HTTP responses. The following response headers won&rsquo;t be added and won&rsquo;t be modified if returned by the app:</p>

<ul>
<li><code>Server</code>
</li><li><code>Via</code>
</li><li><code>Fly-Request-Id</code>
</li><li><code>Fly-Cache-Status</code>
</li></ul>

<p>This is useful if you are building a platform on top of Fly and have your own load balancer that already adds similar response headers.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-8p1nxvir"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-8p1nxvir">  <span class="nn">[services.ports.http_options.response]</span>
    <span class="py">pristine</span> <span class="p">=</span> <span class="kc">true</span>
</code></pre>
  </div>
</div><h4 id='services-ports-http_options-response-headers' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-response-headers' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.response.headers</code></span></h4>
<p>Add or remove HTTP response headers.</p>

<p>In the following example, <code>Example-Header</code> will be removed from the final response that Fly Proxy sends, while <code>Example-Header-1</code> and <code>Example-Multi-Value</code> and their values will be added to the response header.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-vmolghvr"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-vmolghvr">  <span class="nn">[services.ports.http_options.response.headers]</span>
    <span class="py">Example-Header</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="py">Example-Header-1</span> <span class="p">=</span> <span class="s">"value"</span>
    <span class="py">Example-Multi-Value</span> <span class="p">=</span> <span class="p">[</span><span class="s">"value1"</span><span class="p">,</span> <span class="s">"value2"</span><span class="p">]</span>
</code></pre>
  </div>
</div><h3 id='services-ports-http_options-h2_backend' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-h2_backend' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.h2_backend</code></span></h3>
<p>Indicates whether the app supports HTTP/2 cleartext (H2C) with prior knowledge or not.</p>

<p>In the following example, <code>h2_backend</code> is set to <code>true</code>, which allows the app to expose HTTP/2-only service, like gRPC, via <code>http</code> handler.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-1gkhnfuk"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-1gkhnfuk">  <span class="nn">[services.ports.http_options]</span>
    <span class="py">h2_backend</span> <span class="p">=</span> <span class="kc">true</span>
</code></pre>
  </div>
</div><h3 id='services-ports-http_options-replay_cache' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-replay_cache' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.replay_cache</code></span></h3>
<p>Configures session-based replay caching. When your app issues a <code>fly-replay</code> response, Fly Proxy can cache that replay decision based on cookie or header values, automatically applying it to subsequent requests with the same identifier.</p>

<p>Each <code>http_options.replay_cache</code> entry configures a caching rule:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-easmfg8p"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-easmfg8p">  <span class="nn">[[services.ports.http_options.replay_cache]]</span>
    <span class="py">path_prefix</span> <span class="p">=</span> <span class="s">"/"</span>
    <span class="py">ttl_seconds</span> <span class="p">=</span> <span class="mi">300</span>
    <span class="py">type</span> <span class="p">=</span> <span class="s">"cookie"</span>
    <span class="py">name</span> <span class="p">=</span> <span class="s">"session_id"</span>
    <span class="py">allow_bypass</span> <span class="p">=</span> <span class="kc">false</span>
</code></pre>
  </div>
</div>
<p>For documentation on replays, and further explanation on caching, see <a href='/docs/networking/dynamic-request-routing/#session-based-replay-caching' title=''>Session-based Replay Caching</a>.</p>
<h4 id='services-ports-http_options-replay_cache-path_prefix' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-replay_cache-path_prefix' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.replay_cache.path_prefix</code></span></h4>
<p>Path pattern where this caching rule applies. </p>

<p>This can be a path like <code>/api</code> (applies to any hostname) or include a hostname like <code>example.com/api</code>. When multiple rules match a request, the longest matching path takes precedence. </p>

<p>If including a hostname, do not include the protocol or the port. If no hostname is provided, the cache rule applies to all hostnames, but each hostname retains a separate cache.</p>

<p>Implicitly ends with <code>/*</code>, meaning that <code>example.com/api</code>, <code>example.com/api/</code>, and <code>example.com/api/*</code> are all equivalent.</p>
<h4 id='services-ports-http_options-replay_cache-ttl_seconds' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-replay_cache-ttl_seconds' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.replay_cache.ttl_seconds</code></span></h4>
<p>How many seconds to cache the replay decision. Minimum value is 10 seconds.</p>
<h4 id='services-ports-http_options-replay_cache-type' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-replay_cache-type' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.replay_cache.type</code></span></h4>
<p>Either <code>&quot;cookie&quot;</code> or <code>&quot;header&quot;</code>. Specifies whether to key the cache on a cookie or request header.</p>
<h4 id='services-ports-http_options-replay_cache-name' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-replay_cache-name' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.replay_cache.name</code></span></h4>
<p>Name of the cookie or header to use as the cache key.</p>
<h4 id='services-ports-http_options-replay_cache-allow_bypass' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-http_options-replay_cache-allow_bypass' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.http_options.replay_cache.allow_bypass</code></span></h4>
<p>Optional boolean. When <code>true</code>, allows clients to bypass the cache by setting the <code>fly-replay-cache-control: skip</code> request header. Default is <code>false</code>.</p>
<h4 id='services-ports-proxy_proto_options' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-proxy_proto_options' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.proxy_proto_options</code></span></h4>
<p>Configure the version of the PROXY protocol that your app accepts. Version 1 is the default.</p>

<p>For example:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-ua7mpi6h"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-ua7mpi6h"><span class="nn">[[services.ports]]</span>
  <span class="py">handlers</span> <span class="p">=</span> <span class="nn">["proxy_proto"]</span>
  <span class="py">port</span> <span class="p">=</span> <span class="mi">5000</span>
  <span class="nn">proxy_proto_options</span> <span class="o">=</span> <span class="p">{</span> <span class="py">version</span> <span class="p">=</span> <span class="s">"v2"</span> <span class="p">}</span>
</code></pre>
  </div>
</div>
<ul>
<li><code>version</code> : A string to indicate that the TCP connection uses PROXY protocol version 2. The default when not set is version 1.
</li></ul>
<h4 id='services-ports-tls_options' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-ports-tls_options' aria-label='Anchor'></a><span class='plain-code'><code>services.ports.tls_options</code></span></h4>
<p>Configure the TLS versions and ALPN protocols that Fly&rsquo;s edge will use to terminate TLS for your application with:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-1rr6pwio"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-1rr6pwio">  <span class="nn">[[services.ports]]</span>
    <span class="py">handlers</span> <span class="p">=</span> <span class="p">[</span><span class="s">"tls"</span><span class="p">,</span> <span class="s">"http"</span><span class="p">]</span>
    <span class="py">port</span> <span class="p">=</span> <span class="mi">443</span>
    <span class="nn">tls_options</span> <span class="o">=</span> <span class="p">{</span> <span class="py">"alpn"</span> <span class="p">=</span> <span class="p">[</span><span class="s">"h2"</span><span class="p">,</span> <span class="s">"http/1.1"</span><span class="p">],</span> <span class="py">"versions"</span> <span class="p">=</span> <span class="p">[</span><span class="s">"TLSv1.2"</span><span class="p">,</span> <span class="s">"TLSv1.3"</span><span class="p">]</span> <span class="p">}</span>
</code></pre>
  </div>
</div>
<ul>
<li><code>alpn</code> : Array of strings indicating how to handle ALPN negotiations with clients.
</li><li><code>versions</code> : Array of strings indicating which TLS versions are allowed.
</li><li><code>default_self_signed</code>: When <code>true</code>, serve a self-signed certificate if no certificate exists. Default is <code>false</code>.
</li></ul>

<p>Fly.io can also terminate TLS only and pass through directly to your service. This works for a variety of applications that can benefit from offloading TLS termination and accept the unencrypted connection.</p>

<p>One use case is applications using HTTP/2, like gRPC. Fly&rsquo;s edge terminates TLS and sends h2c (HTTP/2 without TLS) directly to your application through our backhaul. The config below will negotiate HTTP/2 with clients, and then send h2c to the application:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-1s4dekhb"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-1s4dekhb">  <span class="nn">[[services.ports]]</span>
    <span class="py">handlers</span> <span class="p">=</span> <span class="nn">["tls"]</span>
    <span class="py">port</span> <span class="p">=</span> <span class="mi">443</span>
    <span class="nn">tls_options</span> <span class="o">=</span> <span class="p">{</span> <span class="py">"alpn"</span> <span class="p">=</span> <span class="nn">["h2"]</span> <span class="p">}</span>
</code></pre>
  </div>
</div><h3 id='services-concurrency' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-concurrency' aria-label='Anchor'></a><span class='plain-code'><code>services.concurrency</code></span></h3>
<p>The services concurrency sub-section configures how to measure load for an application to inform Fly Proxy <a href='/docs/reference/load-balancing' title=''>load balancing</a> and <a href='/docs/launch/autostop-autostart/' title=''>autostop/autostart</a>.</p>

<p>This section is a simple list of key/values, so the section is denoted with single square brackets like so:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-zvw0bwg6"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-zvw0bwg6">  <span class="nn">[services.concurrency]</span>
    <span class="py">type</span> <span class="p">=</span> <span class="s">"connections"</span>
    <span class="py">hard_limit</span> <span class="p">=</span> <span class="mi">25</span>
    <span class="py">soft_limit</span> <span class="p">=</span> <span class="mi">20</span>
</code></pre>
  </div>
</div>
<p><code>type</code> specifies what metric is used to determine when a given Machine has reached a concurrency limit. The two supported values are <code>connections</code> and <code>requests</code>.</p>

<p><strong class='font-semibold text-navy-950'>connections</strong>: Load balance and scale based on the number of concurrent TCP connections. This is the default when unspecified. This is also the default when <code>fly.toml</code> is created with <code>fly launch</code>. A new connection is established for each HTTP request; consider the <code>requests</code> type for HTTP apps.</p>

<p><strong class='font-semibold text-navy-950'>requests</strong>: Load balance and scale based on the number of HTTP requests. This is recommended for web services, because the Fly Proxy can pool and reuse connections for requests.</p>

<ul>
<li><code>hard_limit</code> : When a Fly Machine is at or over this number of concurrent connections or requests, the system will stop sending new traffic to that Machine. If unset, no <code>hard_limit</code> is enforced.
</li><li><code>soft_limit</code> : When a Fly Machine is at or over this number of concurrent connections or requests, the system will deprioritize sending new traffic to that Machine and only send it to that Machine if all other Machines are also at or above their <code>soft_limit</code>. This setting is also used to determine excess capacity for the <a href='/docs/launch/autostop-autostart/' title=''>autostop/autostart feature</a>. If unset, the default is 20.
</li></ul>

<p>For more information about concurrency settings, see <a href='/docs/reference/concurrency/' title=''>Guidelines for concurrency settings</a>.</p>
<h3 id='services-tcp_checks' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-tcp_checks' aria-label='Anchor'></a><span class='plain-code'><code>services.tcp_checks</code></span></h3>
<p>When a service is running, Fly Proxy can check up on it by connecting to a port. The <code>services.tcp_checks</code> section defines parameters for those checks. For example, the default <code>tcp_checks</code> looks like this:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-jzmafmmm"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-jzmafmmm">  <span class="nn">[[services.tcp_checks]]</span>
    <span class="py">grace_period</span> <span class="p">=</span> <span class="s">"1s"</span>
    <span class="py">interval</span> <span class="p">=</span> <span class="s">"15s"</span>
    <span class="py">timeout</span> <span class="p">=</span> <span class="s">"2s"</span>
</code></pre>
  </div>
</div>
<p>Times are in milliseconds unless units are specified.</p>

<ul>
<li><code>grace_period</code>: The time to wait after a Machine starts before checking its health. Make sure this is long enough for your application to start up. For example if your app takes 2 seconds to start up, give it some runway by setting this to at least 3 seconds.
</li><li><code>interval</code>: The time between connectivity checks. If the interval is long, and the <code>grace_period</code> is shorter than your app&rsquo;s startup time, then the health check will take longer and will add to your deployment time.
</li><li><code>timeout</code>: The maximum time a connection can take before being reported as failing its health check.
</li></ul>
<h3 id='services-http_checks' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-http_checks' aria-label='Anchor'></a><span class='plain-code'><code>services.http_checks</code></span></h3>
<p>Another way of checking a service is running is through HTTP checks as defined in the <code>services.http_checks</code> section. These checks are more thorough than <code>services.tcp_checks</code> as they require not just a connection but a successful HTTP status in response (i.e, 2xx). Here is an example of a <code>services.http_checks</code> section:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-3kx76cud"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-3kx76cud">  <span class="nn">[[services.http_checks]]</span>
    <span class="py">interval</span> <span class="p">=</span> <span class="mi">10000</span>
    <span class="py">grace_period</span> <span class="p">=</span> <span class="s">"5s"</span>
    <span class="py">method</span> <span class="p">=</span> <span class="s">"get"</span>
    <span class="py">path</span> <span class="p">=</span> <span class="s">"/"</span>
    <span class="py">protocol</span> <span class="p">=</span> <span class="s">"http"</span>
    <span class="py">timeout</span> <span class="p">=</span> <span class="mi">2000</span>
    <span class="py">tls_skip_verify</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="nn">[services.http_checks.headers]</span>
</code></pre>
  </div>
</div>
<p>Roughly translated, this section says every ten seconds, perform an HTTP GET on the root path (e.g. <a href="http://appname.fly.dev/">http://appname.fly.dev/</a>) looking for it to return an HTTP 200 status within two seconds. The parameters of a <code>http_check</code> are listed below.</p>

<p>Times are in milliseconds unless units are specified.</p>

<ul>
<li><code>grace_period</code>: The time to wait after a Machine starts before checking its health. Make sure this is long enough for your app to start up. For example, if your app takes 2 seconds to start up, give it some runway by setting <code>grace_period</code> to at least 3 seconds.
</li><li><code>interval</code>: The time between connectivity checks. There should be a balance between the interval and the grace period. If it&rsquo;s long and your grace_period shorter than your app&rsquo;s startup time, health check will take too long adding you your deployment time.
</li><li><code>timeout</code>: The maximum time a connection can take before being reported as failing its health check.
</li><li><code>method</code>: The HTTP method to be used for the check.
</li><li><code>path</code>: The path of the URL to be requested.
</li><li><code>protocol</code>: The protocol to be used (<code>http</code> or <code>https</code>).
</li><li><code>tls_server_name</code>: If the protocol is <code>https</code>, the hostname to use for TLS certificate validation.
</li><li><code>tls_skip_verify</code>: When <code>true</code> (and using HTTPS protocol) skip verifying the certificates sent by the server.
</li><li><code>services.http_checks.headers</code>: This is a sub-section of <code>services.http_checks</code>. It uses the key/value pairs as a specification of header and header values that will get passed with the http_check call.
</li></ul>

<p><strong class='font-semibold text-navy-950'>Note</strong>: The <code>services.http_checks</code> section is optional and not generated in the default <code>fly.toml</code> file.</p>
<h3 id='services-machine_checks' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#services-machine_checks' aria-label='Anchor'></a><span class='plain-code'><code>services.machine_checks</code></span></h3>
<p>Machine checks work a bit differently than the other checks. They run on each deploy, and if they fail, the deploy is stopped. A new Machine is spawned with the environment variable <code>FLY_TEST_MACHINE_IP</code> set to the <a href='/docs/networking/private-networking/#6pn-addresses-in-detail' title=''>6PN IPv6 address</a> of the Machine being tested. This is useful for running integration tests on Machines before a deployment. Here&rsquo;s an example:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-pk5s0kju"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-pk5s0kju">  <span class="nn">[[services.machine_checks]]</span>
    <span class="py">image</span> <span class="p">=</span> <span class="s">"curlimages/curl"</span>
    <span class="py">entrypoint</span> <span class="p">=</span> <span class="p">[</span><span class="s">"/bin/sh"</span><span class="p">,</span> <span class="s">"-c"</span><span class="p">]</span>
    <span class="py">command</span> <span class="p">=</span> <span class="p">[</span><span class="s">"curl http://[$FLY_TEST_MACHINE_IP] | grep 'Hello, World!'"</span><span class="p">]</span>
    <span class="py">kill_signal</span> <span class="p">=</span> <span class="s">"SIGKILL"</span>
    <span class="py">kill_timeout</span> <span class="p">=</span> <span class="s">"5s"</span>
</code></pre>
  </div>
</div>
<p>This example uses the <code>curl</code> image to run a test. It checks that the Machine is serving a page with the text &ldquo;Hello, World!&rdquo;.</p>

<ul>
<li><code>image</code>: The Docker image to use for the test. We default to the one used for the process group the Machine is in.
</li><li><code>entrypoint</code>: The entrypoint for the test. Defaults to the entrypoint of the Machine being tested if not set
</li><li><code>command</code>: The command to run for the test.
</li><li><code>kill_signal</code>: The signal to send to the test process if it runs too long. Defaults to the signal of the image, if a custom image is set.
</li><li><code>kill_timeout</code>: The time to wait before sending the kill signal. Defaults to the timeout of the image, if a custom image is set.
</li></ul>

<p>Machine checks are especially useful for <code>canary</code> deploys. <code>flyctl</code> will spawn a new Machine, ensure all machine capabilities are functional, and then deploy the rest of the Machines in your app.</p>

<p>Machine checks are supported for apps using the <code>rolling</code> and <code>canary</code> deployment strategies.</p>
<h2 id='the-mounts-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-mounts-section' aria-label='Anchor'></a><span class='plain-code'>The <code>mounts</code> section</span></h2>
<p>This section supports the Volumes feature for persistent storage. The section has two required entries: <code>source</code> and <code>destination</code>.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-j3n21r5c"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-j3n21r5c"><span class="nn">[mounts]</span>
  <span class="py">source</span> <span class="p">=</span> <span class="s">"myapp_data"</span>
  <span class="py">destination</span> <span class="p">=</span> <span class="s">"/data"</span>
  <span class="py">processes</span> <span class="p">=</span> <span class="nn">["disk"]</span> <span class="c"># optional - attach volumes to Machines that belong to one or more process groups</span>
  <span class="py">initial_size</span> <span class="p">=</span> <span class="s">"20gb"</span> <span class="c"># optional - the size of the volume created on first deploy</span>
</code></pre>
  </div>
</div><h3 id='source' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#source' aria-label='Anchor'></a><span class='plain-code'><code>source</code></span></h3>
<p>The <code>source</code> is a volume name that this app should mount. Any volume with this name, in the same region as the app and that isn&rsquo;t already mounted, may be mounted. A volume of this name must exist in <em>some</em> region for the application to deploy.</p>
<h3 id='destination' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#destination' aria-label='Anchor'></a><span class='plain-code'><code>destination</code></span></h3>
<p>The <code>destination</code> is the directory where the <code>source</code> volume should be mounted on the running app. This cannot be <code>/</code> since that&rsquo;s where the root file system is mounted.</p>
<h3 id='processes' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#processes' aria-label='Anchor'></a><span class='plain-code'><code>processes</code></span></h3>
<p>Optionally, you can specify a list of <a href='#the-processes-section' title=''>processes</a> to limit volume mounts by process group. You can even specify two different <code>[[mounts]]</code> sections to mount different source volumes to Machines in different process groups. Note the need to use double brackets if there are multiple <code>[[mounts]]</code> defined.</p>
<h3 id='initial_size' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#initial_size' aria-label='Anchor'></a><span class='plain-code'><code>initial_size</code></span></h3>
<p>Optionally, you can specify the size of the volume to be created when launching an app for the first time.</p>

<p>This value is only used by <code>fly launch</code> and <code>fly deploy</code> commands in case they need to create a new volume; it is ignored by the <code>fly volume create</code> command.</p>

<p>The value can be a string with units, like <code>initial_size = &quot;30GB&quot;</code> for example. The value can also be an integer, like <code>initial_size = 30</code> for example, with GB as the default unit.</p>
<h3 id='snapshot_retention' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#snapshot_retention' aria-label='Anchor'></a><span class='plain-code'><code>snapshot_retention</code></span></h3>
<p>Optionally, you can specify the number of days snapshots of the volumes in this app are retained.</p>

<p>The default is 5 days when unset. The minimum is 1 day. The maximum is 60 days.</p>

<p>For example, the following config retains snapshots of volumes for 14 days:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-zc4df0yn"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-zc4df0yn"><span class="nn">[mounts]</span>
  <span class="py">source</span> <span class="p">=</span> <span class="s">"myapp_data"</span>
  <span class="py">destination</span> <span class="p">=</span> <span class="s">"/data"</span>
  <span class="py">snapshot_retention</span> <span class="p">=</span> <span class="mi">14</span>
</code></pre>
  </div>
</div><h3 id='scheduled_snapshots' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#scheduled_snapshots' aria-label='Anchor'></a><span class='plain-code'><code>scheduled_snapshots</code></span></h3>
<p>Optional. Enable or disable automatic daily snapshots for a volume.</p>

<p>The default is true (enabled) when unset.</p>

<p>For example, the following config disables automatic daily snapshots:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-6nlw23kr"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-6nlw23kr"><span class="nn">[mounts]</span>
  <span class="py">source</span> <span class="p">=</span> <span class="s">"myapp_cache"</span>
  <span class="py">destination</span> <span class="p">=</span> <span class="s">"/cache"</span>
  <span class="py">scheduled_snapshots</span> <span class="p">=</span> <span class="kc">false</span>
</code></pre>
  </div>
</div><h3 id='auto_extend_size_threshold' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#auto_extend_size_threshold' aria-label='Anchor'></a><span class='plain-code'><code>auto_extend_size_threshold</code></span></h3>
<p>Optional. The threshold of storage used on a volume, by percentage, that triggers extending the volume&rsquo;s size by the value of <code>auto_extend_size_increment</code>,
unless the resulting size would exceed <code>auto_extend_size_limit</code>.</p>
<h3 id='auto_extend_size_increment' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#auto_extend_size_increment' aria-label='Anchor'></a><span class='plain-code'><code>auto_extend_size_increment</code></span></h3>
<p>The increment, in GB, by which to extend the volume after reaching the <code>auto_extend_size_threshold</code>.</p>
<h3 id='auto_extend_size_limit' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#auto_extend_size_limit' aria-label='Anchor'></a><span class='plain-code'><code>auto_extend_size_limit</code></span></h3>
<p>Maximum size, in GB, of a volume after an extension is completed.</p>
<div class="important"><p>When using the auto-extension feature for volumes, both <code>auto_extend_size_increment</code> and <code>auto_extend_size_limit</code> are required. Without these values, the volume wonât resize automatically, even if the usage threshold is reached.</p>
</div><h3 id='auto-extend-volume-size-configuration' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#auto-extend-volume-size-configuration' aria-label='Anchor'></a><span class='plain-code'>Auto extend volume size configuration</span></h3>
<p>You can optionally configure volumes to automatically extend when they reach a usage threshold.</p>

<p>For example, the following config extends the size of the volume by 1GB when it reaches 80% capacity. The volume extensions are limited to 5GB in total.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-ssl8c3et"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-ssl8c3et"><span class="nn">[[mounts]]</span>
  <span class="py">source</span> <span class="p">=</span> <span class="s">"data"</span>
  <span class="py">destination</span> <span class="p">=</span> <span class="s">"/data"</span>
  <span class="py">auto_extend_size_threshold</span> <span class="p">=</span> <span class="mi">80</span>
  <span class="py">auto_extend_size_increment</span> <span class="p">=</span> <span class="s">"1GB"</span>
  <span class="py">auto_extend_size_limit</span> <span class="p">=</span> <span class="s">"5GB"</span>
</code></pre>
  </div>
</div><h2 id='the-vm-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-vm-section' aria-label='Anchor'></a><span class='plain-code'>The <code>vm</code> section</span></h2>
<p>This section defines the compute requirements for the Machines used for the application.</p>

<p>The default Machine size is <code>shared-cpu-1x</code> but it is not enforced if not specified in <code>fly.toml</code>. It means commands like <code>fly deploy</code> won&rsquo;t attempt to update the compute requirements (or size) for a Machine. <code>fly scale</code> commands will use existing Machines to infer new Machine sizes, and in the event that there are no Machines, they will use <code>shared-cpu-1x</code>.</p>

<p>If you care about a predictable <em>scaling up from zero</em> case, or if you have different compute requirements for different process groups, then it is highly recommended to add this section to <code>fly.toml</code>. Once compute requirements are set, <code>fly deploy</code> and <code>fly scale count</code> commands will enforce them. If you change the size of the Machines using <code>fly scale vm</code> (or its sibling <code>fly scale memory</code>) then it will be reset on next <code>fly deploy</code> unless <code>fly.toml</code> is updated accordingly. Learn more about <a href='/docs/apps/scale-machine/#machine-size-configuration-precedence' title=''>Machine size configuration precedence</a>.</p>
<div class="callout"><p>If you update your Machine size using <code>fly scale vm</code> or <code>fly scale memory</code> but you still have a <code>[[vm]]</code> section in your <code>fly.toml</code> file, the next <code>fly deploy</code> will reset your Machines to the configuration in the file.  If you want to manually scale your Machines and keep those settings, remove the <code>[[vm]]</code> section from your <code>fly.toml</code> file.</p>
</div>
<p>All keys are optional and <code>size</code> has lower precedence than all other keys.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-vxligqo"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-vxligqo"><span class="nn">[[vm]]</span>
  <span class="py">size</span> <span class="p">=</span> <span class="s">"shared-cpu-2x"</span>
  <span class="py">memory</span> <span class="p">=</span> <span class="s">"1gb"</span>
  <span class="py">cpus</span> <span class="p">=</span> <span class="mi">2</span>
  <span class="py">cpu_kind</span> <span class="p">=</span> <span class="s">"shared"</span>
  <span class="py">gpus</span> <span class="p">=</span> <span class="mi">1</span>
  <span class="py">gpu_kind</span> <span class="p">=</span> <span class="s">"a100-pcie-40gb"</span>
  <span class="py">kernel_args</span> <span class="p">=</span> <span class="py">"no-hlt</span><span class="p">=</span><span class="kc">true</span><span class="s">"</span><span class="err">
</span>  <span class="py">host_dedication_id</span> <span class="p">=</span> <span class="s">"customer-id"</span>
  <span class="py">persist_rootfs</span> <span class="p">=</span> <span class="s">"never"</span>
  <span class="py">processes</span> <span class="p">=</span> <span class="nn">["app"]</span>
</code></pre>
  </div>
</div><h3 id='size' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#size' aria-label='Anchor'></a><span class='plain-code'><code>size</code></span></h3>
<p>The Machine preset size to use as base, like <code>size = &quot;shared-cpu-1x&quot;</code> for example.</p>

<p>To get the full list, run <code>fly platform vm-sizes</code> or check the <a href='/docs/about/pricing/#compute' title=''>pricing page</a>.</p>
<h3 id='memory' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#memory' aria-label='Anchor'></a><span class='plain-code'><code>memory</code></span></h3>
<p>The memory to request. It can be expressed with units, like <code>memory = &quot;2GB&quot;</code> or <code>memory = &quot;512mb&quot;</code> for example. The value can also be an integer, like <code>memory = 1024</code> for example, with MB as the default unit.</p>
<h3 id='cpus' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#cpus' aria-label='Anchor'></a><span class='plain-code'><code>cpus</code></span></h3>
<p>The number of vCPUs to request. Valid values are <code>1</code>, <code>2</code>, <code>4</code>, <code>8</code>, or <code>16</code>, but depends on <code>cpu_kind</code>. </p>
<h3 id='cpu_kind' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#cpu_kind' aria-label='Anchor'></a><span class='plain-code'><code>cpu_kind</code></span></h3>
<p>The kind of CPU to request. Valid values are <code>shared</code> and <code>performance</code>.</p>
<h3 id='gpus' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#gpus' aria-label='Anchor'></a><span class='plain-code'><code>gpus</code></span></h3>
<p>The number of GPUs to request. Valid values are <code>1</code>, <code>2</code>, <code>4</code>, <code>8</code>, but depends on <code>gpu_kind</code>. </p>

<p>Setting this value requires also setting <code>gpu_kind</code>.</p>
<h3 id='gpu_kind' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#gpu_kind' aria-label='Anchor'></a><span class='plain-code'><code>gpu_kind</code></span></h3>
<p>The kind of GPU to request. Valid values are <code>a10</code>, <code>l40s</code>, <code>a100-pcie-40gb</code> and <code>a100-sxm4-80gb</code>.</p>

<p>Setting this value assumes <code>gpus = 1</code> if not present.</p>
<h3 id='kernel_args' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#kernel_args' aria-label='Anchor'></a><span class='plain-code'><code>kernel_args</code></span></h3>
<p>Additional kernel parameters provided to the kernel when booting the VM.</p>
<h3 id='host_dedication_id' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#host_dedication_id' aria-label='Anchor'></a><span class='plain-code'><code>host_dedication_id</code></span></h3>
<p>In the case of having a dedicated host, this is the value to set so Machines are launched on dedicated hardware.</p>
<h3 id='persist_rootfs' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#persist_rootfs' aria-label='Anchor'></a><span class='plain-code'>persist_rootfs</span></h3>
<p>The persistence of the root filesystem across restarts and updates. Valid values are <code>never</code> (default), <code>restart</code>, and <code>always</code>.</p>

<ul>
<li><code>never</code>: The root filesystem is ephemeral and will not be persisted across restarts or updates.
</li><li><code>restart</code>: The root filesystem is persisted across restarts, but not across updates.
</li><li><code>always</code>: The root filesystem is persisted across restarts and updates.
</li></ul>
<h3 id='processes-2' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#processes-2' aria-label='Anchor'></a><span class='plain-code'><code>processes</code></span></h3>
<p>Optionally, you can specify a list of <a href='#the-processes-section' title=''>processes</a> to limit by process group. You can even specify two different <code>[[vm]]</code> sections to have different compute requirements per process group. Note the need to use double brackets if there are multiple <code>[[vm]]</code> sections defined.</p>

<p>A <code>[[vm]]</code> section without a <code>processes</code> key applies to all process groups, except when another <code>[[vm]]</code> section targets a specific process group. For example the following snippets uses <code>shared-cpu-4x</code> for <code>app</code> and <code>other</code> process groups but <code>performance-1x</code> for <code>worker</code> group.</p>
<div class="highlight-wrapper group relative ">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-voza959b"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-voza959b">[processes]
app = "/start-app"
worker = "/start-worker"
other = "/start-other"

[[vm]]
size = "shared-cpu-4x"

[[vm]]
size = "performance-1x"
processes = ["worker"]
</code></pre>
  </div>
</div><h2 id='the-restart-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-restart-section' aria-label='Anchor'></a><span class='plain-code'>The <code>restart</code> section</span></h2><div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-7td2v74i"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-7td2v74i"><span class="nn">[[restart]]</span>
  <span class="py">policy</span> <span class="p">=</span> <span class="s">"never"</span>
  <span class="py">retries</span> <span class="p">=</span> <span class="mi">10</span>
  <span class="py">processes</span> <span class="p">=</span> <span class="nn">["app"]</span>
</code></pre>
  </div>
</div>
<p>When a machine unexpectedly exits, our scheduling machinery follows a machineâs restart policy to restart it without your intervention. These policies are quite similar to Dockerâs container restart policies:</p>

<ul>
<li>always: weâll attempt to restart the machine no matter the exit code.
</li><li>never: we wonât restart the machine even if it exits with a non-zero exit code.
</li><li>on-failure: weâll only restart the machine if it exited with a non-zero exit code (due to a failure or crash). This is the default policy if one is not explicitly set. 
</li></ul>

<p>A restart policy can be targeted to a specific process group. If a group is not specified, all machines in an app will have the same default restart policy. You can also specify the number of times we should retry restarting the machine before giving up.</p>
<h2 id='the-checks-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-checks-section' aria-label='Anchor'></a><span class='plain-code'>The <code>checks</code> section</span></h2>
<p>If your app doesn&rsquo;t have public-facing services, or you want independent health checks that don&rsquo;t affect request routing,
use this top-level <code>checks</code> section instead of <code>[[services.checks]]</code>.</p>

<p>Unlike service-level checks, top-level checks require:</p>

<ul>
<li>A port number
</li><li>A unique name
</li><li>The type of check (<code>http</code> or <code>tcp</code>)
</li></ul>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-x4mbt18i"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-x4mbt18i"><span class="nn">[checks]</span>
  <span class="nn">[checks.name_of_your_http_check]</span>
    <span class="py">grace_period</span> <span class="p">=</span> <span class="s">"30s"</span>
    <span class="py">interval</span> <span class="p">=</span> <span class="s">"15s"</span>
    <span class="py">method</span> <span class="p">=</span> <span class="s">"get"</span>
    <span class="py">path</span> <span class="p">=</span> <span class="s">"/path/to/status"</span>
    <span class="py">port</span> <span class="p">=</span> <span class="mi">5500</span>
    <span class="py">timeout</span> <span class="p">=</span> <span class="s">"10s"</span>
    <span class="py">type</span> <span class="p">=</span> <span class="s">"http"</span>
    <span class="nn">[checks.name_of_your_http_check.headers]</span>
      <span class="py">Content-Type</span> <span class="p">=</span> <span class="s">"application/json"</span>
      <span class="py">Authorization</span> <span class="p">=</span> <span class="s">"super-secret"</span>

  <span class="nn">[checks.name_of_your_tcp_check]</span>
    <span class="py">grace_period</span> <span class="p">=</span> <span class="s">"30s"</span>
    <span class="py">interval</span> <span class="p">=</span> <span class="s">"15s"</span>
    <span class="py">port</span> <span class="p">=</span> <span class="mi">1234</span>
    <span class="py">timeout</span> <span class="p">=</span> <span class="s">"10s"</span>
    <span class="py">type</span> <span class="p">=</span> <span class="s">"tcp"</span>
</code></pre>
  </div>
</div>
<p>Fields are very similar to <code>[[services.checks]]</code>:</p>

<ul>
<li><code>port</code>: Internal port to connect to. Needs to be available on <code>0.0.0.0</code>. Required.
</li><li><code>type</code>: Either <code>tcp</code> or <code>http</code>. Required.
</li><li><code>grace_period</code>: The time to wait after a Machine starts before checking its health. Make sure you give your app enough time to start up. For example if your app takes 2 seconds to start up, give it some runway by setting this to at least 3 seconds.
</li><li><code>interval</code>: The time between check runs. If your <code>grace_period</code> is shorter than your app&rsquo;s startup time, and <code>interval</code> is too long, checks will increase deployment times.
</li><li><code>processes</code>: For apps with multiple processes. The process group to apply the health checks to. Define process groups in the <a href='#the-processes-section' title=''>processes</a> section.
</li></ul>

<p>For HTTP checks only:</p>

<ul>
<li><code>method</code>: The HTTP method to be used for the check.
</li><li><code>path</code>: The path of the URL to be requested.
</li><li><code>timeout</code>: The maximum time a connection can take before being reported as failing its health check.
</li><li><code>headers</code>: Specify key/value pairs will get passed as HTTP headers on the check request.
</li></ul>

<p>Again, times are in milliseconds unless units are specified.</p>
<h2 id='the-processes-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-processes-section' aria-label='Anchor'></a><span class='plain-code'>The <code>processes</code> section</span></h2>
<p>The <code>processes</code> section allows you to define process groups to be run on separate Machines within a single app. Learn more about <a href='/docs/apps/processes/' title=''>running multiple process groups in an app</a>.</p>

<p><strong class='font-semibold text-navy-950'>Each Machine can run a different command on start</strong>, allowing you to re-use your code base for different tasks (web server, queue worker, etc).</p>

<p>To run multiple processes, you&rsquo;ll need a <code>[processes]</code> block containing a map of a name and command to start the application.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-77zun50y"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-77zun50y"><span class="nn">[processes]</span>
  <span class="py">web</span> <span class="p">=</span> <span class="s">"bundle exec rails server -b [::] -p 8080"</span>
  <span class="py">worker</span> <span class="p">=</span> <span class="s">"bundle exec sidekiqswarm"</span>
</code></pre>
  </div>
</div>
<p>Furthermore, you can &ldquo;match&rdquo; a specific process (or processes) to an <a href='#the-http_service-section' title=''><code>[http_service]</code></a> or <a href='#the-services-sections' title=''><code>[[services]]</code></a> configuration. For example:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-jfpgm9nb"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-jfpgm9nb"><span class="nn">[http_service]</span>
  <span class="py">processes</span> <span class="p">=</span> <span class="nn">["web"]</span> <span class="c"># this service only applies to the web process</span>
  <span class="py">internal_port</span> <span class="p">=</span> <span class="mi">8080</span>
  <span class="py">force_https</span> <span class="p">=</span> <span class="kc">true</span>
</code></pre>
  </div>
</div>
<p>Volumes can also be assigned to specific processes; use double brackets to include more than one <a href='#the-mounts-section' title=''><code>[[mounts]]</code></a> section, and mount differently named volumes to Machines in different process groups:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-s1d8rpsj"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-s1d8rpsj"><span class="nn">[[mounts]]</span>
  <span class="py">source</span> <span class="p">=</span> <span class="s">"data"</span>
  <span class="py">destination</span> <span class="p">=</span> <span class="s">"/data"</span>
  <span class="py">processes</span> <span class="p">=</span> <span class="nn">["app"]</span>
</code></pre>
  </div>
</div><h2 id='the-metrics-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-metrics-section' aria-label='Anchor'></a><span class='plain-code'>The <code>metrics</code> section</span></h2>
<p>Fly apps can be configured to export custom metrics to the Fly.io-hosted Prometheus service.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-uvfwiuz8"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-uvfwiuz8"><span class="nn">[metrics]</span>
  <span class="py">port</span> <span class="p">=</span> <span class="mi">9091</span>
  <span class="py">path</span> <span class="p">=</span> <span class="s">"/metrics"</span> <span class="c"># default for most prometheus exporters</span>
</code></pre>
  </div>
</div>
<p>Custom metrics can be also configured for specific <code>processes</code>, using double brackets to define multiple <code>[[metrics]]</code> tables:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-vp77jxnm"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-vp77jxnm"><span class="nn">[[metrics]]</span>
  <span class="py">port</span> <span class="p">=</span> <span class="mi">9394</span>
  <span class="py">path</span> <span class="p">=</span> <span class="s">"/metrics"</span>
  <span class="py">processes</span> <span class="p">=</span> <span class="nn">["web"]</span>

<span class="nn">[[metrics]]</span>
  <span class="py">port</span> <span class="p">=</span> <span class="mi">9113</span>
  <span class="py">path</span> <span class="p">=</span> <span class="s">"/metrics"</span>
  <span class="py">processes</span> <span class="p">=</span> <span class="nn">["proxy"]</span>
</code></pre>
  </div>
</div>
<p>Check out <a href='/docs/reference/metrics/' title=''>Metrics on Fly.io</a> for more information about collecting metrics for your apps.</p>
<h2 id='the-statics-sections' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-statics-sections' aria-label='Anchor'></a><span class='plain-code'>The <code>statics</code> sections</span></h2>
<p>You can use the <code>[[statics]]</code> section in your <code>fly.toml</code> to serve static files such as images, CSS, or JavaScript for your application. There are two ways to serve statics: </p>

<ul>
<li>From a running Fly Machine
</li><li>From a Tigris object storage bucket.
</li></ul>
<h3 id='serving-statics-from-a-fly-machine' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#serving-statics-from-a-fly-machine' aria-label='Anchor'></a><span class='plain-code'>Serving statics from a Fly Machine</span></h3>
<p>When you add a <code>[[statics]]</code> section to <code>fly.toml</code>, the Fly Proxy intercepts requests matching your <code>url_prefix</code>. If the requested file exists in your <code>guest_path</code>, the request is routed to a static file server running inside your machine. This bypasses your main web server process. Your machine must be running for static files to be served.</p>

<p>If your machine is stopped, static files will not be served. If <code>autostart</code> is enabled, the machine will be started during statics requests as well as during normal requests to the app. Static assets are always served directly from your VM, not from the Fly edge or proxy host.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-q7sald1e"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-q7sald1e"><span class="nn">[[statics]]</span>
  <span class="py">guest_path</span> <span class="p">=</span> <span class="s">"/app/public"</span>
  <span class="py">url_prefix</span> <span class="p">=</span> <span class="s">"/public"</span>
</code></pre>
  </div>
</div>
<p>In this example, a request to <code>/public/image.png</code> is served from <code>/app/public/image.png</code> inside your running machine. You can define up to 10 <code>[[statics]]</code> mappings per application.</p>

<p>The <code>guest_path</code> is the directory in your Docker image to serve files from. It may overlap across mappings, but <code>url_prefix</code> values must not overlap. Only one static mapping is honored for a given prefix. For example, two mappings to <code>/public/foo</code> and <code>/public/bar</code> are allowed, but two mappings to <code>/public</code> are not.</p>
<h3 id='serving-statics-from-tigris-object-storage' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#serving-statics-from-tigris-object-storage' aria-label='Anchor'></a><span class='plain-code'>Serving statics from Tigris object storage</span></h3>
<p>You can serve static files directly from a Tigris object storage bucket. This lets you host assets or full static sites from a bucket instead of baking them into your Docker image. </p>

<p>Static files in Tigris buckets are always delivered through your applicationâs running VM, not directly from the Fly edge. If no machine is running, requests for Tigris statics will not be served.
However, if <code>autostart</code> is enabled for your app, incoming requests for static assets will automatically start a machine as needed, the same as for normal application traffic.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-d8aw5vck"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-d8aw5vck"><span class="nn">[[statics]]</span>
  <span class="py">guest_path</span> <span class="p">=</span> <span class="s">"/app/public"</span>
  <span class="py">url_prefix</span> <span class="p">=</span> <span class="s">"/public"</span>
  <span class="py">tigris_bucket</span> <span class="p">=</span> <span class="s">"my-bucket"</span>
</code></pre>
  </div>
</div>
<p>In this configuration, requests under <code>/public</code> are served from files stored in <code>my-bucket</code> under the <code>/app/public</code> path. Your machine must be running for these files to be served. If your machine scales to zero, static assets will not be accessible.</p>

<p>When handling trailing slashes, requests to a directory path such as <code>/public/dir/</code> look for an <code>index.html</code> file, if you specify one. Requests without a trailing slash such as <code>/public/dir</code> may not serve as expected. Consider using redirects or documenting this for your users. Tigris statics support the <code>index_document</code> key, which allows you to serve a default file for a directory path.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-jczj9pro"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-jczj9pro"><span class="nn">[[statics]]</span>
  <span class="py">guest_path</span> <span class="p">=</span> <span class="s">"/app/public"</span>
  <span class="py">url_prefix</span> <span class="p">=</span> <span class="s">"/public"</span>
  <span class="py">tigris_bucket</span> <span class="p">=</span> <span class="s">"my-bucket"</span>
  <span class="py">index_document</span> <span class="p">=</span> <span class="s">"index.html"</span>
</code></pre>
  </div>
</div>
<p>In this configuration, a request to <code>https://example.com/public/</code> serves <code>/app/public/index.html</code> from the bucket. Similarly, <code>https://example.com/public/assets/</code> serves <code>/app/public/assets/index.html</code>.</p>

<p>Tigris statics are billed at Tigris pricing. Data egress from Tigris may incur both Tigris and Fly Proxy egress charges. </p>

<p>Do not overlap <code>url_prefix</code> values; only one static mapping will be honored for a given prefix.</p>
<h3 id='caveats' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#caveats' aria-label='Anchor'></a><span class='plain-code'>Caveats</span></h3>
<p>This feature should not be compared directly with a CDN, for the following reasons:</p>

<ul>
<li>This feature does not exempt you from having to run a web service in your Machine.
</li><li>You must have a running machine for statics to be served. If your machine is stopped, static assets will not be served. If <code>auto_start_machines</code> is enabled, the machine will be started automatically in response to statics requests, the same as with normal application requests.
</li><li>The Fly Proxy routes matching requests directly to the statics file server running inside your machine. Static requests do not go through your main application process, but are handled by the file server within the same VM.
</li><li>Serving an index document is only supported for statics served directly from Tigris. The index document must have the same name in all the relevant locations in your Tigris bucket.
</li><li>For statics served from your container, it will not find <code>index.html</code> at the root. The full path must be requested.
</li><li>You cannot set <code>Cache-Control</code> or any other headers on assets. If you need those, deliver them from your application and set the relevant headers.
</li><li><code>statics</code> does not honor symlinks. For example, if <code>/app/public</code> in your container is a symlink, such as <code>/app-39403/public</code>, use the absolute original path in your statics configuration.
</li></ul>
<h2 id='the-files-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-files-section' aria-label='Anchor'></a><span class='plain-code'>The <code>files</code> section</span></h2>
<p>When a <code>files</code> section is set, the contents from one of <code>raw_value</code>, <code>local_path</code>, or <code>secret_name</code> will be written to the Machine at the provided <code>guest_path</code>.</p>

<ul>
<li><code>raw_value</code>: The raw file content to be written. Must be base64 encoded.
</li><li><code>local_path</code>: The path to a local file in your system that should be used. Does not need to be base64 encoded.
</li><li><code>secret_name</code>: The name of an app secret that&rsquo;s been set with <code>fly secrets set</code>. The value of the secret will be written to the file. The referenced secret&rsquo;s value must be base64 encoded.
</li></ul>

<p>Examples:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-585v7pog"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-585v7pog"><span class="nn">[[files]]</span>
  <span class="py">guest_path</span> <span class="p">=</span> <span class="s">"/path/to/hello.txt"</span>
  <span class="py">raw_value</span> <span class="p">=</span> <span class="s">"aGVsbG8gd29ybGQK"</span>

<span class="nn">[[files]]</span>
  <span class="py">guest_path</span> <span class="p">=</span> <span class="s">"/path/to/config.yaml"</span>
  <span class="py">local_path</span> <span class="p">=</span> <span class="s">"/local/path/config.yaml"</span>

<span class="nn">[[files]]</span>
  <span class="py">guest_path</span> <span class="p">=</span> <span class="s">"/path/to/secret.txt"</span>
  <span class="py">secret_name</span> <span class="p">=</span> <span class="s">"SUPER_SECRET"</span>
</code></pre>
  </div>
</div>
<p>You can optionally restrict which Machine(s) contain the file using the <a href='#the-processes-section' title=''>processes</a> field. For example:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-ypzf30xm"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-ypzf30xm"><span class="nn">[[files]]</span>
  <span class="py">guest_path</span> <span class="p">=</span> <span class="s">"/path/to/config.yaml"</span>
  <span class="py">local_path</span> <span class="p">=</span> <span class="s">"/local/path/config.yaml"</span>
  <span class="py">processes</span> <span class="p">=</span> <span class="nn">["web"]</span>
</code></pre>
  </div>
</div>
<p>To remove a previously configured file on the next deployment, either delete the <code>files</code> entry entirely, or set its source to an empty string like this:</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-mnx04njd"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-mnx04njd"><span class="nn">[[files]]</span>
  <span class="py">guest_path</span> <span class="p">=</span> <span class="s">"/path/to/config.yaml"</span>
  <span class="py">local_path</span> <span class="p">=</span> <span class="s">""</span>
</code></pre>
  </div>
</div><h2 id='the-experimental-section' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#the-experimental-section' aria-label='Anchor'></a><span class='plain-code'>The <code>experimental</code> section</span></h2>
<p>This section is for flags and feature settings which have yet to be promoted into the main configuration.</p>
<div class="highlight-wrapper group relative toml">
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-9 -mr-0.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-wrap-target="#code-awgvxavd"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35" stroke-linecap="round" stroke-linejoin="round"><g buffered-rendering="static"><path d="M9.912 8.037h2.732c1.277 0 2.315-.962 2.315-2.237a2.325 2.325 0 00-2.315-2.31H2.959m10.228 9.01H2.959M6.802 8H2.959" /><path d="M11.081 6.466L9.533 8.037l1.548 1.571" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-9px] tail text-navy-950">
      Wrap text
    </span>
  </button>
  <button 
    type="button"
    class="bubble-wrap z-20 absolute right-1.5 top-1.5 text-transparent group-hover:text-gray-400 group-hover:hocus:text-white focus:text-white bg-transparent group-hover:bg-gray-900 group-hover:hocus:bg-gray-700 focus:bg-gray-700 transition-colors grid place-items-center w-7 h-7 rounded-lg outline-none focus:outline-none"
    data-copy-target="sibling"
  >
    <svg class="w-4 h-4 pointer-events-none" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.35"><g buffered-rendering="static"><path d="M10.576 7.239c0-.995-.82-1.815-1.815-1.815H3.315c-.995 0-1.815.82-1.815 1.815v5.446c0 .995.82 1.815 1.815 1.815h5.446c.995 0 1.815-.82 1.815-1.815V7.239z" /><path d="M10.576 10.577h2.109A1.825 1.825 0 0014.5 8.761V3.315A1.826 1.826 0 0012.685 1.5H7.239c-.996 0-1.815.819-1.816 1.815v1.617" /></g></svg>
    <span class="bubble-sm bubble-tl [--offset-l:-6px] tail [--tail-x:calc(100%-30px)] text-navy-950">
      Copy to clipboard
    </span>
  </button>
  <div class='highlight relative group'>
    <pre class='highlight '><code id="code-awgvxavd"><span class="nn">[experimental]</span>
<span class="py">cmd</span> <span class="p">=</span> <span class="p">[</span><span class="s">"path/to/command"</span><span class="p">,</span> <span class="s">"arg1"</span><span class="p">,</span> <span class="s">"arg2"</span><span class="p">]</span>
<span class="py">entrypoint</span> <span class="p">=</span> <span class="p">[</span><span class="s">"path/to/command"</span><span class="p">,</span> <span class="s">"arg1"</span><span class="p">,</span> <span class="s">"arg2"</span><span class="p">]</span>
<span class="py">exec</span> <span class="p">=</span> <span class="p">[</span><span class="s">"path/to/command"</span><span class="p">,</span> <span class="s">"arg1"</span><span class="p">,</span> <span class="s">"arg2"</span><span class="p">]</span>
</code></pre>
  </div>
</div><h3 id='cmd' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#cmd' aria-label='Anchor'></a><span class='plain-code'><code>cmd</code></span></h3>
<p>This overrides the <code>CMD</code> set by the Dockerfile. It should be specified as an array of strings, as seen in the example above.</p>
<h3 id='entrypoint' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#entrypoint' aria-label='Anchor'></a><span class='plain-code'><code>entrypoint</code></span></h3>
<p>This overrides the <code>ENTRYPOINT</code> set by the Dockerfile. It should be specified as an array of strings, as seen in the example above.</p>
<h3 id='exec' class='group flex items-start whitespace-pre-wrap relative mt-14 sm:mt-16 mb-4 text-navy-950 font-heading'><a class='inline-block align-text-top relative top-[.15em] w-6 h-6 -ml-6 after:hash opacity-0 group-hover:opacity-100 transition-all' href='#exec' aria-label='Anchor'></a><span class='plain-code'><code>exec</code></span></h3>
<p>This overrides both the <code>CMD</code> and the <code>ENTRYPOINT</code> set by the Dockerfile. It should be specified as an array of strings, as seen in the example above.</p>


                <div class="mt-16 py-6 border-t border-gray-100">
                  <div class="flex flex-col items-center gap-3">
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-2 sm:gap-1 2xl:hidden">
                      <button
                        type="button"
                        data-copy-target="#raw-markdown-content"
                        class="flex items-center text-navy-950 text-sm font-medium underline underline-offset-2 decoration-1 decoration-navy-900/30 hover:decoration-violet-600/30 hover:text-violet-600 transition-colors bg-transparent border-0 cursor-pointer"
                      >
                        
<svg aria-hidden="true" class="mr-1.5" style="width: 16px; height: 16px; pointer-events: none;" viewBox="0 0 208 128" fill="currentColor">
  <rect width="198" height="118" x="5" y="5" ry="10" stroke="currentColor" stroke-width="10" fill="none"/>
  <path d="M30 98V30h20l20 25 20-25h20v68H90V59L70 84 50 59v39zm125 0l-30-33h20V30h20v35h20z"/>
</svg>

                        <span class="copy-button-text">Copy page as markdown</span>
                      </button>
                      <span class="hidden sm:inline">or</span>
                      <a target="_blank" class="flex items-center text-navy-950 text-sm font-medium underline underline-offset-2 decoration-1 decoration-navy-900/30 hover:decoration-violet-600/30 hover:text-violet-600 transition-colors" href="https://chatgpt.com/?hints=search&amp;q=Read+https%3A%2F%2Fraw.githubusercontent.com%2Fsuperfly%2Fdocs%2Fmain%2Freference%2Fconfiguration.html.markerb">
                        
<svg aria-hidden="true" class="mr-1.5 pointer-events-none" style="width: 16px; height: 16px;" viewBox="0 0 24 24" fill="currentColor">
  <path d="M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.515 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z"/>
</svg>

                        Open in ChatGPT
                        
<svg aria-hidden="true" class="ml-1.5 pointer-events-none" style="width: 14px; height: 14px;" viewBox="0 0 16 16" fill="none">
  <rect width="16" height="16" rx="3" fill="currentColor" opacity="0.1"/>
  <path d="M6 5h5v5M11 5l-5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

</a>                    </div>
                    <div class="2xl:hidden" style="border-top: 1px solid rgba(150, 150, 178, 0.2); margin: 16px auto; width: 320px;"></div>
                    <div class="flex flex-row justify-center gap-1">
                      <a class="flex items-center text-navy-950 text-sm font-medium underline underline-offset-2 decoration-1 decoration-navy-900/30 hover:decoration-violet-600/30 hover:text-violet-600 transition-colors" href="https://github.com/superfly/docs/issues/new?body=I+found+an+issue+with+this+document.%0A%0ATitle%3A+App+configuration+%28fly.toml%29%0ALocation%3A+https%3A%2F%2Ffly.io%2Fdocs%2Freference%2Fconfiguration%2F%0ASource%3A+https%3A%2F%2Fgithub.com%2Fsuperfly%2Fdocs%2Fblob%2Fmain%2Freference%2Fconfiguration.html.markerb%0A%0A%23%23%23+Describe+the+issue%0A%0A%3C%21--+Describe+the+issue+and+include+the+section+you%27re+referring+to%2C+if+applicable.+Provide+lots+of+detail+about+the+issue+that+you+found.++--%3E%0A%0A%23%23%23+Additional+info%0A%0A%3C%21--+Add+any+other+context+about+the+issue+here.+If+applicable%2C+add+screenshots+to+help+explain+the+issue.+--%3E%0A&amp;title=Issue+with+the+%22App+configuration+%28fly.toml%29%22+doc">
                        
<svg 
  role="img" 
  class="mr-1.5" 
  viewBox="0 0 24 24" 
  style="pointer-events: none; width: 20px; height: 20px;" 
  fill="currentColor"
>
  <g buffered-rendering="static">
    <path d="M11.999 1.271C5.925 1.271 1 6.196 1 12.273c0 4.859 3.152 8.982 7.523 10.437.55.1.751-.239.751-.53l-.015-1.872c-3.06.666-3.706-1.474-3.706-1.474-.5-1.271-1.221-1.609-1.221-1.609-.999-.683.075-.668.075-.668 1.105.077 1.685 1.133 1.685 1.133.981 1.681 2.575 1.196 3.202.914.1-.711.384-1.196.698-1.471-2.442-.277-5.011-1.221-5.011-5.436 0-1.201.429-2.183 1.133-2.952-.114-.278-.491-1.397.108-2.911 0 0 .923-.296 3.025 1.127A10.56 10.56 0 0 1 12 6.591c.935.004 1.876.127 2.754.37 2.1-1.423 3.022-1.127 3.022-1.127.6 1.514.223 2.633.11 2.911.705.769 1.131 1.751 1.131 2.952 0 4.225-2.573 5.155-5.023 5.427.395.34.747 1.011.747 2.038 0 1.471-.014 2.657-.014 3.018 0 .293.199.636.756.528C19.851 21.251 23 17.13 23 12.273c0-6.077-4.926-11.002-11.001-11.002z"/>
  </g>
</svg>
                        Report an issue
</a>                      or
                      <a class="flex items-center text-navy-950 text-sm font-medium underline underline-offset-2 decoration-1 decoration-navy-900/30 hover:decoration-violet-600/30 hover:text-violet-600 transition-colors" href="https://github.com/superfly/docs/edit/main/reference/configuration.html.markerb">
                        edit this page on GitHub
</a>                    </div>
                  </div>
                </div>
            </article>

              <div class="page-nav flex-none hidden 2xl:block sticky self-start top-[6.5rem] -ml-10 mr-10 w-64 max-h-[calc(100vh-theme('spacing.36'))] text-sm">
                <a href="#" class="sticky top-0 top-link pl-3 !pt-0">
                  On this page
                </a>
                <nav id="toc">
                  <ul class="waypoints scrollbar-hidden"><li><a href="#app-configuration-files"><span class="truncate pointer-events-none">App configuration files</span></a><ul><li><a href="#ways-to-get-a-config-file"><span class="truncate pointer-events-none">Ways to get a config file</span></a></li><li><a href="#config-file-formats"><span class="truncate pointer-events-none">Config file formats</span></a></li></ul></li><li><a href="#the-app-name"><span class="truncate pointer-events-none">The app name</span></a></li><li><a href="#primary-region"><span class="truncate pointer-events-none">Primary region</span></a></li><li><a href="#runtime-options"><span class="truncate pointer-events-none">Runtime options</span></a><ul><li><a href="#kill_signal-option"><span class="truncate pointer-events-none">kill_signal option</span></a></li><li><a href="#kill_timeout-option"><span class="truncate pointer-events-none">kill_timeout option</span></a></li><li><a href="#how-the-shutdown-sequence-works"><span class="truncate pointer-events-none">How the shutdown sequence works</span></a></li></ul></li><li><a href="#console-command"><span class="truncate pointer-events-none">Console command</span></a></li><li><a href="#swap_size_mb-option"><span class="truncate pointer-events-none">swap_size_mb option</span></a></li><li><a href="#the-build-section"><span class="truncate pointer-events-none">The build section</span></a><ul><li><a href="#builder"><span class="truncate pointer-events-none">builder</span></a></li><li><a href="#specify-a-docker-image"><span class="truncate pointer-events-none">Specify a Docker image</span></a></li><li><a href="#specify-a-dockerfile"><span class="truncate pointer-events-none">Specify a Dockerfile</span></a></li><li><a href="#specify-a-docker-ignore-file"><span class="truncate pointer-events-none">Specify a Docker ignore file</span></a></li><li><a href="#specify-a-multistage-docker-build-target"><span class="truncate pointer-events-none">Specify a multistage Docker build target</span></a></li><li><a href="#specify-docker-build-arguments"><span class="truncate pointer-events-none">Specify Docker build arguments</span></a></li></ul></li><li><a href="#the-deploy-section"><span class="truncate pointer-events-none">The deploy section</span></a><ul><li><a href="#run-one-off-commands-before-releasing-a-deployment"><span class="truncate pointer-events-none">Run one-off commands before releasing a deployment</span></a></li><li><a href="#picking-a-deployment-strategy"><span class="truncate pointer-events-none">Picking a deployment strategy</span></a><ul><li><a href="#rolling-deploy-configuration"><span class="truncate pointer-events-none">Rolling deploy configuration</span></a></li></ul></li><li><a href="#dealing-with-timeout-errors-while-deploying-a-new-version"><span class="truncate pointer-events-none">Dealing with timeout errors while deploying a new version</span></a></li></ul></li><li><a href="#the-env-variables-section"><span class="truncate pointer-events-none">The env variables section</span></a></li><li><a href="#the-http_service-section"><span class="truncate pointer-events-none">The http_service section</span></a><ul><li><a href="#http_service-concurrency"><span class="truncate pointer-events-none">http_service.concurrency</span></a></li><li><a href="#http_service-http_options-idle_timeout"><span class="truncate pointer-events-none">http_service.http_options.idle_timeout</span></a></li><li><a href="#http_service-http_options-response-pristine"><span class="truncate pointer-events-none">http_service.http_options.response.pristine</span></a></li><li><a href="#http_service-http_options-response-headers"><span class="truncate pointer-events-none">http_service.http_options.response.headers</span></a></li><li><a href="#http_service-http_options-h2_backend"><span class="truncate pointer-events-none">http_service.http_options.h2_backend</span></a></li><li><a href="#http_service-http_options-replay_cache"><span class="truncate pointer-events-none">http_service.http_options.replay_cache</span></a><ul><li><a href="#http_service-http_options-replay_cache-path_prefix"><span class="truncate pointer-events-none">http_service.http_options.replay_cache.path_prefix</span></a></li><li><a href="#http_service-http_options-replay_cache-ttl_seconds"><span class="truncate pointer-events-none">http_service.http_options.replay_cache.ttl_seconds</span></a></li><li><a href="#http_service-http_options-replay_cache-type"><span class="truncate pointer-events-none">http_service.http_options.replay_cache.type</span></a></li><li><a href="#http_service-http_options-replay_cache-name"><span class="truncate pointer-events-none">http_service.http_options.replay_cache.name</span></a></li><li><a href="#http_service-http_options-replay_cache-allow_bypass"><span class="truncate pointer-events-none">http_service.http_options.replay_cache.allow_bypass</span></a></li></ul></li><li><a href="#http_service-tls_options"><span class="truncate pointer-events-none">http_service.tls_options</span></a></li><li><a href="#http_service-checks"><span class="truncate pointer-events-none">http_service.checks</span></a></li><li><a href="#the-http_service-machine_checks-section"><span class="truncate pointer-events-none">The http_service.machine_checks section</span></a></li></ul></li><li><a href="#the-services-sections"><span class="truncate pointer-events-none">The services sections</span></a><ul><li><a href="#services-ports"><span class="truncate pointer-events-none">services.ports</span></a></li><li><a href="#services-ports-http_options-idle_timeout"><span class="truncate pointer-events-none">services.ports.http_options.idle_timeout</span></a></li><li><a href="#services-ports-http_options-response-pristine"><span class="truncate pointer-events-none">services.ports.http_options.response.pristine</span></a><ul><li><a href="#services-ports-http_options-response-headers"><span class="truncate pointer-events-none">services.ports.http_options.response.headers</span></a></li></ul></li><li><a href="#services-ports-http_options-h2_backend"><span class="truncate pointer-events-none">services.ports.http_options.h2_backend</span></a></li><li><a href="#services-ports-http_options-replay_cache"><span class="truncate pointer-events-none">services.ports.http_options.replay_cache</span></a><ul><li><a href="#services-ports-http_options-replay_cache-path_prefix"><span class="truncate pointer-events-none">services.ports.http_options.replay_cache.path_prefix</span></a></li><li><a href="#services-ports-http_options-replay_cache-ttl_seconds"><span class="truncate pointer-events-none">services.ports.http_options.replay_cache.ttl_seconds</span></a></li><li><a href="#services-ports-http_options-replay_cache-type"><span class="truncate pointer-events-none">services.ports.http_options.replay_cache.type</span></a></li><li><a href="#services-ports-http_options-replay_cache-name"><span class="truncate pointer-events-none">services.ports.http_options.replay_cache.name</span></a></li><li><a href="#services-ports-http_options-replay_cache-allow_bypass"><span class="truncate pointer-events-none">services.ports.http_options.replay_cache.allow_bypass</span></a></li><li><a href="#services-ports-proxy_proto_options"><span class="truncate pointer-events-none">services.ports.proxy_proto_options</span></a></li><li><a href="#services-ports-tls_options"><span class="truncate pointer-events-none">services.ports.tls_options</span></a></li></ul></li><li><a href="#services-concurrency"><span class="truncate pointer-events-none">services.concurrency</span></a></li><li><a href="#services-tcp_checks"><span class="truncate pointer-events-none">services.tcp_checks</span></a></li><li><a href="#services-http_checks"><span class="truncate pointer-events-none">services.http_checks</span></a></li><li><a href="#services-machine_checks"><span class="truncate pointer-events-none">services.machine_checks</span></a></li></ul></li><li><a href="#the-mounts-section"><span class="truncate pointer-events-none">The mounts section</span></a><ul><li><a href="#source"><span class="truncate pointer-events-none">source</span></a></li><li><a href="#destination"><span class="truncate pointer-events-none">destination</span></a></li><li><a href="#processes"><span class="truncate pointer-events-none">processes</span></a></li><li><a href="#initial_size"><span class="truncate pointer-events-none">initial_size</span></a></li><li><a href="#snapshot_retention"><span class="truncate pointer-events-none">snapshot_retention</span></a></li><li><a href="#scheduled_snapshots"><span class="truncate pointer-events-none">scheduled_snapshots</span></a></li><li><a href="#auto_extend_size_threshold"><span class="truncate pointer-events-none">auto_extend_size_threshold</span></a></li><li><a href="#auto_extend_size_increment"><span class="truncate pointer-events-none">auto_extend_size_increment</span></a></li><li><a href="#auto_extend_size_limit"><span class="truncate pointer-events-none">auto_extend_size_limit</span></a></li><li><a href="#auto-extend-volume-size-configuration"><span class="truncate pointer-events-none">Auto extend volume size configuration</span></a></li></ul></li><li><a href="#the-vm-section"><span class="truncate pointer-events-none">The vm section</span></a><ul><li><a href="#size"><span class="truncate pointer-events-none">size</span></a></li><li><a href="#memory"><span class="truncate pointer-events-none">memory</span></a></li><li><a href="#cpus"><span class="truncate pointer-events-none">cpus</span></a></li><li><a href="#cpu_kind"><span class="truncate pointer-events-none">cpu_kind</span></a></li><li><a href="#gpus"><span class="truncate pointer-events-none">gpus</span></a></li><li><a href="#gpu_kind"><span class="truncate pointer-events-none">gpu_kind</span></a></li><li><a href="#kernel_args"><span class="truncate pointer-events-none">kernel_args</span></a></li><li><a href="#host_dedication_id"><span class="truncate pointer-events-none">host_dedication_id</span></a></li><li><a href="#persist_rootfs"><span class="truncate pointer-events-none">persist_rootfs</span></a></li><li><a href="#processes-2"><span class="truncate pointer-events-none">processes</span></a></li></ul></li><li><a href="#the-restart-section"><span class="truncate pointer-events-none">The restart section</span></a></li><li><a href="#the-checks-section"><span class="truncate pointer-events-none">The checks section</span></a></li><li><a href="#the-processes-section"><span class="truncate pointer-events-none">The processes section</span></a></li><li><a href="#the-metrics-section"><span class="truncate pointer-events-none">The metrics section</span></a></li><li><a href="#the-statics-sections"><span class="truncate pointer-events-none">The statics sections</span></a><ul><li><a href="#serving-statics-from-a-fly-machine"><span class="truncate pointer-events-none">Serving statics from a Fly Machine</span></a></li><li><a href="#serving-statics-from-tigris-object-storage"><span class="truncate pointer-events-none">Serving statics from Tigris object storage</span></a></li><li><a href="#caveats"><span class="truncate pointer-events-none">Caveats</span></a></li></ul></li><li><a href="#the-files-section"><span class="truncate pointer-events-none">The files section</span></a></li><li><a href="#the-experimental-section"><span class="truncate pointer-events-none">The experimental section</span></a><ul><li><a href="#cmd"><span class="truncate pointer-events-none">cmd</span></a></li><li><a href="#entrypoint"><span class="truncate pointer-events-none">entrypoint</span></a></li><li><a href="#exec"><span class="truncate pointer-events-none">exec</span></a></li></ul></li></ul>
                </nav>
                  <div class="border-t border-gray-200 mt-4 mb-3"></div>
                  <button
                    type="button"
                    data-copy-target="#raw-markdown-content"
                    class="flex items-center gap-2 pl-3 pb-2 text-gray-600 hover:text-violet-600 transition-colors cursor-pointer bg-transparent border-0 text-sm"
                  >
                    
<svg aria-hidden="true" class="" style="width: 16px; height: 16px; pointer-events: none;" viewBox="0 0 208 128" fill="currentColor">
  <rect width="198" height="118" x="5" y="5" ry="10" stroke="currentColor" stroke-width="10" fill="none"/>
  <path d="M30 98V30h20l20 25 20-25h20v68H90V59L70 84 50 59v39zm125 0l-30-33h20V30h20v35h20z"/>
</svg>

                    <span class="copy-button-text">Copy page as markdown</span>
                  </button>
                  <a target="_blank" class="flex items-center gap-2 pl-3 pb-3 text-gray-600 hover:text-violet-600 transition-colors text-sm" href="https://chatgpt.com/?hints=search&amp;q=Read+https%3A%2F%2Fraw.githubusercontent.com%2Fsuperfly%2Fdocs%2Fmain%2Freference%2Fconfiguration.html.markerb">
                    
<svg aria-hidden="true" class=" pointer-events-none" style="width: 16px; height: 16px;" viewBox="0 0 24 24" fill="currentColor">
  <path d="M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.515 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z"/>
</svg>

                    Open in ChatGPT
                    
<svg aria-hidden="true" class="ml-0.5 pointer-events-none" style="width: 14px; height: 14px;" viewBox="0 0 16 16" fill="none">
  <rect width="16" height="16" rx="3" fill="currentColor" opacity="0.1"/>
  <path d="M6 5h5v5M11 5l-5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

</a>              </div>
          </div>
        </main>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    <script>
      (() => {
        let current = null
        const waypoints = document.querySelector('.waypoints')

        docsearch({
          container: '#docsearch',
          appId: '4ET05XOQRG',
          indexName: 'fly',
          apiKey: 'd38feeafac461afb3a016086321f10e9',
          placeholder: 'Find somethingâ¦',
          debug: false, // Set debug to true if you want to inspect the dropdown
        })

        function placeDocSearch() {
          const docsearchWrapperLg = document.querySelector('.docsearch-wrapper-lg')
          const docsearchWrapperSm = document.querySelector('.docsearch-wrapper-sm')
          const docsearchButton = document.querySelector('#docsearch')

          if (window.innerWidth >= 1024 && docsearchWrapperLg && docsearchButton) {
            docsearchWrapperLg.appendChild(docsearchButton)
          } else if (window.innerWidth < 1024 && docsearchWrapperSm && docsearchButton) {
            docsearchWrapperSm.appendChild(docsearchButton)
          }
        }

        const TableOfContents = {
          container: document.querySelector('.waypoints'),
          links: null,
          headings: null,
          intersectionOptions: {
            rootMargin: '0px',
            threshold: 1
          },
          previousSection: null,
          observer: null,
          isHovering: false,

          init() {
            if (!this.container) return false

            this.getMaxHeight()

            this.handleObserver = this.handleObserver.bind(this)
            this.setUpObserver()
            this.findLinksAndHeadings()
            this.observeSections()
          },

          handleObserver(entries, observer) {
            entries.forEach(entry => {
              let href = `#${entry.target.getAttribute('id')}`
              let link = this.links.find(l => l.getAttribute('href') === href)

              if (entry.isIntersecting && entry.intersectionRatio >= 1) {
                link.classList.add('visible')
                this.previousSection = entry.target.getAttribute('id')
              } else {
                link.classList.remove('visible')
              }

              this.highlightFirstActive()
            })
          },

          highlightFirstActive() {
            const firstVisibleLink = this.container.querySelector('.visible') || this.container.querySelector(`a[href="#${this.previousSection}"]`)
            const location = window.location.toString().split('#')[0]

            this.links.forEach(link => {
              if (link.classList.contains('active')) {
                link.classList.remove('active')
              }
            })

            if (firstVisibleLink) {
              firstVisibleLink.classList.add('active')
              if (!this.isHovering) firstVisibleLink.scrollIntoView({ block: 'nearest', inline: 'nearest' })
            }
          },

          observeSections() {
            this.headings.forEach(heading => {
              this.observer.observe(heading)
            })
          },

          setUpObserver() {
            this.observer = new IntersectionObserver(
              this.handleObserver,
              this.intersectionOptions
            )
          },

          findLinksAndHeadings() {
            this.links = [...this.container.querySelectorAll('a')]
            this.headings = this.links.map(link => {
              let id = link.getAttribute('href')
              return document.querySelector(id)
            })
          },

          getMaxHeight() {
            if (!this.container) return false
            let rect = this.container.getBoundingClientRect()
            this.container.style.maxHeight = `${window.innerHeight - rect.top - 20}px`
          }
        }

        if (waypoints) {
          waypoints.addEventListener('mouseover', function() {
            TableOfContents.isHovering = true
          })

          waypoints.addEventListener('mouseout', function() {
            TableOfContents.isHovering = false
          })
        } 

        document.addEventListener('DOMContentLoaded', () => {
          placeDocSearch()
          TableOfContents.init()
        })

        window.addEventListener('resize', () => {
          placeDocSearch()
          TableOfContents.getMaxHeight()
        })
                
        document.addEventListener('focus', event => {
          if (!event.target.matches('.api-card-select')) return false
          current = event.target.value
        }, true)
        
        document.addEventListener('change', event => {
          if (!event.target.matches('.api-card-select')) return false
          const selected = event.target.value.toLowerCase()
          const next = event.target.closest('.api-card').querySelector(`.${selected}`)
          if (current) event.target.closest('.api-card').querySelector(`.${current}`).classList.toggle('hidden')
          if (next) next.classList.toggle('hidden')
          current = selected
        })
      })()
    </script>

    <script src="/static/javascripts/application.js"></script>

  </body>


</html>